{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/bundled.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","THREE","GLTFLoader","manager","Loader","this","dracoLoader","ddsLoader","GLTFRegistry","objects","add","remove","removeAll","assign","constructor","load","url","onLoad","onProgress","onError","resourcePath","scope","path","LoaderUtils","extractUrlBase","itemStart","_onError","e","console","error","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","crossOrigin","setWithCredentials","data","parse","gltf","setDRACOLoader","setDDSLoader","content","extensions","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","undefined","asset","version","Error","extensionsUsed","length","extensionName","extensionsRequired","KHR_LIGHTS_PUNCTUAL","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","indexOf","warn","GLTFParser","extension","lightDefs","lights","loadLight","lightIndex","lightNode","lightDef","color","Color","fromArray","range","type","DirectionalLight","target","position","set","PointLight","distance","SpotLight","spot","innerConeAngle","outerConeAngle","Math","PI","angle","penumbra","decay","intensity","Promise","resolve","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","parser","pending","opacity","metallicRoughness","pbrMetallicRoughness","Array","isArray","baseColorFactor","array","baseColorTexture","push","assignTexture","all","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","body","headerView","DataView","header","magic","slice","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","specularGlossinessParams","ShaderMaterial","pbrSpecularGlossiness","shader","ShaderLib","uniforms","UniformsUtils","clone","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","fragmentShader","replace","roughness","metalness","roughnessMap","metalnessMap","specular","setHex","glossiness","specularMap","glossinessMap","vertexShader","defines","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","params","material","fog","transparent","isGLTFSpecularGlossinessMaterial","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","derivatives","cloneMaterial","source","il","isColor","refreshUniforms","renderer","scene","camera","geometry","uvScaleMap","diffuse","copy","multiplyScalar","isWebGLRenderTarget","texture","matrixAutoUpdate","updateMatrix","uvTransform","matrix","flipEnvMap","isCubeTexture","reflectivity","maxMipLevel","properties","__maxMipLevel","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","attributes","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","toLowerCase","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","getDependency","then","decodeDracoFile","attribute","extendTexture","transform","offset","rotation","scale","repeat","texCoord","needsUpdate","copySampleValue_","index","result","values","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t1","stride","stride2","stride3","td","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","defaultMaterial","WEBGL_CONSTANTS","5120","Int8Array","5121","5122","Int16Array","5123","Uint16Array","5125","Uint32Array","5126","Float32Array","WEBGL_FILTERS","9728","NearestFilter","9729","LinearFilter","9984","NearestMipmapNearestFilter","9985","LinearMipmapNearestFilter","9986","NearestMipmapLinearFilter","9987","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","MIME_TYPE_FORMATS","RGBAFormat","RGBFormat","resolveURL","test","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","mesh","meshDef","morphTargetInfluences","targetNames","morphTargetDictionary","createAttributesKey","attributesKey","keys","sort","cloneBufferAttribute","isInterleavedBufferAttribute","count","itemSize","j","getX","getY","getZ","getW","BufferAttribute","options","cache","primitiveCache","textureLoader","TextureLoader","setCrossOrigin","fileLoader","addPrimitiveAttributes","primitiveDef","assignAttributeAccessor","accessorIndex","accessor","addAttribute","gltfAttributeName","indices","setIndex","targets","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","normal","morphPositions","morphNormals","positionAttribute","jl","setXYZ","normalAttribute","morphAttributes","addMorphTargets","markDefs","getDependencies","dependencies","scenes","animations","cameras","catch","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","uri","reject","bufferViewDef","bufferViews","buffer","sparse","pendingBufferViews","bufferAttribute","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","textureIndex","URL","window","webkitURL","textureDef","textures","textureExtensions","sourceURI","images","isObjectURL","blob","Blob","mimeType","createObjectURL","getHandler","revokeObjectURL","flipY","format","sampler","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","isCompressedTexture","assignFinalMaterial","useVertexTangents","tangent","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","skinning","vertexTangents","vertexColors","VertexColors","flatShading","morphTargets","uv2","uv","log","onBeforeRender","materialIndex","materialType","materials","materialExtensions","sgExtension","kmuExtension","MeshStandardMaterial","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","side","DoubleSide","alphaMode","alphaTest","alphaCutoff","normalTexture","Vector2","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","sRGBEncoding","loadGeometries","primitives","createDracoPrimitive","dracoExtension","geometryPromise","cached","promise","BufferGeometry","meshIndex","depthTest","FrontSide","originalMaterials","geometries","SkinnedMesh","Mesh","skinWeight","normalizeSkinWeights","drawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","Line","LineLoop","Points","group","Group","cameraIndex","cameraDef","PerspectiveCamera","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","id","input","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","traverse","isMesh","outputArray","scaled","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","instanceNum","children","light","Bone","Object3D","PropertyBinding","sanitizeNodeName","Matrix4","applyMatrix","quaternion","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","Skeleton","matrixWorld","child","sceneIndex","sceneDef","Scene","nodeIds","OBJLoader","object_pattern","material_library_pattern","material_use_pattern","ParserState","state","vertices","normals","colors","uvs","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","smooth","startMaterial","libraries","previous","inherited","groupCount","splice","mtllib","groupStart","groupEnd","cloned","end","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","len","parseInt","parseNormalIndex","parseUVIndex","addVertex","a","b","src","dst","addVertexPoint","addVertexLine","addNormal","addColor","addUV","addUVLine","addFace","ua","ub","uc","na","nb","nc","vLen","ia","ic","uvLen","nLen","addPointGeometry","vi","addLineGeometry","uvi","text","setMaterials","time","lines","split","line","lineFirstChar","trimLeft","trim","charAt","parseFloat","vertexData","substr","faceVertices","vertex","vertexParts","v1","v2","v3","lineParts","substring","lineVertices","lineUVs","li","llen","parts","pointData","exec","container","concat","hasVertexColors","buffergeometry","Float32BufferAttribute","computeVertexNormals","createdMaterials","miLen","sourceMaterial","materialPoints","size","materialLine","MeshPhongMaterial","NoColors","addGroup","timeEnd","_object","_vector","_transform","getShapeFromCache","setShapeCache","createShape","reportWorld","reportVehicles","reportCollisions","reportConstraints","fixedTimeStep","last_simulation_time","world","_vec3_1","_vec3_2","_vec3_3","_quat","REPORT_CHUNKSIZE","worldreport","collisionreport","vehiclereport","constraintreport","transferableMessage","self","webkitPostMessage","postMessage","MESSAGE_TYPES","public_functions","last_simulation_duration","_objects","_vehicles","_constraints","_materials","_objects_ammo","_num_objects","_num_wheels","_num_constraints","_object_shapes","_motion_states","_noncached_shapes","_compound_shapes","ab","ArrayBuffer","rotateAngle","player","bullets","clock","lastTimeStamp","SUPPORT_TRANSFERABLE","Bullets","Input","isLeftPressed","isRightPressed","isFwdPressed","isBwdPressed","isShiftPressed","isRLPressed","isRRPressed","isSpacePressed","isFirePressed","isXPressed","handleKeyEvent","isKeyDown","keyCode","document","addEventListener","Environment","anisotropy","materialMap","Targettexture","groundGeometry","PlaneGeometry","ground","Physijs","PlaneMesh","x","receiveShadow","Vector3","env3BlockGeometry","BoxBufferGeometry","env3BlockMaterial","MeshLambertMaterial","env3Block","BoxMesh","random","y","z","setAngularFactor","setAngularVelocity","other_object","linear_velocity","angular_velocity","points","getElementById","innerHTML","visible","rot","point","TargetBlockGeometry","CylinderBufferGeometry","TargetBlockMaterial","TargetBlock","env1BIGBlockGeometry","env1BIGBlockMaterial","env1BIGBlock","env1TrunkBlockGeometry","env1TrunkBlockMaterial","env1TrunkBlock","hp","towerRow","height","width","zPos","env4BlockGeometry","env4BlockMaterial","env4Block","towerBuilder","numRows","cache_key","shape","description","setIdentity","Ammo","btStaticPlaneShape","depth","btBoxShape","radius","btSphereShape","btCylinderShape","btCapsuleShape","btConeShape","triangle","triangle_mesh","btTriangleMesh","triangles","addTriangle","btBvhTriangleMeshShape","btConvexHullShape","addPoint","ptr","allocate","xpts","ypts","ALLOC_NORMAL","f","setValue","btHeightfieldTerrainShape","absMaxHeight","xsize","ysize","setLocalScaling","init","importScripts","ammo","btTransform","btVector3","btQuaternion","reportsize","broadphase","collisionConfiguration","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","solver","btSequentialImpulseConstraintSolver","aabbmin","aabbmax","btAxisSweep3","btDbvtBroadphase","btDiscreteDynamicsWorld","rateLimit","cmd","registerMaterial","unRegisterMaterial","setFixedTimeStep","setGravity","addObject","motionState","rbInfo","_child","compound_shape","btCompoundShape","addChildShape","trans","position_offset","setOrigin","w","setRotation","destroy","calculateLocalInertia","mass","btDefaultMotionState","btRigidBodyConstructionInfo","materialId","set_m_friction","friction","set_m_restitution","restitution","btRigidBody","collision_flags","setCollisionFlags","addRigidBody","addVehicle","vehicle","vehicle_tuning","btVehicleTuning","set_m_suspensionStiffness","suspension_stiffness","set_m_suspensionCompression","suspension_compression","set_m_suspensionDamping","suspension_damping","set_m_maxSuspensionTravelCm","max_suspension_travel","set_m_maxSuspensionForce","max_suspension_force","btRaycastVehicle","rigidBody","btDefaultVehicleRaycaster","tuning","setActivationState","setCoordinateSystem","removeVehicle","addWheel","connection_point","wheel_direction","wheel_axle","suspension_rest_length","wheel_radius","is_front_wheel","setSteering","details","setSteeringValue","steering","wheel","setBrake","brake","applyEngineForce","force","removeObject","removeRigidBody","updateTransform","getMotionState","getWorldTransform","pos","quat","setWorldTransform","activate","updateMass","setMassProps","applyCentralImpulse","applyImpulse","impulse_x","impulse_y","impulse_z","applyTorque","torque_x","torque_y","torque_z","applyCentralForce","applyForce","force_x","force_y","force_z","onSimulationResume","Date","now","setLinearVelocity","setLinearFactor","setDamping","linear","angular","setCcdMotionThreshold","threshold","setCcdSweptSphereRadius","addConstraint","constraint","objectb","positiona","btPoint2PointConstraint","objecta","positionb","axis","btHingeConstraint","transforma","getRotation","setEuler","transformb","btSliderConstraint","setEulerZYX","axisa","axisb","btConeTwistConstraint","setLimit","btGeneric6DofConstraint","enableFeedback","removeConstraint","constraint_setBreakingImpulseThreshold","undefind","setBreakingImpulseThreshold","simulate","timeStep","maxSubSteps","ceil","stepSimulation","hinge_setLimits","low","high","bias_factor","relaxation_factor","hinge_enableAngularMotor","enableAngularMotor","velocity","acceleration","getRigidBodyA","getRigidBodyB","hinge_disableMotor","enableMotor","slider_setLimits","setLowerLinLimit","lin_lower","setUpperLinLimit","lin_upper","setLowerAngLimit","ang_lower","setUpperAngLimit","ang_upper","slider_setRestitution","setSoftnessLimLin","setSoftnessLimAng","slider_enableLinearMotor","setTargetLinMotorVelocity","setMaxLinMotorForce","setPoweredLinMotor","slider_disableLinearMotor","slider_enableAngularMotor","setTargetAngMotorVelocity","setMaxAngMotorForce","setPoweredAngMotor","slider_disableAngularMotor","conetwist_setLimit","conetwist_enableMotor","conetwist_setMaxMotorImpulse","setMaxMotorImpulse","max_impulse","conetwist_setMotorTarget","setMotorTarget","conetwist_disableMotor","dof_setLinearLowerLimit","setLinearLowerLimit","dof_setLinearUpperLimit","setLinearUpperLimit","dof_setAngularLowerLimit","setAngularLowerLimit","dof_setAngularUpperLimit","setAngularUpperLimit","dof_enableAngularMotor","getRotationalLimitMotor","which","set_m_enableMotor","dof_configureAngularMotor","motor","set_m_loLimit","low_angle","set_m_hiLimit","high_angle","set_m_targetVelocity","set_m_maxMotorForce","max_force","dof_disableAngularMotor","origin","getCenterOfMassTransform","getOrigin","getLinearVelocity","getAngularVelocity","manifold","num_contacts","pt","dp","getDispatcher","num","getNumManifolds","getManifoldByIndexInternal","getNumContacts","getContactPoint","getBody0","getBody1","get_m_normalWorldOnB","getNumWheels","getWheelInfo","get_m_worldTransform","offset_body","getFrameOffsetA","getAppliedImpulse","onmessage","event","Eventable","getObjectId","convertWorldPositionToObject","addObjectChildren","_temp1","_temp2","_id","_is_simulating","_Physijs","_temp_vector3_1","_temp_vector3_2","_temp_matrix4_1","_quaternion_1","Quaternion","scripts","_eventListeners","event_name","callback","removeEventListener","dispatchEvent","arguments","apply","make","obj","atan2","asin","c1","c2","c3","c1c2","s1s2","cos","sin","identity","makeRotationFromQuaternion","getInverse","sub","applyMatrix4","noConflict","physijs_material","_physijs","PointConstraint","appliedImpulse","getDefinition","HingeConstraint","parent","setLimits","execute","disableMotor","SliderConstraint","setRestitution","enableLinearMotor","disableLinearMotor","disableAngularMotor","ConeTwistConstraint","setFromEuler","Euler","setFromRotationMatrix","DOFConstraint","limit","configureAngularMotor","_worker","Worker","worker","_materials_ref_counts","_temp","_updateScene","_updateCollisions","_updateVehicles","_updateConstraints","debug","dir","num_objects","__dirtyPosition","__dirtyRotation","linearVelocity","angularVelocity","wheels","extractRotation","addVectors","object2","id1","id2","collisions","normal_offsets","touches","subVectors","normal_offset","show_marker","marker","SphereGeometry","MeshNormalMaterial","BoxGeometry","updateMatrixWorld","setFromMatrixPosition","Vehicle","pop","gravity","object_id","update","boundingBox","computeBoundingBox","__defineGetter__","__defineSetter__","factor","max","min","faces","HeightfieldMesh","xdiv","ydiv","sqrt","abs","round","SphereMesh","boundingSphere","computeBoundingSphere","pow","CylinderMesh","CapsuleMesh","ConeMesh","ConcaveMesh","face","Face3","Face4","ConvexMesh","VehicleTuning","friction_slip","wheel_geometry","wheel_material","castShadow","amount","fire","playerSpeed","bulletsLBlockGeometry","bulletsLBlockMaterial","bulletsLBlock","wpVector","getWorldDirection","createdAt","getElapsedTime","selectedObject","getObjectByName","winner","opponent","mechMesh","wireframe","mechMesh2","player2","ph","serverPackage","player2Data","bulletCount","playerGeometry","playerMaterial","background","innerWidth","innerHeight","light1","light2","AmbientLight","createLights","CubeGeometry","WebGLRenderer","antialias","setSize","setPixelRatio","devicePixelRatio","physicallyCorrectLights","pointTally","createElement","style","appendChild","opponentHP","marginTop","timeTally","winnerUI","domElement","aspect","updateProjectionMatrix","Raycaster","Clock","socket","emit","h","pb","animate","timeStamp","delta","getDelta","requestAnimationFrame","timeDelta","movementSpeed","boost","translateOnAxis","rotateOnAxis","wpVector2","tquaternion","setFromQuaternion","degToRad","getWorldQuaternion","on","serverPack","render"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * @author Rich Tibbett / https://github.com/richtr\n * @author mrdoob / http://mrdoob.com/\n * @author Tony Parisi / http://www.tonyparisi.com/\n * @author Takahiro / https://github.com/takahirox\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nTHREE.GLTFLoader = (function () {\n\n  function GLTFLoader(manager) {\n\n    THREE.Loader.call(this, manager);\n\n    this.dracoLoader = null;\n    this.ddsLoader = null;\n\n  }\n\n  GLTFLoader.prototype = Object.assign(Object.create(THREE.Loader.prototype), {\n\n    constructor: GLTFLoader,\n\n    load: function (url, onLoad, onProgress, onError) {\n\n      var scope = this;\n\n      var resourcePath;\n\n      if (this.resourcePath !== '') {\n\n        resourcePath = this.resourcePath;\n\n      } else if (this.path !== '') {\n\n        resourcePath = this.path;\n\n      } else {\n\n        resourcePath = THREE.LoaderUtils.extractUrlBase(url);\n\n      }\n\n      // Tells the LoadingManager to track an extra item, which resolves after\n      // the model is fully loaded. This means the count of items loaded will\n      // be incorrect, but ensures manager.onLoad() does not fire early.\n      // debugger\n      scope.manager.itemStart(url);\n\n      var _onError = function (e) {\n\n        if (onError) {\n\n          onError(e);\n\n        } else {\n\n          console.error(e);\n\n        }\n\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n\n      };\n\n      var loader = new THREE.FileLoader(scope.manager);\n\n      loader.setPath(this.path);\n      loader.setResponseType('arraybuffer');\n\n      if (scope.crossOrigin === 'use-credentials') {\n\n        loader.setWithCredentials(true);\n\n      }\n\n      loader.load(url, function (data) {\n\n        try {\n\n          scope.parse(data, resourcePath, function (gltf) {\n\n            onLoad(gltf);\n\n            scope.manager.itemEnd(url);\n\n          }, _onError);\n\n        } catch (e) {\n\n          _onError(e);\n\n        }\n\n      }, onProgress, _onError);\n\n    },\n\n    setDRACOLoader: function (dracoLoader) {\n\n      this.dracoLoader = dracoLoader;\n      return this;\n\n    },\n\n    setDDSLoader: function (ddsLoader) {\n\n      this.ddsLoader = ddsLoader;\n      return this;\n\n    },\n\n    parse: function (data, path, onLoad, onError) {\n\n      var content;\n      var extensions = {};\n\n      if (typeof data === 'string') {\n\n        content = data;\n\n      } else {\n\n        var magic = THREE.LoaderUtils.decodeText(new Uint8Array(data, 0, 4));\n\n        if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n\n          try {\n\n            extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n\n          } catch (error) {\n\n            if (onError) onError(error);\n            return;\n\n          }\n\n          content = extensions[EXTENSIONS.KHR_BINARY_GLTF].content;\n\n        } else {\n\n          content = THREE.LoaderUtils.decodeText(new Uint8Array(data));\n\n        }\n\n      }\n\n      var json = JSON.parse(content);\n\n      if (json.asset === undefined || json.asset.version[0] < 2) {\n\n        if (onError) onError(new Error('THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.'));\n        return;\n\n      }\n\n      if (json.extensionsUsed) {\n\n        for (var i = 0; i < json.extensionsUsed.length; ++i) {\n\n          var extensionName = json.extensionsUsed[i];\n          var extensionsRequired = json.extensionsRequired || [];\n\n          switch (extensionName) {\n\n            case EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\n              extensions[extensionName] = new GLTFLightsExtension(json);\n              break;\n\n            case EXTENSIONS.KHR_MATERIALS_UNLIT:\n              extensions[extensionName] = new GLTFMaterialsUnlitExtension();\n              break;\n\n            case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n              extensions[extensionName] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n              break;\n\n            case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n              extensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\n              break;\n\n            case EXTENSIONS.MSFT_TEXTURE_DDS:\n              extensions[EXTENSIONS.MSFT_TEXTURE_DDS] = new GLTFTextureDDSExtension(this.ddsLoader);\n              break;\n\n            case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n              extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] = new GLTFTextureTransformExtension();\n              break;\n\n            default:\n\n              if (extensionsRequired.indexOf(extensionName) >= 0) {\n\n                console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\n\n              }\n\n          }\n\n        }\n\n      }\n\n      var parser = new GLTFParser(json, extensions, {\n\n        path: path || this.resourcePath || '',\n        crossOrigin: this.crossOrigin,\n        manager: this.manager\n\n      });\n\n      parser.parse(onLoad, onError);\n\n    }\n\n  });\n\n  /* GLTFREGISTRY */\n\n  function GLTFRegistry() {\n\n    var objects = {};\n\n    return {\n\n      get: function (key) {\n\n        return objects[key];\n\n      },\n\n      add: function (key, object) {\n\n        objects[key] = object;\n\n      },\n\n      remove: function (key) {\n\n        delete objects[key];\n\n      },\n\n      removeAll: function () {\n\n        objects = {};\n\n      }\n\n    };\n\n  }\n\n  /*********************************/\n  /********** EXTENSIONS ***********/\n  /*********************************/\n\n  var EXTENSIONS = {\n    KHR_BINARY_GLTF: 'KHR_binary_glTF',\n    KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n    KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n    KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n    KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n    KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n    MSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n  };\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n  function GLTFTextureDDSExtension(ddsLoader) {\n\n    if (!ddsLoader) {\n\n      throw new Error('THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader');\n\n    }\n\n    this.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n    this.ddsLoader = ddsLoader;\n\n  }\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n  function GLTFLightsExtension(json) {\n\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n    var extension = (json.extensions && json.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL]) || {};\n    this.lightDefs = extension.lights || [];\n\n  }\n\n  GLTFLightsExtension.prototype.loadLight = function (lightIndex) {\n\n    var lightDef = this.lightDefs[lightIndex];\n    var lightNode;\n\n    var color = new THREE.Color(0xffffff);\n    if (lightDef.color !== undefined) color.fromArray(lightDef.color);\n\n    var range = lightDef.range !== undefined ? lightDef.range : 0;\n\n    switch (lightDef.type) {\n\n      case 'directional':\n        lightNode = new THREE.DirectionalLight(color);\n        lightNode.target.position.set(0, 0, - 1);\n        lightNode.add(lightNode.target);\n        break;\n\n      case 'point':\n        lightNode = new THREE.PointLight(color);\n        lightNode.distance = range;\n        break;\n\n      case 'spot':\n        lightNode = new THREE.SpotLight(color);\n        lightNode.distance = range;\n        // Handle spotlight properties.\n        lightDef.spot = lightDef.spot || {};\n        lightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n        lightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n        lightNode.angle = lightDef.spot.outerConeAngle;\n        lightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n        lightNode.target.position.set(0, 0, - 1);\n        lightNode.add(lightNode.target);\n        break;\n\n      default:\n        throw new Error('THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".');\n\n    }\n\n    // Some lights (e.g. spot) default to a position other than the origin. Reset the position\n    // here, because node-level parsing will only override position if explicitly specified.\n    lightNode.position.set(0, 0, 0);\n\n    lightNode.decay = 2;\n\n    if (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity;\n\n    lightNode.name = lightDef.name || ('light_' + lightIndex);\n\n    return Promise.resolve(lightNode);\n\n  };\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n  function GLTFMaterialsUnlitExtension() {\n\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n  }\n\n  GLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n    return THREE.MeshBasicMaterial;\n\n  };\n\n  GLTFMaterialsUnlitExtension.prototype.extendParams = function (materialParams, materialDef, parser) {\n\n    var pending = [];\n\n    materialParams.color = new THREE.Color(1.0, 1.0, 1.0);\n    materialParams.opacity = 1.0;\n\n    var metallicRoughness = materialDef.pbrMetallicRoughness;\n\n    if (metallicRoughness) {\n\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n\n        var array = metallicRoughness.baseColorFactor;\n\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n\n      }\n\n      if (metallicRoughness.baseColorTexture !== undefined) {\n\n        pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n\n      }\n\n    }\n\n    return Promise.all(pending);\n\n  };\n\n  /* BINARY EXTENSION */\n  var BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n  var BINARY_EXTENSION_HEADER_LENGTH = 12;\n  var BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n  function GLTFBinaryExtension(data) {\n\n    this.name = EXTENSIONS.KHR_BINARY_GLTF;\n    this.content = null;\n    this.body = null;\n\n    var headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n\n    this.header = {\n      magic: THREE.LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n      version: headerView.getUint32(4, true),\n      length: headerView.getUint32(8, true)\n    };\n\n    if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n\n      throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');\n\n    } else if (this.header.version < 2.0) {\n\n      throw new Error('THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.');\n\n    }\n\n    var chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n    var chunkIndex = 0;\n\n    while (chunkIndex < chunkView.byteLength) {\n\n      var chunkLength = chunkView.getUint32(chunkIndex, true);\n      chunkIndex += 4;\n\n      var chunkType = chunkView.getUint32(chunkIndex, true);\n      chunkIndex += 4;\n\n      if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n\n        var contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n        this.content = THREE.LoaderUtils.decodeText(contentArray);\n\n      } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n\n        var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n        this.body = data.slice(byteOffset, byteOffset + chunkLength);\n\n      }\n\n      // Clients must ignore chunks with unknown types.\n\n      chunkIndex += chunkLength;\n\n    }\n\n    if (this.content === null) {\n\n      throw new Error('THREE.GLTFLoader: JSON content not found.');\n\n    }\n\n  }\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n  function GLTFDracoMeshCompressionExtension(json, dracoLoader) {\n\n    if (!dracoLoader) {\n\n      throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.');\n\n    }\n\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n    this.json = json;\n    this.dracoLoader = dracoLoader;\n\n  }\n\n  GLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function (primitive, parser) {\n\n    var json = this.json;\n    var dracoLoader = this.dracoLoader;\n    var bufferViewIndex = primitive.extensions[this.name].bufferView;\n    var gltfAttributeMap = primitive.extensions[this.name].attributes;\n    var threeAttributeMap = {};\n    var attributeNormalizedMap = {};\n    var attributeTypeMap = {};\n\n    for (var attributeName in gltfAttributeMap) {\n\n      var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n\n      threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n\n    }\n\n    for (attributeName in primitive.attributes) {\n\n      var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n\n      if (gltfAttributeMap[attributeName] !== undefined) {\n\n        var accessorDef = json.accessors[primitive.attributes[attributeName]];\n        var componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n\n        attributeTypeMap[threeAttributeName] = componentType;\n        attributeNormalizedMap[threeAttributeName] = accessorDef.normalized === true;\n\n      }\n\n    }\n\n    return parser.getDependency('bufferView', bufferViewIndex).then(function (bufferView) {\n\n      return new Promise(function (resolve) {\n\n        dracoLoader.decodeDracoFile(bufferView, function (geometry) {\n\n          for (var attributeName in geometry.attributes) {\n\n            var attribute = geometry.attributes[attributeName];\n            var normalized = attributeNormalizedMap[attributeName];\n\n            if (normalized !== undefined) attribute.normalized = normalized;\n\n          }\n\n          resolve(geometry);\n\n        }, threeAttributeMap, attributeTypeMap);\n\n      });\n\n    });\n\n  };\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n  function GLTFTextureTransformExtension() {\n\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n  }\n\n  GLTFTextureTransformExtension.prototype.extendTexture = function (texture, transform) {\n\n    texture = texture.clone();\n\n    if (transform.offset !== undefined) {\n\n      texture.offset.fromArray(transform.offset);\n\n    }\n\n    if (transform.rotation !== undefined) {\n\n      texture.rotation = transform.rotation;\n\n    }\n\n    if (transform.scale !== undefined) {\n\n      texture.repeat.fromArray(transform.scale);\n\n    }\n\n    if (transform.texCoord !== undefined) {\n\n      console.warn('THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.');\n\n    }\n\n    texture.needsUpdate = true;\n\n    return texture;\n\n  };\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n  function GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n    return {\n\n      name: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n      specularGlossinessParams: [\n        'color',\n        'map',\n        'lightMap',\n        'lightMapIntensity',\n        'aoMap',\n        'aoMapIntensity',\n        'emissive',\n        'emissiveIntensity',\n        'emissiveMap',\n        'bumpMap',\n        'bumpScale',\n        'normalMap',\n        'displacementMap',\n        'displacementScale',\n        'displacementBias',\n        'specularMap',\n        'specular',\n        'glossinessMap',\n        'glossiness',\n        'alphaMap',\n        'envMap',\n        'envMapIntensity',\n        'refractionRatio',\n      ],\n\n      getMaterialType: function () {\n\n        return THREE.ShaderMaterial;\n\n      },\n\n      extendParams: function (materialParams, materialDef, parser) {\n\n        var pbrSpecularGlossiness = materialDef.extensions[this.name];\n\n        var shader = THREE.ShaderLib['standard'];\n\n        var uniforms = THREE.UniformsUtils.clone(shader.uniforms);\n\n        var specularMapParsFragmentChunk = [\n          '#ifdef USE_SPECULARMAP',\n          '\tuniform sampler2D specularMap;',\n          '#endif'\n        ].join('\\n');\n\n        var glossinessMapParsFragmentChunk = [\n          '#ifdef USE_GLOSSINESSMAP',\n          '\tuniform sampler2D glossinessMap;',\n          '#endif'\n        ].join('\\n');\n\n        var specularMapFragmentChunk = [\n          'vec3 specularFactor = specular;',\n          '#ifdef USE_SPECULARMAP',\n          '\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n          '\ttexelSpecular = sRGBToLinear( texelSpecular );',\n          '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n          '\tspecularFactor *= texelSpecular.rgb;',\n          '#endif'\n        ].join('\\n');\n\n        var glossinessMapFragmentChunk = [\n          'float glossinessFactor = glossiness;',\n          '#ifdef USE_GLOSSINESSMAP',\n          '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n          '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n          '\tglossinessFactor *= texelGlossiness.a;',\n          '#endif'\n        ].join('\\n');\n\n        var lightPhysicalFragmentChunk = [\n          'PhysicalMaterial material;',\n          'material.diffuseColor = diffuseColor.rgb;',\n          'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\n          'material.specularColor = specularFactor.rgb;',\n        ].join('\\n');\n\n        var fragmentShader = shader.fragmentShader\n          .replace('uniform float roughness;', 'uniform vec3 specular;')\n          .replace('uniform float metalness;', 'uniform float glossiness;')\n          .replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk)\n          .replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk)\n          .replace('#include <roughnessmap_fragment>', specularMapFragmentChunk)\n          .replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk)\n          .replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk);\n\n        delete uniforms.roughness;\n        delete uniforms.metalness;\n        delete uniforms.roughnessMap;\n        delete uniforms.metalnessMap;\n\n        uniforms.specular = { value: new THREE.Color().setHex(0x111111) };\n        uniforms.glossiness = { value: 0.5 };\n        uniforms.specularMap = { value: null };\n        uniforms.glossinessMap = { value: null };\n\n        materialParams.vertexShader = shader.vertexShader;\n        materialParams.fragmentShader = fragmentShader;\n        materialParams.uniforms = uniforms;\n        materialParams.defines = { 'STANDARD': '' };\n\n        materialParams.color = new THREE.Color(1.0, 1.0, 1.0);\n        materialParams.opacity = 1.0;\n\n        var pending = [];\n\n        if (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n\n          var array = pbrSpecularGlossiness.diffuseFactor;\n\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n\n        }\n\n        if (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n\n          pending.push(parser.assignTexture(materialParams, 'map', pbrSpecularGlossiness.diffuseTexture));\n\n        }\n\n        materialParams.emissive = new THREE.Color(0.0, 0.0, 0.0);\n        materialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n        materialParams.specular = new THREE.Color(1.0, 1.0, 1.0);\n\n        if (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n\n          materialParams.specular.fromArray(pbrSpecularGlossiness.specularFactor);\n\n        }\n\n        if (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n\n          var specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n          pending.push(parser.assignTexture(materialParams, 'glossinessMap', specGlossMapDef));\n          pending.push(parser.assignTexture(materialParams, 'specularMap', specGlossMapDef));\n\n        }\n\n        return Promise.all(pending);\n\n      },\n\n      createMaterial: function (params) {\n\n        // setup material properties based on MeshStandardMaterial for Specular-Glossiness\n\n        var material = new THREE.ShaderMaterial({\n          defines: params.defines,\n          vertexShader: params.vertexShader,\n          fragmentShader: params.fragmentShader,\n          uniforms: params.uniforms,\n          fog: true,\n          lights: true,\n          opacity: params.opacity,\n          transparent: params.transparent\n        });\n\n        material.isGLTFSpecularGlossinessMaterial = true;\n\n        material.color = params.color;\n\n        material.map = params.map === undefined ? null : params.map;\n\n        material.lightMap = null;\n        material.lightMapIntensity = 1.0;\n\n        material.aoMap = params.aoMap === undefined ? null : params.aoMap;\n        material.aoMapIntensity = 1.0;\n\n        material.emissive = params.emissive;\n        material.emissiveIntensity = 1.0;\n        material.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;\n\n        material.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;\n        material.bumpScale = 1;\n\n        material.normalMap = params.normalMap === undefined ? null : params.normalMap;\n\n        if (params.normalScale) material.normalScale = params.normalScale;\n\n        material.displacementMap = null;\n        material.displacementScale = 1;\n        material.displacementBias = 0;\n\n        material.specularMap = params.specularMap === undefined ? null : params.specularMap;\n        material.specular = params.specular;\n\n        material.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;\n        material.glossiness = params.glossiness;\n\n        material.alphaMap = null;\n\n        material.envMap = params.envMap === undefined ? null : params.envMap;\n        material.envMapIntensity = 1.0;\n\n        material.refractionRatio = 0.98;\n\n        material.extensions.derivatives = true;\n\n        return material;\n\n      },\n\n\t\t\t/**\n\t\t\t * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can\n\t\t\t * copy only properties it knows about or inherits, and misses many properties that would\n\t\t\t * normally be defined by MeshStandardMaterial.\n\t\t\t *\n\t\t\t * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of\n\t\t\t * loading a glTF model, but cloning later (e.g. by the user) would require these changes\n\t\t\t * AND also updating `.onBeforeRender` on the parent mesh.\n\t\t\t *\n\t\t\t * @param  {THREE.ShaderMaterial} source\n\t\t\t * @return {THREE.ShaderMaterial}\n\t\t\t */\n      cloneMaterial: function (source) {\n\n        var target = source.clone();\n\n        target.isGLTFSpecularGlossinessMaterial = true;\n\n        var params = this.specularGlossinessParams;\n\n        for (var i = 0, il = params.length; i < il; i++) {\n\n          var value = source[params[i]];\n          target[params[i]] = (value && value.isColor) ? value.clone() : value;\n\n        }\n\n        return target;\n\n      },\n\n      // Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.\n      refreshUniforms: function (renderer, scene, camera, geometry, material) {\n\n        if (material.isGLTFSpecularGlossinessMaterial !== true) {\n\n          return;\n\n        }\n\n        var uniforms = material.uniforms;\n        var defines = material.defines;\n\n        uniforms.opacity.value = material.opacity;\n\n        uniforms.diffuse.value.copy(material.color);\n        uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);\n\n        uniforms.map.value = material.map;\n        uniforms.specularMap.value = material.specularMap;\n        uniforms.alphaMap.value = material.alphaMap;\n\n        uniforms.lightMap.value = material.lightMap;\n        uniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n        uniforms.aoMap.value = material.aoMap;\n        uniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n        // uv repeat and offset setting priorities\n        // 1. color map\n        // 2. specular map\n        // 3. normal map\n        // 4. bump map\n        // 5. alpha map\n        // 6. emissive map\n\n        var uvScaleMap;\n\n        if (material.map) {\n\n          uvScaleMap = material.map;\n\n        } else if (material.specularMap) {\n\n          uvScaleMap = material.specularMap;\n\n        } else if (material.displacementMap) {\n\n          uvScaleMap = material.displacementMap;\n\n        } else if (material.normalMap) {\n\n          uvScaleMap = material.normalMap;\n\n        } else if (material.bumpMap) {\n\n          uvScaleMap = material.bumpMap;\n\n        } else if (material.glossinessMap) {\n\n          uvScaleMap = material.glossinessMap;\n\n        } else if (material.alphaMap) {\n\n          uvScaleMap = material.alphaMap;\n\n        } else if (material.emissiveMap) {\n\n          uvScaleMap = material.emissiveMap;\n\n        }\n\n        if (uvScaleMap !== undefined) {\n\n          // backwards compatibility\n          if (uvScaleMap.isWebGLRenderTarget) {\n\n            uvScaleMap = uvScaleMap.texture;\n\n          }\n\n          if (uvScaleMap.matrixAutoUpdate === true) {\n\n            uvScaleMap.updateMatrix();\n\n          }\n\n          uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n\n        }\n\n        if (material.envMap) {\n\n          uniforms.envMap.value = material.envMap;\n          uniforms.envMapIntensity.value = material.envMapIntensity;\n\n          // don't flip CubeTexture envMaps, flip everything else:\n          //  WebGLRenderTargetCube will be flipped for backwards compatibility\n          //  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n          // this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n          uniforms.flipEnvMap.value = material.envMap.isCubeTexture ? - 1 : 1;\n\n          uniforms.reflectivity.value = material.reflectivity;\n          uniforms.refractionRatio.value = material.refractionRatio;\n\n          uniforms.maxMipLevel.value = renderer.properties.get(material.envMap).__maxMipLevel;\n\n        }\n\n        uniforms.specular.value.copy(material.specular);\n        uniforms.glossiness.value = material.glossiness;\n\n        uniforms.glossinessMap.value = material.glossinessMap;\n\n        uniforms.emissiveMap.value = material.emissiveMap;\n        uniforms.bumpMap.value = material.bumpMap;\n        uniforms.normalMap.value = material.normalMap;\n\n        uniforms.displacementMap.value = material.displacementMap;\n        uniforms.displacementScale.value = material.displacementScale;\n        uniforms.displacementBias.value = material.displacementBias;\n\n        if (uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined) {\n\n          defines.USE_GLOSSINESSMAP = '';\n          // set USE_ROUGHNESSMAP to enable vUv\n          defines.USE_ROUGHNESSMAP = '';\n\n        }\n\n        if (uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined) {\n\n          delete defines.USE_GLOSSINESSMAP;\n          delete defines.USE_ROUGHNESSMAP;\n\n        }\n\n      }\n\n    };\n\n  }\n\n  /*********************************/\n  /********** INTERPOLATION ********/\n  /*********************************/\n\n  // Spline Interpolation\n  // Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n  function GLTFCubicSplineInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n\n    THREE.Interpolant.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n\n  }\n\n  GLTFCubicSplineInterpolant.prototype = Object.create(THREE.Interpolant.prototype);\n  GLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n  GLTFCubicSplineInterpolant.prototype.copySampleValue_ = function (index) {\n\n    // Copies a sample value to the result buffer. See description of glTF\n    // CUBICSPLINE values layout in interpolate_() function below.\n\n    var result = this.resultBuffer,\n      values = this.sampleValues,\n      valueSize = this.valueSize,\n      offset = index * valueSize * 3 + valueSize;\n\n    for (var i = 0; i !== valueSize; i++) {\n\n      result[i] = values[offset + i];\n\n    }\n\n    return result;\n\n  };\n\n  GLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n  GLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n  GLTFCubicSplineInterpolant.prototype.interpolate_ = function (i1, t0, t, t1) {\n\n    var result = this.resultBuffer;\n    var values = this.sampleValues;\n    var stride = this.valueSize;\n\n    var stride2 = stride * 2;\n    var stride3 = stride * 3;\n\n    var td = t1 - t0;\n\n    var p = (t - t0) / td;\n    var pp = p * p;\n    var ppp = pp * p;\n\n    var offset1 = i1 * stride3;\n    var offset0 = offset1 - stride3;\n\n    var s2 = - 2 * ppp + 3 * pp;\n    var s3 = ppp - pp;\n    var s0 = 1 - s2;\n    var s1 = s3 - pp + p;\n\n    // Layout of keyframe output values for CUBICSPLINE animations:\n    //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n    for (var i = 0; i !== stride; i++) {\n\n      var p0 = values[offset0 + i + stride]; // splineVertex_k\n      var m0 = values[offset0 + i + stride2] * td; // outTangent_k * (t_k+1 - t_k)\n      var p1 = values[offset1 + i + stride]; // splineVertex_k+1\n      var m1 = values[offset1 + i] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n      result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n    }\n\n    return result;\n\n  };\n\n  /*********************************/\n  /********** INTERNALS ************/\n  /*********************************/\n\n  /* CONSTANTS */\n\n  var WEBGL_CONSTANTS = {\n    FLOAT: 5126,\n    //FLOAT_MAT2: 35674,\n    FLOAT_MAT3: 35675,\n    FLOAT_MAT4: 35676,\n    FLOAT_VEC2: 35664,\n    FLOAT_VEC3: 35665,\n    FLOAT_VEC4: 35666,\n    LINEAR: 9729,\n    REPEAT: 10497,\n    SAMPLER_2D: 35678,\n    POINTS: 0,\n    LINES: 1,\n    LINE_LOOP: 2,\n    LINE_STRIP: 3,\n    TRIANGLES: 4,\n    TRIANGLE_STRIP: 5,\n    TRIANGLE_FAN: 6,\n    UNSIGNED_BYTE: 5121,\n    UNSIGNED_SHORT: 5123\n  };\n\n  var WEBGL_COMPONENT_TYPES = {\n    5120: Int8Array,\n    5121: Uint8Array,\n    5122: Int16Array,\n    5123: Uint16Array,\n    5125: Uint32Array,\n    5126: Float32Array\n  };\n\n  var WEBGL_FILTERS = {\n    9728: THREE.NearestFilter,\n    9729: THREE.LinearFilter,\n    9984: THREE.NearestMipmapNearestFilter,\n    9985: THREE.LinearMipmapNearestFilter,\n    9986: THREE.NearestMipmapLinearFilter,\n    9987: THREE.LinearMipmapLinearFilter\n  };\n\n  var WEBGL_WRAPPINGS = {\n    33071: THREE.ClampToEdgeWrapping,\n    33648: THREE.MirroredRepeatWrapping,\n    10497: THREE.RepeatWrapping\n  };\n\n  var WEBGL_TYPE_SIZES = {\n    'SCALAR': 1,\n    'VEC2': 2,\n    'VEC3': 3,\n    'VEC4': 4,\n    'MAT2': 4,\n    'MAT3': 9,\n    'MAT4': 16\n  };\n\n  var ATTRIBUTES = {\n    POSITION: 'position',\n    NORMAL: 'normal',\n    TANGENT: 'tangent',\n    TEXCOORD_0: 'uv',\n    TEXCOORD_1: 'uv2',\n    COLOR_0: 'color',\n    WEIGHTS_0: 'skinWeight',\n    JOINTS_0: 'skinIndex',\n  };\n\n  var PATH_PROPERTIES = {\n    scale: 'scale',\n    translation: 'position',\n    rotation: 'quaternion',\n    weights: 'morphTargetInfluences'\n  };\n\n  var INTERPOLATION = {\n    CUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n    // keyframe track will be initialized with a default interpolation type, then modified.\n    LINEAR: THREE.InterpolateLinear,\n    STEP: THREE.InterpolateDiscrete\n  };\n\n  var ALPHA_MODES = {\n    OPAQUE: 'OPAQUE',\n    MASK: 'MASK',\n    BLEND: 'BLEND'\n  };\n\n  var MIME_TYPE_FORMATS = {\n    'image/png': THREE.RGBAFormat,\n    'image/jpeg': THREE.RGBFormat\n  };\n\n  /* UTILITY FUNCTIONS */\n\n  function resolveURL(url, path) {\n\n    // Invalid URL\n    if (typeof url !== 'string' || url === '') return '';\n\n    // Host Relative URL\n    if (/^https?:\\/\\//i.test(path) && /^\\//.test(url)) {\n\n      path = path.replace(/(^https?:\\/\\/[^\\/]+).*/i, '$1');\n\n    }\n\n    // Absolute URL http://,https://,//\n    if (/^(https?:)?\\/\\//i.test(url)) return url;\n\n    // Data URI\n    if (/^data:.*,.*$/i.test(url)) return url;\n\n    // Blob URL\n    if (/^blob:.*$/i.test(url)) return url;\n\n    // Relative URL\n    return path + url;\n\n  }\n\n  var defaultMaterial;\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n  function createDefaultMaterial() {\n\n    defaultMaterial = defaultMaterial || new THREE.MeshStandardMaterial({\n      color: 0xFFFFFF,\n      emissive: 0x000000,\n      metalness: 1,\n      roughness: 1,\n      transparent: false,\n      depthTest: true,\n      side: THREE.FrontSide\n    });\n\n    return defaultMaterial;\n\n  }\n\n  function addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n\n    // Add unknown glTF extensions to an object's userData.\n\n    for (var name in objectDef.extensions) {\n\n      if (knownExtensions[name] === undefined) {\n\n        object.userData.gltfExtensions = object.userData.gltfExtensions || {};\n        object.userData.gltfExtensions[name] = objectDef.extensions[name];\n\n      }\n\n    }\n\n  }\n\n\t/**\n\t * @param {THREE.Object3D|THREE.Material|THREE.BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n  function assignExtrasToUserData(object, gltfDef) {\n\n    if (gltfDef.extras !== undefined) {\n\n      if (typeof gltfDef.extras === 'object') {\n\n        Object.assign(object.userData, gltfDef.extras);\n\n      } else {\n\n        console.warn('THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras);\n\n      }\n\n    }\n\n  }\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {THREE.BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<THREE.BufferGeometry>}\n\t */\n  function addMorphTargets(geometry, targets, parser) {\n\n    var hasMorphPosition = false;\n    var hasMorphNormal = false;\n\n    for (var i = 0, il = targets.length; i < il; i++) {\n\n      var target = targets[i];\n\n      if (target.POSITION !== undefined) hasMorphPosition = true;\n      if (target.NORMAL !== undefined) hasMorphNormal = true;\n\n      if (hasMorphPosition && hasMorphNormal) break;\n\n    }\n\n    if (!hasMorphPosition && !hasMorphNormal) return Promise.resolve(geometry);\n\n    var pendingPositionAccessors = [];\n    var pendingNormalAccessors = [];\n\n    for (var i = 0, il = targets.length; i < il; i++) {\n\n      var target = targets[i];\n\n      if (hasMorphPosition) {\n\n        var pendingAccessor = target.POSITION !== undefined\n          ? parser.getDependency('accessor', target.POSITION)\n          : geometry.attributes.position;\n\n        pendingPositionAccessors.push(pendingAccessor);\n\n      }\n\n      if (hasMorphNormal) {\n\n        var pendingAccessor = target.NORMAL !== undefined\n          ? parser.getDependency('accessor', target.NORMAL)\n          : geometry.attributes.normal;\n\n        pendingNormalAccessors.push(pendingAccessor);\n\n      }\n\n    }\n\n    return Promise.all([\n      Promise.all(pendingPositionAccessors),\n      Promise.all(pendingNormalAccessors)\n    ]).then(function (accessors) {\n\n      var morphPositions = accessors[0];\n      var morphNormals = accessors[1];\n\n      // Clone morph target accessors before modifying them.\n\n      for (var i = 0, il = morphPositions.length; i < il; i++) {\n\n        if (geometry.attributes.position === morphPositions[i]) continue;\n\n        morphPositions[i] = cloneBufferAttribute(morphPositions[i]);\n\n      }\n\n      for (var i = 0, il = morphNormals.length; i < il; i++) {\n\n        if (geometry.attributes.normal === morphNormals[i]) continue;\n\n        morphNormals[i] = cloneBufferAttribute(morphNormals[i]);\n\n      }\n\n      for (var i = 0, il = targets.length; i < il; i++) {\n\n        var target = targets[i];\n        var attributeName = 'morphTarget' + i;\n\n        if (hasMorphPosition) {\n\n          // Three.js morph position is absolute value. The formula is\n          //   basePosition\n          //     + weight0 * ( morphPosition0 - basePosition )\n          //     + weight1 * ( morphPosition1 - basePosition )\n          //     ...\n          // while the glTF one is relative\n          //   basePosition\n          //     + weight0 * glTFmorphPosition0\n          //     + weight1 * glTFmorphPosition1\n          //     ...\n          // then we need to convert from relative to absolute here.\n\n          if (target.POSITION !== undefined) {\n\n            var positionAttribute = morphPositions[i];\n            positionAttribute.name = attributeName;\n\n            var position = geometry.attributes.position;\n\n            for (var j = 0, jl = positionAttribute.count; j < jl; j++) {\n\n              positionAttribute.setXYZ(\n                j,\n                positionAttribute.getX(j) + position.getX(j),\n                positionAttribute.getY(j) + position.getY(j),\n                positionAttribute.getZ(j) + position.getZ(j)\n              );\n\n            }\n\n          }\n\n        }\n\n        if (hasMorphNormal) {\n\n          // see target.POSITION's comment\n\n          if (target.NORMAL !== undefined) {\n\n            var normalAttribute = morphNormals[i];\n            normalAttribute.name = attributeName;\n\n            var normal = geometry.attributes.normal;\n\n            for (var j = 0, jl = normalAttribute.count; j < jl; j++) {\n\n              normalAttribute.setXYZ(\n                j,\n                normalAttribute.getX(j) + normal.getX(j),\n                normalAttribute.getY(j) + normal.getY(j),\n                normalAttribute.getZ(j) + normal.getZ(j)\n              );\n\n            }\n\n          }\n\n        }\n\n      }\n\n      if (hasMorphPosition) geometry.morphAttributes.position = morphPositions;\n      if (hasMorphNormal) geometry.morphAttributes.normal = morphNormals;\n\n      return geometry;\n\n    });\n\n  }\n\n\t/**\n\t * @param {THREE.Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n  function updateMorphTargets(mesh, meshDef) {\n\n    mesh.updateMorphTargets();\n\n    if (meshDef.weights !== undefined) {\n\n      for (var i = 0, il = meshDef.weights.length; i < il; i++) {\n\n        mesh.morphTargetInfluences[i] = meshDef.weights[i];\n\n      }\n\n    }\n\n    // .extras has user-defined data, so check that .extras.targetNames is an array.\n    if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n\n      var targetNames = meshDef.extras.targetNames;\n\n      if (mesh.morphTargetInfluences.length === targetNames.length) {\n\n        mesh.morphTargetDictionary = {};\n\n        for (var i = 0, il = targetNames.length; i < il; i++) {\n\n          mesh.morphTargetDictionary[targetNames[i]] = i;\n\n        }\n\n      } else {\n\n        console.warn('THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.');\n\n      }\n\n    }\n\n  }\n\n  function createPrimitiveKey(primitiveDef) {\n\n    var dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n    var geometryKey;\n\n    if (dracoExtension) {\n\n      geometryKey = 'draco:' + dracoExtension.bufferView\n        + ':' + dracoExtension.indices\n        + ':' + createAttributesKey(dracoExtension.attributes);\n\n    } else {\n\n      geometryKey = primitiveDef.indices + ':' + createAttributesKey(primitiveDef.attributes) + ':' + primitiveDef.mode;\n\n    }\n\n    return geometryKey;\n\n  }\n\n  function createAttributesKey(attributes) {\n\n    var attributesKey = '';\n\n    var keys = Object.keys(attributes).sort();\n\n    for (var i = 0, il = keys.length; i < il; i++) {\n\n      attributesKey += keys[i] + ':' + attributes[keys[i]] + ';';\n\n    }\n\n    return attributesKey;\n\n  }\n\n  function cloneBufferAttribute(attribute) {\n\n    if (attribute.isInterleavedBufferAttribute) {\n\n      var count = attribute.count;\n      var itemSize = attribute.itemSize;\n      var array = attribute.array.slice(0, count * itemSize);\n\n      for (var i = 0, j = 0; i < count; ++i) {\n\n        array[j++] = attribute.getX(i);\n        if (itemSize >= 2) array[j++] = attribute.getY(i);\n        if (itemSize >= 3) array[j++] = attribute.getZ(i);\n        if (itemSize >= 4) array[j++] = attribute.getW(i);\n\n      }\n\n      return new THREE.BufferAttribute(array, itemSize, attribute.normalized);\n\n    }\n\n    return attribute.clone();\n\n  }\n\n  /* GLTF PARSER */\n\n  function GLTFParser(json, extensions, options) {\n\n    this.json = json || {};\n    this.extensions = extensions || {};\n    this.options = options || {};\n\n    // loader object cache\n    this.cache = new GLTFRegistry();\n\n    // BufferGeometry caching\n    this.primitiveCache = {};\n\n    this.textureLoader = new THREE.TextureLoader(this.options.manager);\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin);\n\n    this.fileLoader = new THREE.FileLoader(this.options.manager);\n    this.fileLoader.setResponseType('arraybuffer');\n\n    if (this.options.crossOrigin === 'use-credentials') {\n\n      this.fileLoader.setWithCredentials(true);\n\n    }\n\n  }\n\n  GLTFParser.prototype.parse = function (onLoad, onError) {\n\n    var parser = this;\n    var json = this.json;\n    var extensions = this.extensions;\n\n    // Clear the loader cache\n    this.cache.removeAll();\n\n    // Mark the special nodes/meshes in json for efficient parse\n    this.markDefs();\n\n    Promise.all([\n\n      this.getDependencies('scene'),\n      this.getDependencies('animation'),\n      this.getDependencies('camera'),\n\n    ]).then(function (dependencies) {\n\n      var result = {\n        scene: dependencies[0][json.scene || 0],\n        scenes: dependencies[0],\n        animations: dependencies[1],\n        cameras: dependencies[2],\n        asset: json.asset,\n        parser: parser,\n        userData: {}\n      };\n\n      addUnknownExtensionsToUserData(extensions, result, json);\n\n      assignExtrasToUserData(result, json);\n\n      onLoad(result);\n\n    }).catch(onError);\n\n  };\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n  GLTFParser.prototype.markDefs = function () {\n\n    var nodeDefs = this.json.nodes || [];\n    var skinDefs = this.json.skins || [];\n    var meshDefs = this.json.meshes || [];\n\n    var meshReferences = {};\n    var meshUses = {};\n\n    // Nothing in the node definition indicates whether it is a Bone or an\n    // Object3D. Use the skins' joint references to mark bones.\n    for (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n\n      var joints = skinDefs[skinIndex].joints;\n\n      for (var i = 0, il = joints.length; i < il; i++) {\n\n        nodeDefs[joints[i]].isBone = true;\n\n      }\n\n    }\n\n    // Meshes can (and should) be reused by multiple nodes in a glTF asset. To\n    // avoid having more than one THREE.Mesh with the same name, count\n    // references and rename instances below.\n    //\n    // Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n    for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n\n      var nodeDef = nodeDefs[nodeIndex];\n\n      if (nodeDef.mesh !== undefined) {\n\n        if (meshReferences[nodeDef.mesh] === undefined) {\n\n          meshReferences[nodeDef.mesh] = meshUses[nodeDef.mesh] = 0;\n\n        }\n\n        meshReferences[nodeDef.mesh]++;\n\n        // Nothing in the mesh definition indicates whether it is\n        // a SkinnedMesh or Mesh. Use the node's mesh reference\n        // to mark SkinnedMesh if node has skin.\n        if (nodeDef.skin !== undefined) {\n\n          meshDefs[nodeDef.mesh].isSkinnedMesh = true;\n\n        }\n\n      }\n\n    }\n\n    this.json.meshReferences = meshReferences;\n    this.json.meshUses = meshUses;\n\n  };\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<THREE.Object3D|THREE.Material|THREE.Texture|THREE.AnimationClip|ArrayBuffer|Object>}\n\t */\n  GLTFParser.prototype.getDependency = function (type, index) {\n\n    var cacheKey = type + ':' + index;\n    var dependency = this.cache.get(cacheKey);\n\n    if (!dependency) {\n\n      switch (type) {\n\n        case 'scene':\n          dependency = this.loadScene(index);\n          break;\n\n        case 'node':\n          dependency = this.loadNode(index);\n          break;\n\n        case 'mesh':\n          dependency = this.loadMesh(index);\n          break;\n\n        case 'accessor':\n          dependency = this.loadAccessor(index);\n          break;\n\n        case 'bufferView':\n          dependency = this.loadBufferView(index);\n          break;\n\n        case 'buffer':\n          dependency = this.loadBuffer(index);\n          break;\n\n        case 'material':\n          dependency = this.loadMaterial(index);\n          break;\n\n        case 'texture':\n          dependency = this.loadTexture(index);\n          break;\n\n        case 'skin':\n          dependency = this.loadSkin(index);\n          break;\n\n        case 'animation':\n          dependency = this.loadAnimation(index);\n          break;\n\n        case 'camera':\n          dependency = this.loadCamera(index);\n          break;\n\n        case 'light':\n          dependency = this.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].loadLight(index);\n          break;\n\n        default:\n          throw new Error('Unknown type: ' + type);\n\n      }\n\n      this.cache.add(cacheKey, dependency);\n\n    }\n\n    return dependency;\n\n  };\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n  GLTFParser.prototype.getDependencies = function (type) {\n\n    var dependencies = this.cache.get(type);\n\n    if (!dependencies) {\n\n      var parser = this;\n      var defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n\n      dependencies = Promise.all(defs.map(function (def, index) {\n\n        return parser.getDependency(type, index);\n\n      }));\n\n      this.cache.add(type, dependencies);\n\n    }\n\n    return dependencies;\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n  GLTFParser.prototype.loadBuffer = function (bufferIndex) {\n\n    var bufferDef = this.json.buffers[bufferIndex];\n    var loader = this.fileLoader;\n\n    if (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n\n      throw new Error('THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n\n    }\n\n    // If present, GLB container is required to be the first buffer.\n    if (bufferDef.uri === undefined && bufferIndex === 0) {\n\n      return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n\n    }\n\n    var options = this.options;\n\n    return new Promise(function (resolve, reject) {\n\n      loader.load(resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n\n        reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n\n      });\n\n    });\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n  GLTFParser.prototype.loadBufferView = function (bufferViewIndex) {\n\n    var bufferViewDef = this.json.bufferViews[bufferViewIndex];\n\n    return this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n\n      var byteLength = bufferViewDef.byteLength || 0;\n      var byteOffset = bufferViewDef.byteOffset || 0;\n      return buffer.slice(byteOffset, byteOffset + byteLength);\n\n    });\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<THREE.BufferAttribute|THREE.InterleavedBufferAttribute>}\n\t */\n  GLTFParser.prototype.loadAccessor = function (accessorIndex) {\n\n    var parser = this;\n    var json = this.json;\n\n    var accessorDef = this.json.accessors[accessorIndex];\n\n    if (accessorDef.bufferView === undefined && accessorDef.sparse === undefined) {\n\n      // Ignore empty accessors, which may be used to declare runtime\n      // information about attributes coming from another source (e.g. Draco\n      // compression extension).\n      return Promise.resolve(null);\n\n    }\n\n    var pendingBufferViews = [];\n\n    if (accessorDef.bufferView !== undefined) {\n\n      pendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n\n    } else {\n\n      pendingBufferViews.push(null);\n\n    }\n\n    if (accessorDef.sparse !== undefined) {\n\n      pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.indices.bufferView));\n      pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.values.bufferView));\n\n    }\n\n    return Promise.all(pendingBufferViews).then(function (bufferViews) {\n\n      var bufferView = bufferViews[0];\n\n      var itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n      var TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n\n      // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n      var elementBytes = TypedArray.BYTES_PER_ELEMENT;\n      var itemBytes = elementBytes * itemSize;\n      var byteOffset = accessorDef.byteOffset || 0;\n      var byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[accessorDef.bufferView].byteStride : undefined;\n      var normalized = accessorDef.normalized === true;\n      var array, bufferAttribute;\n\n      // The buffer is not interleaved if the stride is the item size in bytes.\n      if (byteStride && byteStride !== itemBytes) {\n\n        // Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n        // This makes sure that IBA.count reflects accessor.count properly\n        var ibSlice = Math.floor(byteOffset / byteStride);\n        var ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n        var ib = parser.cache.get(ibCacheKey);\n\n        if (!ib) {\n\n          array = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes);\n\n          // Integer parameters to IB/IBA are in array elements, not bytes.\n          ib = new THREE.InterleavedBuffer(array, byteStride / elementBytes);\n\n          parser.cache.add(ibCacheKey, ib);\n\n        }\n\n        bufferAttribute = new THREE.InterleavedBufferAttribute(ib, itemSize, (byteOffset % byteStride) / elementBytes, normalized);\n\n      } else {\n\n        if (bufferView === null) {\n\n          array = new TypedArray(accessorDef.count * itemSize);\n\n        } else {\n\n          array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n\n        }\n\n        bufferAttribute = new THREE.BufferAttribute(array, itemSize, normalized);\n\n      }\n\n      // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n      if (accessorDef.sparse !== undefined) {\n\n        var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n        var TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n\n        var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n        var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n        var sparseIndices = new TypedArrayIndices(bufferViews[1], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices);\n        var sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n\n        if (bufferView !== null) {\n\n          // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n          bufferAttribute = new THREE.BufferAttribute(bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized);\n\n        }\n\n        for (var i = 0, il = sparseIndices.length; i < il; i++) {\n\n          var index = sparseIndices[i];\n\n          bufferAttribute.setX(index, sparseValues[i * itemSize]);\n          if (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n          if (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n          if (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n          if (itemSize >= 5) throw new Error('THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n\n        }\n\n      }\n\n      return bufferAttribute;\n\n    });\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n  GLTFParser.prototype.loadTexture = function (textureIndex) {\n\n    var parser = this;\n    var json = this.json;\n    var options = this.options;\n    var textureLoader = this.textureLoader;\n\n    var URL = window.URL || window.webkitURL;\n\n    var textureDef = json.textures[textureIndex];\n\n    var textureExtensions = textureDef.extensions || {};\n\n    var source;\n\n    if (textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]) {\n\n      source = json.images[textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS].source];\n\n    } else {\n\n      source = json.images[textureDef.source];\n\n    }\n\n    var sourceURI = source.uri;\n    var isObjectURL = false;\n\n    if (source.bufferView !== undefined) {\n\n      // Load binary image data from bufferView, if provided.\n\n      sourceURI = parser.getDependency('bufferView', source.bufferView).then(function (bufferView) {\n\n        isObjectURL = true;\n        var blob = new Blob([bufferView], { type: source.mimeType });\n        sourceURI = URL.createObjectURL(blob);\n        return sourceURI;\n\n      });\n\n    }\n\n    return Promise.resolve(sourceURI).then(function (sourceURI) {\n\n      // Load Texture resource.\n\n      var loader = options.manager.getHandler(sourceURI);\n\n      if (!loader) {\n\n        loader = textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]\n          ? parser.extensions[EXTENSIONS.MSFT_TEXTURE_DDS].ddsLoader\n          : textureLoader;\n\n      }\n\n      return new Promise(function (resolve, reject) {\n\n        loader.load(resolveURL(sourceURI, options.path), resolve, undefined, reject);\n\n      });\n\n    }).then(function (texture) {\n\n      // Clean up resources and configure Texture.\n\n      if (isObjectURL === true) {\n\n        URL.revokeObjectURL(sourceURI);\n\n      }\n\n      texture.flipY = false;\n\n      if (textureDef.name !== undefined) texture.name = textureDef.name;\n\n      // Ignore unknown mime types, like DDS files.\n      if (source.mimeType in MIME_TYPE_FORMATS) {\n\n        texture.format = MIME_TYPE_FORMATS[source.mimeType];\n\n      }\n\n      var samplers = json.samplers || {};\n      var sampler = samplers[textureDef.sampler] || {};\n\n      texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || THREE.LinearFilter;\n      texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || THREE.LinearMipmapLinearFilter;\n      texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || THREE.RepeatWrapping;\n      texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || THREE.RepeatWrapping;\n\n      return texture;\n\n    });\n\n  };\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n  GLTFParser.prototype.assignTexture = function (materialParams, mapName, mapDef) {\n\n    var parser = this;\n\n    return this.getDependency('texture', mapDef.index).then(function (texture) {\n\n      if (!texture.isCompressedTexture) {\n\n        switch (mapName) {\n\n          case 'aoMap':\n          case 'emissiveMap':\n          case 'metalnessMap':\n          case 'normalMap':\n          case 'roughnessMap':\n            texture.format = THREE.RGBFormat;\n            break;\n\n        }\n\n      }\n\n      if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n\n        var transform = mapDef.extensions !== undefined ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : undefined;\n\n        if (transform) {\n\n          texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\n\n        }\n\n      }\n\n      materialParams[mapName] = texture;\n\n    });\n\n  };\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accomodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {THREE.Object3D} mesh Mesh, Line, or Points instance.\n\t */\n  GLTFParser.prototype.assignFinalMaterial = function (mesh) {\n\n    var geometry = mesh.geometry;\n    var material = mesh.material;\n    var extensions = this.extensions;\n\n    var useVertexTangents = geometry.attributes.tangent !== undefined;\n    var useVertexColors = geometry.attributes.color !== undefined;\n    var useFlatShading = geometry.attributes.normal === undefined;\n    var useSkinning = mesh.isSkinnedMesh === true;\n    var useMorphTargets = Object.keys(geometry.morphAttributes).length > 0;\n    var useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n    if (mesh.isPoints) {\n\n      var cacheKey = 'PointsMaterial:' + material.uuid;\n\n      var pointsMaterial = this.cache.get(cacheKey);\n\n      if (!pointsMaterial) {\n\n        pointsMaterial = new THREE.PointsMaterial();\n        THREE.Material.prototype.copy.call(pointsMaterial, material);\n        pointsMaterial.color.copy(material.color);\n        pointsMaterial.map = material.map;\n        pointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n        this.cache.add(cacheKey, pointsMaterial);\n\n      }\n\n      material = pointsMaterial;\n\n    } else if (mesh.isLine) {\n\n      var cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n      var lineMaterial = this.cache.get(cacheKey);\n\n      if (!lineMaterial) {\n\n        lineMaterial = new THREE.LineBasicMaterial();\n        THREE.Material.prototype.copy.call(lineMaterial, material);\n        lineMaterial.color.copy(material.color);\n\n        this.cache.add(cacheKey, lineMaterial);\n\n      }\n\n      material = lineMaterial;\n\n    }\n\n    // Clone the material if it will be modified\n    if (useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets) {\n\n      var cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n      if (material.isGLTFSpecularGlossinessMaterial) cacheKey += 'specular-glossiness:';\n      if (useSkinning) cacheKey += 'skinning:';\n      if (useVertexTangents) cacheKey += 'vertex-tangents:';\n      if (useVertexColors) cacheKey += 'vertex-colors:';\n      if (useFlatShading) cacheKey += 'flat-shading:';\n      if (useMorphTargets) cacheKey += 'morph-targets:';\n      if (useMorphNormals) cacheKey += 'morph-normals:';\n\n      var cachedMaterial = this.cache.get(cacheKey);\n\n      if (!cachedMaterial) {\n\n        cachedMaterial = material.isGLTFSpecularGlossinessMaterial\n          ? extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(material)\n          : material.clone();\n\n        if (useSkinning) cachedMaterial.skinning = true;\n        if (useVertexTangents) cachedMaterial.vertexTangents = true;\n        if (useVertexColors) cachedMaterial.vertexColors = THREE.VertexColors;\n        if (useFlatShading) cachedMaterial.flatShading = true;\n        if (useMorphTargets) cachedMaterial.morphTargets = true;\n        if (useMorphNormals) cachedMaterial.morphNormals = true;\n\n        this.cache.add(cacheKey, cachedMaterial);\n\n      }\n\n      material = cachedMaterial;\n\n    }\n\n    // workarounds for mesh and geometry\n\n    if (material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined) {\n\n      console.log('THREE.GLTFLoader: Duplicating UVs to support aoMap.');\n      geometry.addAttribute('uv2', new THREE.BufferAttribute(geometry.attributes.uv.array, 2));\n\n    }\n\n    if (material.isGLTFSpecularGlossinessMaterial) {\n\n      // for GLTFSpecularGlossinessMaterial(ShaderMaterial) uniforms runtime update\n      mesh.onBeforeRender = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms;\n\n    }\n\n    mesh.material = material;\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<THREE.Material>}\n\t */\n  GLTFParser.prototype.loadMaterial = function (materialIndex) {\n\n    var parser = this;\n    var json = this.json;\n    var extensions = this.extensions;\n    var materialDef = json.materials[materialIndex];\n\n    var materialType;\n    var materialParams = {};\n    var materialExtensions = materialDef.extensions || {};\n\n    var pending = [];\n\n    if (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n\n      var sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n      materialType = sgExtension.getMaterialType();\n      pending.push(sgExtension.extendParams(materialParams, materialDef, parser));\n\n    } else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n\n      var kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n      materialType = kmuExtension.getMaterialType();\n      pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n\n    } else {\n\n      // Specification:\n      // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n      materialType = THREE.MeshStandardMaterial;\n\n      var metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n      materialParams.color = new THREE.Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n\n        var array = metallicRoughness.baseColorFactor;\n\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n\n      }\n\n      if (metallicRoughness.baseColorTexture !== undefined) {\n\n        pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n\n      }\n\n      materialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n      materialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n      if (metallicRoughness.metallicRoughnessTexture !== undefined) {\n\n        pending.push(parser.assignTexture(materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture));\n        pending.push(parser.assignTexture(materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture));\n\n      }\n\n    }\n\n    if (materialDef.doubleSided === true) {\n\n      materialParams.side = THREE.DoubleSide;\n\n    }\n\n    var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n    if (alphaMode === ALPHA_MODES.BLEND) {\n\n      materialParams.transparent = true;\n\n    } else {\n\n      materialParams.transparent = false;\n\n      if (alphaMode === ALPHA_MODES.MASK) {\n\n        materialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n      }\n\n    }\n\n    if (materialDef.normalTexture !== undefined && materialType !== THREE.MeshBasicMaterial) {\n\n      pending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture));\n\n      materialParams.normalScale = new THREE.Vector2(1, 1);\n\n      if (materialDef.normalTexture.scale !== undefined) {\n\n        materialParams.normalScale.set(materialDef.normalTexture.scale, materialDef.normalTexture.scale);\n\n      }\n\n    }\n\n    if (materialDef.occlusionTexture !== undefined && materialType !== THREE.MeshBasicMaterial) {\n\n      pending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture));\n\n      if (materialDef.occlusionTexture.strength !== undefined) {\n\n        materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n      }\n\n    }\n\n    if (materialDef.emissiveFactor !== undefined && materialType !== THREE.MeshBasicMaterial) {\n\n      materialParams.emissive = new THREE.Color().fromArray(materialDef.emissiveFactor);\n\n    }\n\n    if (materialDef.emissiveTexture !== undefined && materialType !== THREE.MeshBasicMaterial) {\n\n      pending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture));\n\n    }\n\n    return Promise.all(pending).then(function () {\n\n      var material;\n\n      if (materialType === THREE.ShaderMaterial) {\n\n        material = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(materialParams);\n\n      } else {\n\n        material = new materialType(materialParams);\n\n      }\n\n      if (materialDef.name !== undefined) material.name = materialDef.name;\n\n      // baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n      if (material.map) material.map.encoding = THREE.sRGBEncoding;\n      if (material.emissiveMap) material.emissiveMap.encoding = THREE.sRGBEncoding;\n      if (material.specularMap) material.specularMap.encoding = THREE.sRGBEncoding;\n\n      assignExtrasToUserData(material, materialDef);\n\n      if (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef);\n\n      return material;\n\n    });\n\n  };\n\n\t/**\n\t * @param {THREE.BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<THREE.BufferGeometry>}\n\t */\n  function addPrimitiveAttributes(geometry, primitiveDef, parser) {\n\n    var attributes = primitiveDef.attributes;\n\n    var pending = [];\n\n    function assignAttributeAccessor(accessorIndex, attributeName) {\n\n      return parser.getDependency('accessor', accessorIndex)\n        .then(function (accessor) {\n\n          geometry.addAttribute(attributeName, accessor);\n\n        });\n\n    }\n\n    for (var gltfAttributeName in attributes) {\n\n      var threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase();\n\n      // Skip attributes already provided by e.g. Draco extension.\n      if (threeAttributeName in geometry.attributes) continue;\n\n      pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n\n    }\n\n    if (primitiveDef.indices !== undefined && !geometry.index) {\n\n      var accessor = parser.getDependency('accessor', primitiveDef.indices).then(function (accessor) {\n\n        geometry.setIndex(accessor);\n\n      });\n\n      pending.push(accessor);\n\n    }\n\n    assignExtrasToUserData(geometry, primitiveDef);\n\n    return Promise.all(pending).then(function () {\n\n      return primitiveDef.targets !== undefined\n        ? addMorphTargets(geometry, primitiveDef.targets, parser)\n        : geometry;\n\n    });\n\n  }\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<THREE.BufferGeometry>>}\n\t */\n  GLTFParser.prototype.loadGeometries = function (primitives) {\n\n    var parser = this;\n    var extensions = this.extensions;\n    var cache = this.primitiveCache;\n\n    function createDracoPrimitive(primitive) {\n\n      return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]\n        .decodePrimitive(primitive, parser)\n        .then(function (geometry) {\n\n          return addPrimitiveAttributes(geometry, primitive, parser);\n\n        });\n\n    }\n\n    var pending = [];\n\n    for (var i = 0, il = primitives.length; i < il; i++) {\n\n      var primitive = primitives[i];\n      var cacheKey = createPrimitiveKey(primitive);\n\n      // See if we've already created this geometry\n      var cached = cache[cacheKey];\n\n      if (cached) {\n\n        // Use the cached geometry if it exists\n        pending.push(cached.promise);\n\n      } else {\n\n        var geometryPromise;\n\n        if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n\n          // Use DRACO geometry if available\n          geometryPromise = createDracoPrimitive(primitive);\n\n        } else {\n\n          // Otherwise create a new geometry\n          geometryPromise = addPrimitiveAttributes(new THREE.BufferGeometry(), primitive, parser);\n\n        }\n\n        // Cache this geometry\n        cache[cacheKey] = { primitive: primitive, promise: geometryPromise };\n\n        pending.push(geometryPromise);\n\n      }\n\n    }\n\n    return Promise.all(pending);\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<THREE.Group|THREE.Mesh|THREE.SkinnedMesh>}\n\t */\n  GLTFParser.prototype.loadMesh = function (meshIndex) {\n\n    var parser = this;\n    var json = this.json;\n\n    var meshDef = json.meshes[meshIndex];\n    var primitives = meshDef.primitives;\n\n    var pending = [];\n\n    for (var i = 0, il = primitives.length; i < il; i++) {\n\n      var material = primitives[i].material === undefined\n        ? createDefaultMaterial()\n        : this.getDependency('material', primitives[i].material);\n\n      pending.push(material);\n\n    }\n\n    return Promise.all(pending).then(function (originalMaterials) {\n\n      return parser.loadGeometries(primitives).then(function (geometries) {\n\n        var meshes = [];\n\n        for (var i = 0, il = geometries.length; i < il; i++) {\n\n          var geometry = geometries[i];\n          var primitive = primitives[i];\n\n          // 1. create Mesh\n\n          var mesh;\n\n          var material = originalMaterials[i];\n\n          if (primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n            primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n            primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n            primitive.mode === undefined) {\n\n            // .isSkinnedMesh isn't in glTF spec. See .markDefs()\n            mesh = meshDef.isSkinnedMesh === true\n              ? new THREE.SkinnedMesh(geometry, material)\n              : new THREE.Mesh(geometry, material);\n\n            if (mesh.isSkinnedMesh === true && !mesh.geometry.attributes.skinWeight.normalized) {\n\n              // we normalize floating point skin weight array to fix malformed assets (see #15319)\n              // it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n              mesh.normalizeSkinWeights();\n\n            }\n\n            if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n\n              mesh.drawMode = THREE.TriangleStripDrawMode;\n\n            } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n\n              mesh.drawMode = THREE.TriangleFanDrawMode;\n\n            }\n\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n\n            mesh = new THREE.LineSegments(geometry, material);\n\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n\n            mesh = new THREE.Line(geometry, material);\n\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n\n            mesh = new THREE.LineLoop(geometry, material);\n\n          } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n\n            mesh = new THREE.Points(geometry, material);\n\n          } else {\n\n            throw new Error('THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n\n          }\n\n          if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n\n            updateMorphTargets(mesh, meshDef);\n\n          }\n\n          mesh.name = meshDef.name || ('mesh_' + meshIndex);\n\n          if (geometries.length > 1) mesh.name += '_' + i;\n\n          assignExtrasToUserData(mesh, meshDef);\n\n          parser.assignFinalMaterial(mesh);\n\n          meshes.push(mesh);\n\n        }\n\n        if (meshes.length === 1) {\n\n          return meshes[0];\n\n        }\n\n        var group = new THREE.Group();\n\n        for (var i = 0, il = meshes.length; i < il; i++) {\n\n          group.add(meshes[i]);\n\n        }\n\n        return group;\n\n      });\n\n    });\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n  GLTFParser.prototype.loadCamera = function (cameraIndex) {\n\n    var camera;\n    var cameraDef = this.json.cameras[cameraIndex];\n    var params = cameraDef[cameraDef.type];\n\n    if (!params) {\n\n      console.warn('THREE.GLTFLoader: Missing camera parameters.');\n      return;\n\n    }\n\n    if (cameraDef.type === 'perspective') {\n\n      camera = new THREE.PerspectiveCamera(THREE.Math.radToDeg(params.yfov), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6);\n\n    } else if (cameraDef.type === 'orthographic') {\n\n      camera = new THREE.OrthographicCamera(params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar);\n\n    }\n\n    if (cameraDef.name !== undefined) camera.name = cameraDef.name;\n\n    assignExtrasToUserData(camera, cameraDef);\n\n    return Promise.resolve(camera);\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n  GLTFParser.prototype.loadSkin = function (skinIndex) {\n\n    var skinDef = this.json.skins[skinIndex];\n\n    var skinEntry = { joints: skinDef.joints };\n\n    if (skinDef.inverseBindMatrices === undefined) {\n\n      return Promise.resolve(skinEntry);\n\n    }\n\n    return this.getDependency('accessor', skinDef.inverseBindMatrices).then(function (accessor) {\n\n      skinEntry.inverseBindMatrices = accessor;\n\n      return skinEntry;\n\n    });\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<THREE.AnimationClip>}\n\t */\n  GLTFParser.prototype.loadAnimation = function (animationIndex) {\n\n    var json = this.json;\n\n    var animationDef = json.animations[animationIndex];\n\n    var pendingNodes = [];\n    var pendingInputAccessors = [];\n    var pendingOutputAccessors = [];\n    var pendingSamplers = [];\n    var pendingTargets = [];\n\n    for (var i = 0, il = animationDef.channels.length; i < il; i++) {\n\n      var channel = animationDef.channels[i];\n      var sampler = animationDef.samplers[channel.sampler];\n      var target = channel.target;\n      var name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n      var input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n      var output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n\n      pendingNodes.push(this.getDependency('node', name));\n      pendingInputAccessors.push(this.getDependency('accessor', input));\n      pendingOutputAccessors.push(this.getDependency('accessor', output));\n      pendingSamplers.push(sampler);\n      pendingTargets.push(target);\n\n    }\n\n    return Promise.all([\n\n      Promise.all(pendingNodes),\n      Promise.all(pendingInputAccessors),\n      Promise.all(pendingOutputAccessors),\n      Promise.all(pendingSamplers),\n      Promise.all(pendingTargets)\n\n    ]).then(function (dependencies) {\n\n      var nodes = dependencies[0];\n      var inputAccessors = dependencies[1];\n      var outputAccessors = dependencies[2];\n      var samplers = dependencies[3];\n      var targets = dependencies[4];\n\n      var tracks = [];\n\n      for (var i = 0, il = nodes.length; i < il; i++) {\n\n        var node = nodes[i];\n        var inputAccessor = inputAccessors[i];\n        var outputAccessor = outputAccessors[i];\n        var sampler = samplers[i];\n        var target = targets[i];\n\n        if (node === undefined) continue;\n\n        node.updateMatrix();\n        node.matrixAutoUpdate = true;\n\n        var TypedKeyframeTrack;\n\n        switch (PATH_PROPERTIES[target.path]) {\n\n          case PATH_PROPERTIES.weights:\n\n            TypedKeyframeTrack = THREE.NumberKeyframeTrack;\n            break;\n\n          case PATH_PROPERTIES.rotation:\n\n            TypedKeyframeTrack = THREE.QuaternionKeyframeTrack;\n            break;\n\n          case PATH_PROPERTIES.position:\n          case PATH_PROPERTIES.scale:\n          default:\n\n            TypedKeyframeTrack = THREE.VectorKeyframeTrack;\n            break;\n\n        }\n\n        var targetName = node.name ? node.name : node.uuid;\n\n        var interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : THREE.InterpolateLinear;\n\n        var targetNames = [];\n\n        if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n\n          // Node may be a THREE.Group (glTF mesh with several primitives) or a THREE.Mesh.\n          node.traverse(function (object) {\n\n            if (object.isMesh === true && object.morphTargetInfluences) {\n\n              targetNames.push(object.name ? object.name : object.uuid);\n\n            }\n\n          });\n\n        } else {\n\n          targetNames.push(targetName);\n\n        }\n\n        var outputArray = outputAccessor.array;\n\n        if (outputAccessor.normalized) {\n\n          var scale;\n\n          if (outputArray.constructor === Int8Array) {\n\n            scale = 1 / 127;\n\n          } else if (outputArray.constructor === Uint8Array) {\n\n            scale = 1 / 255;\n\n          } else if (outputArray.constructor == Int16Array) {\n\n            scale = 1 / 32767;\n\n          } else if (outputArray.constructor === Uint16Array) {\n\n            scale = 1 / 65535;\n\n          } else {\n\n            throw new Error('THREE.GLTFLoader: Unsupported output accessor component type.');\n\n          }\n\n          var scaled = new Float32Array(outputArray.length);\n\n          for (var j = 0, jl = outputArray.length; j < jl; j++) {\n\n            scaled[j] = outputArray[j] * scale;\n\n          }\n\n          outputArray = scaled;\n\n        }\n\n        for (var j = 0, jl = targetNames.length; j < jl; j++) {\n\n          var track = new TypedKeyframeTrack(\n            targetNames[j] + '.' + PATH_PROPERTIES[target.path],\n            inputAccessor.array,\n            outputArray,\n            interpolation\n          );\n\n          // Override interpolation with custom factory method.\n          if (sampler.interpolation === 'CUBICSPLINE') {\n\n            track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n\n              // A CUBICSPLINE keyframe in glTF has three output values for each input value,\n              // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n              // must be divided by three to get the interpolant's sampleSize argument.\n\n              return new GLTFCubicSplineInterpolant(this.times, this.values, this.getValueSize() / 3, result);\n\n            };\n\n            // Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n            track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n          }\n\n          tracks.push(track);\n\n        }\n\n      }\n\n      var name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;\n\n      return new THREE.AnimationClip(name, undefined, tracks);\n\n    });\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<THREE.Object3D>}\n\t */\n  GLTFParser.prototype.loadNode = function (nodeIndex) {\n\n    var json = this.json;\n    var extensions = this.extensions;\n    var parser = this;\n\n    var meshReferences = json.meshReferences;\n    var meshUses = json.meshUses;\n\n    var nodeDef = json.nodes[nodeIndex];\n\n    return (function () {\n\n      var pending = [];\n\n      if (nodeDef.mesh !== undefined) {\n\n        pending.push(parser.getDependency('mesh', nodeDef.mesh).then(function (mesh) {\n\n          var node;\n\n          if (meshReferences[nodeDef.mesh] > 1) {\n\n            var instanceNum = meshUses[nodeDef.mesh]++;\n\n            node = mesh.clone();\n            node.name += '_instance_' + instanceNum;\n\n            // onBeforeRender copy for Specular-Glossiness\n            node.onBeforeRender = mesh.onBeforeRender;\n\n            for (var i = 0, il = node.children.length; i < il; i++) {\n\n              node.children[i].name += '_instance_' + instanceNum;\n              node.children[i].onBeforeRender = mesh.children[i].onBeforeRender;\n\n            }\n\n          } else {\n\n            node = mesh;\n\n          }\n\n          // if weights are provided on the node, override weights on the mesh.\n          if (nodeDef.weights !== undefined) {\n\n            node.traverse(function (o) {\n\n              if (!o.isMesh) return;\n\n              for (var i = 0, il = nodeDef.weights.length; i < il; i++) {\n\n                o.morphTargetInfluences[i] = nodeDef.weights[i];\n\n              }\n\n            });\n\n          }\n\n          return node;\n\n        }));\n\n      }\n\n      if (nodeDef.camera !== undefined) {\n\n        pending.push(parser.getDependency('camera', nodeDef.camera));\n\n      }\n\n      if (nodeDef.extensions\n        && nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL]\n        && nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].light !== undefined) {\n\n        pending.push(parser.getDependency('light', nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].light));\n\n      }\n\n      return Promise.all(pending);\n\n    }()).then(function (objects) {\n\n      var node;\n\n      // .isBone isn't in glTF spec. See .markDefs\n      if (nodeDef.isBone === true) {\n\n        node = new THREE.Bone();\n\n      } else if (objects.length > 1) {\n\n        node = new THREE.Group();\n\n      } else if (objects.length === 1) {\n\n        node = objects[0];\n\n      } else {\n\n        node = new THREE.Object3D();\n\n      }\n\n      if (node !== objects[0]) {\n\n        for (var i = 0, il = objects.length; i < il; i++) {\n\n          node.add(objects[i]);\n\n        }\n\n      }\n\n      if (nodeDef.name !== undefined) {\n\n        node.userData.name = nodeDef.name;\n        node.name = THREE.PropertyBinding.sanitizeNodeName(nodeDef.name);\n\n      }\n\n      assignExtrasToUserData(node, nodeDef);\n\n      if (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef);\n\n      if (nodeDef.matrix !== undefined) {\n\n        var matrix = new THREE.Matrix4();\n        matrix.fromArray(nodeDef.matrix);\n        node.applyMatrix(matrix);\n\n      } else {\n\n        if (nodeDef.translation !== undefined) {\n\n          node.position.fromArray(nodeDef.translation);\n\n        }\n\n        if (nodeDef.rotation !== undefined) {\n\n          node.quaternion.fromArray(nodeDef.rotation);\n\n        }\n\n        if (nodeDef.scale !== undefined) {\n\n          node.scale.fromArray(nodeDef.scale);\n\n        }\n\n      }\n\n      return node;\n\n    });\n\n  };\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<THREE.Scene>}\n\t */\n  GLTFParser.prototype.loadScene = function () {\n\n    // scene node hierachy builder\n\n    function buildNodeHierachy(nodeId, parentObject, json, parser) {\n\n      var nodeDef = json.nodes[nodeId];\n\n      return parser.getDependency('node', nodeId).then(function (node) {\n\n        if (nodeDef.skin === undefined) return node;\n\n        // build skeleton here as well\n\n        var skinEntry;\n\n        return parser.getDependency('skin', nodeDef.skin).then(function (skin) {\n\n          skinEntry = skin;\n\n          var pendingJoints = [];\n\n          for (var i = 0, il = skinEntry.joints.length; i < il; i++) {\n\n            pendingJoints.push(parser.getDependency('node', skinEntry.joints[i]));\n\n          }\n\n          return Promise.all(pendingJoints);\n\n        }).then(function (jointNodes) {\n\n          node.traverse(function (mesh) {\n\n            if (!mesh.isMesh) return;\n\n            var bones = [];\n            var boneInverses = [];\n\n            for (var j = 0, jl = jointNodes.length; j < jl; j++) {\n\n              var jointNode = jointNodes[j];\n\n              if (jointNode) {\n\n                bones.push(jointNode);\n\n                var mat = new THREE.Matrix4();\n\n                if (skinEntry.inverseBindMatrices !== undefined) {\n\n                  mat.fromArray(skinEntry.inverseBindMatrices.array, j * 16);\n\n                }\n\n                boneInverses.push(mat);\n\n              } else {\n\n                console.warn('THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[j]);\n\n              }\n\n            }\n\n            mesh.bind(new THREE.Skeleton(bones, boneInverses), mesh.matrixWorld);\n\n          });\n\n          return node;\n\n        });\n\n      }).then(function (node) {\n\n        // build node hierachy\n\n        parentObject.add(node);\n\n        var pending = [];\n\n        if (nodeDef.children) {\n\n          var children = nodeDef.children;\n\n          for (var i = 0, il = children.length; i < il; i++) {\n\n            var child = children[i];\n            pending.push(buildNodeHierachy(child, node, json, parser));\n\n          }\n\n        }\n\n        return Promise.all(pending);\n\n      });\n\n    }\n\n    return function loadScene(sceneIndex) {\n\n      var json = this.json;\n      var extensions = this.extensions;\n      var sceneDef = this.json.scenes[sceneIndex];\n      var parser = this;\n\n      var scene = new THREE.Scene();\n      if (sceneDef.name !== undefined) scene.name = sceneDef.name;\n\n      assignExtrasToUserData(scene, sceneDef);\n\n      if (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n\n      var nodeIds = sceneDef.nodes || [];\n\n      var pending = [];\n\n      for (var i = 0, il = nodeIds.length; i < il; i++) {\n\n        pending.push(buildNodeHierachy(nodeIds[i], scene, json, parser));\n\n      }\n\n      return Promise.all(pending).then(function () {\n\n        return scene;\n\n      });\n\n    };\n\n  }();\n\n  return GLTFLoader;\n\n})();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.OBJLoader = (function () {\n\n  // o object_name | g group_name\n  var object_pattern = /^[og]\\s*(.+)?/;\n  // mtllib file_reference\n  var material_library_pattern = /^mtllib /;\n  // usemtl material_name\n  var material_use_pattern = /^usemtl /;\n\n  function ParserState() {\n\n    var state = {\n      objects: [],\n      object: {},\n\n      vertices: [],\n      normals: [],\n      colors: [],\n      uvs: [],\n\n      materialLibraries: [],\n\n      startObject: function (name, fromDeclaration) {\n\n        // If the current object (initial from reset) is not from a g/o declaration in the parsed\n        // file. We need to use it for the first parsed g/o to keep things in sync.\n        if (this.object && this.object.fromDeclaration === false) {\n\n          this.object.name = name;\n          this.object.fromDeclaration = (fromDeclaration !== false);\n          return;\n\n        }\n\n        var previousMaterial = (this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined);\n\n        if (this.object && typeof this.object._finalize === 'function') {\n\n          this.object._finalize(true);\n\n        }\n\n        this.object = {\n          name: name || '',\n          fromDeclaration: (fromDeclaration !== false),\n\n          geometry: {\n            vertices: [],\n            normals: [],\n            colors: [],\n            uvs: []\n          },\n          materials: [],\n          smooth: true,\n\n          startMaterial: function (name, libraries) {\n\n            var previous = this._finalize(false);\n\n            // New usemtl declaration overwrites an inherited material, except if faces were declared\n            // after the material, then it must be preserved for proper MultiMaterial continuation.\n            if (previous && (previous.inherited || previous.groupCount <= 0)) {\n\n              this.materials.splice(previous.index, 1);\n\n            }\n\n            var material = {\n              index: this.materials.length,\n              name: name || '',\n              mtllib: (Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : ''),\n              smooth: (previous !== undefined ? previous.smooth : this.smooth),\n              groupStart: (previous !== undefined ? previous.groupEnd : 0),\n              groupEnd: - 1,\n              groupCount: - 1,\n              inherited: false,\n\n              clone: function (index) {\n\n                var cloned = {\n                  index: (typeof index === 'number' ? index : this.index),\n                  name: this.name,\n                  mtllib: this.mtllib,\n                  smooth: this.smooth,\n                  groupStart: 0,\n                  groupEnd: - 1,\n                  groupCount: - 1,\n                  inherited: false\n                };\n                cloned.clone = this.clone.bind(cloned);\n                return cloned;\n\n              }\n            };\n\n            this.materials.push(material);\n\n            return material;\n\n          },\n\n          currentMaterial: function () {\n\n            if (this.materials.length > 0) {\n\n              return this.materials[this.materials.length - 1];\n\n            }\n\n            return undefined;\n\n          },\n\n          _finalize: function (end) {\n\n            var lastMultiMaterial = this.currentMaterial();\n            if (lastMultiMaterial && lastMultiMaterial.groupEnd === - 1) {\n\n              lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n              lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n              lastMultiMaterial.inherited = false;\n\n            }\n\n            // Ignore objects tail materials if no face declarations followed them before a new o/g started.\n            if (end && this.materials.length > 1) {\n\n              for (var mi = this.materials.length - 1; mi >= 0; mi--) {\n\n                if (this.materials[mi].groupCount <= 0) {\n\n                  this.materials.splice(mi, 1);\n\n                }\n\n              }\n\n            }\n\n            // Guarantee at least one empty material, this makes the creation later more straight forward.\n            if (end && this.materials.length === 0) {\n\n              this.materials.push({\n                name: '',\n                smooth: this.smooth\n              });\n\n            }\n\n            return lastMultiMaterial;\n\n          }\n        };\n\n        // Inherit previous objects material.\n        // Spec tells us that a declared material must be set to all objects until a new material is declared.\n        // If a usemtl declaration is encountered while this new object is being parsed, it will\n        // overwrite the inherited material. Exception being that there was already face declarations\n        // to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n        if (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function') {\n\n          var declared = previousMaterial.clone(0);\n          declared.inherited = true;\n          this.object.materials.push(declared);\n\n        }\n\n        this.objects.push(this.object);\n\n      },\n\n      finalize: function () {\n\n        if (this.object && typeof this.object._finalize === 'function') {\n\n          this.object._finalize(true);\n\n        }\n\n      },\n\n      parseVertexIndex: function (value, len) {\n\n        var index = parseInt(value, 10);\n        return (index >= 0 ? index - 1 : index + len / 3) * 3;\n\n      },\n\n      parseNormalIndex: function (value, len) {\n\n        var index = parseInt(value, 10);\n        return (index >= 0 ? index - 1 : index + len / 3) * 3;\n\n      },\n\n      parseUVIndex: function (value, len) {\n\n        var index = parseInt(value, 10);\n        return (index >= 0 ? index - 1 : index + len / 2) * 2;\n\n      },\n\n      addVertex: function (a, b, c) {\n\n        var src = this.vertices;\n        var dst = this.object.geometry.vertices;\n\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\n\n      },\n\n      addVertexPoint: function (a) {\n\n        var src = this.vertices;\n        var dst = this.object.geometry.vertices;\n\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n\n      },\n\n      addVertexLine: function (a) {\n\n        var src = this.vertices;\n        var dst = this.object.geometry.vertices;\n\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n\n      },\n\n      addNormal: function (a, b, c) {\n\n        var src = this.normals;\n        var dst = this.object.geometry.normals;\n\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\n\n      },\n\n      addColor: function (a, b, c) {\n\n        var src = this.colors;\n        var dst = this.object.geometry.colors;\n\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\n\n      },\n\n      addUV: function (a, b, c) {\n\n        var src = this.uvs;\n        var dst = this.object.geometry.uvs;\n\n        dst.push(src[a + 0], src[a + 1]);\n        dst.push(src[b + 0], src[b + 1]);\n        dst.push(src[c + 0], src[c + 1]);\n\n      },\n\n      addUVLine: function (a) {\n\n        var src = this.uvs;\n        var dst = this.object.geometry.uvs;\n\n        dst.push(src[a + 0], src[a + 1]);\n\n      },\n\n      addFace: function (a, b, c, ua, ub, uc, na, nb, nc) {\n\n        var vLen = this.vertices.length;\n\n        var ia = this.parseVertexIndex(a, vLen);\n        var ib = this.parseVertexIndex(b, vLen);\n        var ic = this.parseVertexIndex(c, vLen);\n\n        this.addVertex(ia, ib, ic);\n\n        if (this.colors.length > 0) {\n\n          this.addColor(ia, ib, ic);\n\n        }\n\n        if (ua !== undefined && ua !== '') {\n\n          var uvLen = this.uvs.length;\n          ia = this.parseUVIndex(ua, uvLen);\n          ib = this.parseUVIndex(ub, uvLen);\n          ic = this.parseUVIndex(uc, uvLen);\n          this.addUV(ia, ib, ic);\n\n        }\n\n        if (na !== undefined && na !== '') {\n\n          // Normals are many times the same. If so, skip function call and parseInt.\n          var nLen = this.normals.length;\n          ia = this.parseNormalIndex(na, nLen);\n\n          ib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n          ic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n\n          this.addNormal(ia, ib, ic);\n\n        }\n\n      },\n\n      addPointGeometry: function (vertices) {\n\n        this.object.geometry.type = 'Points';\n\n        var vLen = this.vertices.length;\n\n        for (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n          this.addVertexPoint(this.parseVertexIndex(vertices[vi], vLen));\n\n        }\n\n      },\n\n      addLineGeometry: function (vertices, uvs) {\n\n        this.object.geometry.type = 'Line';\n\n        var vLen = this.vertices.length;\n        var uvLen = this.uvs.length;\n\n        for (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n          this.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n\n        }\n\n        for (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n\n          this.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n\n        }\n\n      }\n\n    };\n\n    state.startObject('', false);\n\n    return state;\n\n  }\n\n  //\n\n  function OBJLoader(manager) {\n\n    THREE.Loader.call(this, manager);\n\n    this.materials = null;\n\n  }\n\n  OBJLoader.prototype = Object.assign(Object.create(THREE.Loader.prototype), {\n\n    constructor: OBJLoader,\n\n    load: function (url, onLoad, onProgress, onError) {\n\n      var scope = this;\n\n      var loader = new THREE.FileLoader(scope.manager);\n      loader.setPath(this.path);\n      loader.load(url, function (text) {\n\n        onLoad(scope.parse(text));\n\n      }, onProgress, onError);\n\n    },\n\n    setMaterials: function (materials) {\n\n      this.materials = materials;\n\n      return this;\n\n    },\n\n    parse: function (text) {\n\n      console.time('OBJLoader');\n\n      var state = new ParserState();\n\n      if (text.indexOf('\\r\\n') !== - 1) {\n\n        // This is faster than String.split with regex that splits on both\n        text = text.replace(/\\r\\n/g, '\\n');\n\n      }\n\n      if (text.indexOf('\\\\\\n') !== - 1) {\n\n        // join lines separated by a line continuation character (\\)\n        text = text.replace(/\\\\\\n/g, '');\n\n      }\n\n      var lines = text.split('\\n');\n      var line = '', lineFirstChar = '';\n      var lineLength = 0;\n      var result = [];\n\n      // Faster to just trim left side of the line. Use if available.\n      var trimLeft = (typeof ''.trimLeft === 'function');\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n\n        line = lines[i];\n\n        line = trimLeft ? line.trimLeft() : line.trim();\n\n        lineLength = line.length;\n\n        if (lineLength === 0) continue;\n\n        lineFirstChar = line.charAt(0);\n\n        // @todo invoke passed in handler if any\n        if (lineFirstChar === '#') continue;\n\n        if (lineFirstChar === 'v') {\n\n          var data = line.split(/\\s+/);\n\n          switch (data[0]) {\n\n            case 'v':\n              state.vertices.push(\n                parseFloat(data[1]),\n                parseFloat(data[2]),\n                parseFloat(data[3])\n              );\n              if (data.length >= 7) {\n\n                state.colors.push(\n                  parseFloat(data[4]),\n                  parseFloat(data[5]),\n                  parseFloat(data[6])\n\n                );\n\n              }\n              break;\n            case 'vn':\n              state.normals.push(\n                parseFloat(data[1]),\n                parseFloat(data[2]),\n                parseFloat(data[3])\n              );\n              break;\n            case 'vt':\n              state.uvs.push(\n                parseFloat(data[1]),\n                parseFloat(data[2])\n              );\n              break;\n\n          }\n\n        } else if (lineFirstChar === 'f') {\n\n          var lineData = line.substr(1).trim();\n          var vertexData = lineData.split(/\\s+/);\n          var faceVertices = [];\n\n          // Parse the face vertex data into an easy to work with format\n\n          for (var j = 0, jl = vertexData.length; j < jl; j++) {\n\n            var vertex = vertexData[j];\n\n            if (vertex.length > 0) {\n\n              var vertexParts = vertex.split('/');\n              faceVertices.push(vertexParts);\n\n            }\n\n          }\n\n          // Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n          var v1 = faceVertices[0];\n\n          for (var j = 1, jl = faceVertices.length - 1; j < jl; j++) {\n\n            var v2 = faceVertices[j];\n            var v3 = faceVertices[j + 1];\n\n            state.addFace(\n              v1[0], v2[0], v3[0],\n              v1[1], v2[1], v3[1],\n              v1[2], v2[2], v3[2]\n            );\n\n          }\n\n        } else if (lineFirstChar === 'l') {\n\n          var lineParts = line.substring(1).trim().split(\" \");\n          var lineVertices = [], lineUVs = [];\n\n          if (line.indexOf(\"/\") === - 1) {\n\n            lineVertices = lineParts;\n\n          } else {\n\n            for (var li = 0, llen = lineParts.length; li < llen; li++) {\n\n              var parts = lineParts[li].split(\"/\");\n\n              if (parts[0] !== \"\") lineVertices.push(parts[0]);\n              if (parts[1] !== \"\") lineUVs.push(parts[1]);\n\n            }\n\n          }\n          state.addLineGeometry(lineVertices, lineUVs);\n\n        } else if (lineFirstChar === 'p') {\n\n          var lineData = line.substr(1).trim();\n          var pointData = lineData.split(\" \");\n\n          state.addPointGeometry(pointData);\n\n        } else if ((result = object_pattern.exec(line)) !== null) {\n\n          // o object_name\n          // or\n          // g group_name\n\n          // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n          // var name = result[ 0 ].substr( 1 ).trim();\n          var name = (\" \" + result[0].substr(1).trim()).substr(1);\n\n          state.startObject(name);\n\n        } else if (material_use_pattern.test(line)) {\n\n          // material\n\n          state.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n\n        } else if (material_library_pattern.test(line)) {\n\n          // mtl file\n\n          state.materialLibraries.push(line.substring(7).trim());\n\n        } else if (lineFirstChar === 's') {\n\n          result = line.split(' ');\n\n          // smooth shading\n\n          // @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n          // but does not define a usemtl for each face set.\n          // This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n          // This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n          // where explicit usemtl defines geometry groups.\n          // Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t * or\n\t\t\t\t\t * http://www.cs.utah.edu/~boulos/cs3505/obj_spec.pdf\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n          if (result.length > 1) {\n\n            var value = result[1].trim().toLowerCase();\n            state.object.smooth = (value !== '0' && value !== 'off');\n\n          } else {\n\n            // ZBrush can produce \"s\" lines #11707\n            state.object.smooth = true;\n\n          }\n          var material = state.object.currentMaterial();\n          if (material) material.smooth = state.object.smooth;\n\n        } else {\n\n          // Handle null terminated files without exception\n          if (line === '\\0') continue;\n\n          throw new Error('THREE.OBJLoader: Unexpected line: \"' + line + '\"');\n\n        }\n\n      }\n\n      state.finalize();\n\n      var container = new THREE.Group();\n      container.materialLibraries = [].concat(state.materialLibraries);\n\n      for (var i = 0, l = state.objects.length; i < l; i++) {\n\n        var object = state.objects[i];\n        var geometry = object.geometry;\n        var materials = object.materials;\n        var isLine = (geometry.type === 'Line');\n        var isPoints = (geometry.type === 'Points');\n        var hasVertexColors = false;\n\n        // Skip o/g line declarations that did not follow with any faces\n        if (geometry.vertices.length === 0) continue;\n\n        var buffergeometry = new THREE.BufferGeometry();\n\n        buffergeometry.addAttribute('position', new THREE.Float32BufferAttribute(geometry.vertices, 3));\n\n        if (geometry.normals.length > 0) {\n\n          buffergeometry.addAttribute('normal', new THREE.Float32BufferAttribute(geometry.normals, 3));\n\n        } else {\n\n          buffergeometry.computeVertexNormals();\n\n        }\n\n        if (geometry.colors.length > 0) {\n\n          hasVertexColors = true;\n          buffergeometry.addAttribute('color', new THREE.Float32BufferAttribute(geometry.colors, 3));\n\n        }\n\n        if (geometry.uvs.length > 0) {\n\n          buffergeometry.addAttribute('uv', new THREE.Float32BufferAttribute(geometry.uvs, 2));\n\n        }\n\n        // Create materials\n\n        var createdMaterials = [];\n\n        for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n          var sourceMaterial = materials[mi];\n          var material = undefined;\n\n          if (this.materials !== null) {\n\n            material = this.materials.create(sourceMaterial.name);\n\n            // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n            if (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\n\n              var materialLine = new THREE.LineBasicMaterial();\n              THREE.Material.prototype.copy.call(materialLine, material);\n              materialLine.color.copy(material.color);\n              material = materialLine;\n\n            } else if (isPoints && material && !(material instanceof THREE.PointsMaterial)) {\n\n              var materialPoints = new THREE.PointsMaterial({ size: 10, sizeAttenuation: false });\n              THREE.Material.prototype.copy.call(materialPoints, material);\n              materialPoints.color.copy(material.color);\n              materialPoints.map = material.map;\n              material = materialPoints;\n\n            }\n\n          }\n\n          if (!material) {\n\n            if (isLine) {\n\n              material = new THREE.LineBasicMaterial();\n\n            } else if (isPoints) {\n\n              material = new THREE.PointsMaterial({ size: 1, sizeAttenuation: false });\n\n            } else {\n\n              material = new THREE.MeshPhongMaterial();\n\n            }\n\n            material.name = sourceMaterial.name;\n\n          }\n\n          material.flatShading = sourceMaterial.smooth ? false : true;\n          material.vertexColors = hasVertexColors ? THREE.VertexColors : THREE.NoColors;\n\n          createdMaterials.push(material);\n\n        }\n\n        // Create mesh\n\n        var mesh;\n\n        if (createdMaterials.length > 1) {\n\n          for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n            var sourceMaterial = materials[mi];\n            buffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n\n          }\n\n          if (isLine) {\n\n            mesh = new THREE.LineSegments(buffergeometry, createdMaterials);\n\n          } else if (isPoints) {\n\n            mesh = new THREE.Points(buffergeometry, createdMaterials);\n\n          } else {\n\n            mesh = new THREE.Mesh(buffergeometry, createdMaterials);\n\n          }\n\n        } else {\n\n          if (isLine) {\n\n            mesh = new THREE.LineSegments(buffergeometry, createdMaterials[0]);\n\n          } else if (isPoints) {\n\n            mesh = new THREE.Points(buffergeometry, createdMaterials[0]);\n\n          } else {\n\n            mesh = new THREE.Mesh(buffergeometry, createdMaterials[0]);\n\n          }\n\n        }\n\n        mesh.name = object.name;\n\n        container.add(mesh);\n\n      }\n\n      console.timeEnd('OBJLoader');\n\n      return container;\n\n    }\n\n  });\n\n  return OBJLoader;\n\n})();\n\n'use strict';\nvar\n  transferableMessage = self.webkitPostMessage || self.postMessage,\n\n  // enum\n  MESSAGE_TYPES = {\n    WORLDREPORT: 0,\n    COLLISIONREPORT: 1,\n    VEHICLEREPORT: 2,\n    CONSTRAINTREPORT: 3\n  },\n\n  // temp variables\n  _object,\n  _vector,\n  _transform,\n\n  // functions\n  public_functions = {},\n  getShapeFromCache,\n  setShapeCache,\n  createShape,\n  reportWorld,\n  reportVehicles,\n  reportCollisions,\n  reportConstraints,\n\n  // world variables\n  fixedTimeStep, // used when calling stepSimulation\n  rateLimit, // sets whether or not to sync the simulation rate with fixedTimeStep\n  last_simulation_time,\n  last_simulation_duration = 0,\n  world,\n  transform,\n  _vec3_1,\n  _vec3_2,\n  _vec3_3,\n  _quat,\n  // private cache\n  _objects = {},\n  _vehicles = {},\n  _constraints = {},\n  _materials = {},\n  _objects_ammo = {},\n  _num_objects = 0,\n  _num_wheels = 0,\n  _num_constraints = 0,\n  _object_shapes = {},\n\n  // The following objects are to track objects that ammo.js doesn't clean\n  // up. All are cleaned up when they're corresponding body is destroyed.\n  // Unfortunately, it's very difficult to get at these objects from the\n  // body, so we have to track them ourselves.\n  _motion_states = {},\n  // Don't need to worry about it for cached shapes.\n  _noncached_shapes = {},\n  // A body with a compound shape always has a regular shape as well, so we\n  // have track them separately.\n  _compound_shapes = {},\n\n  // object reporting\n  REPORT_CHUNKSIZE, // report array is increased in increments of this chunk size\n\n  WORLDREPORT_ITEMSIZE = 14, // how many float values each reported item needs\n  worldreport,\n\n  COLLISIONREPORT_ITEMSIZE = 5, // one float for each object id, and a Vec3 contact normal\n  collisionreport,\n\n  VEHICLEREPORT_ITEMSIZE = 9, // vehicle id, wheel index, 3 for position, 4 for rotation\n  vehiclereport,\n\n  CONSTRAINTREPORT_ITEMSIZE = 6, // constraint id, offset object, offset, applied impulse\n  constraintreport;\n\nvar ab = new ArrayBuffer(1);\n\ntransferableMessage(ab, [ab]);\nvar SUPPORT_TRANSFERABLE = (ab.byteLength === 0);\n\ngetShapeFromCache = function (cache_key) {\n  if (_object_shapes[cache_key] !== undefined) {\n    return _object_shapes[cache_key];\n  }\n  return null;\n};\n\nsetShapeCache = function (cache_key, shape) {\n  _object_shapes[cache_key] = shape;\n}\n\ncreateShape = function (description) {\n  var cache_key, shape;\n\n  _transform.setIdentity();\n  switch (description.type) {\n    case 'plane':\n      cache_key = 'plane_' + description.normal.x + '_' + description.normal.y + '_' + description.normal.z;\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        _vec3_1.setX(description.normal.x);\n        _vec3_1.setY(description.normal.y);\n        _vec3_1.setZ(description.normal.z);\n        shape = new Ammo.btStaticPlaneShape(_vec3_1, 0);\n        setShapeCache(cache_key, shape);\n      }\n      break;\n\n    case 'box':\n      cache_key = 'box_' + description.width + '_' + description.height + '_' + description.depth;\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        _vec3_1.setX(description.width / 2);\n        _vec3_1.setY(description.height / 2);\n        _vec3_1.setZ(description.depth / 2);\n        shape = new Ammo.btBoxShape(_vec3_1);\n        setShapeCache(cache_key, shape);\n      }\n      break;\n\n    case 'sphere':\n      cache_key = 'sphere_' + description.radius;\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        shape = new Ammo.btSphereShape(description.radius);\n        setShapeCache(cache_key, shape);\n      }\n      break;\n\n    case 'cylinder':\n      cache_key = 'cylinder_' + description.width + '_' + description.height + '_' + description.depth;\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        _vec3_1.setX(description.width / 2);\n        _vec3_1.setY(description.height / 2);\n        _vec3_1.setZ(description.depth / 2);\n        shape = new Ammo.btCylinderShape(_vec3_1);\n        setShapeCache(cache_key, shape);\n      }\n      break;\n\n    case 'capsule':\n      cache_key = 'capsule_' + description.radius + '_' + description.height;\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        // In Bullet, capsule height excludes the end spheres\n        shape = new Ammo.btCapsuleShape(description.radius, description.height - 2 * description.radius);\n        setShapeCache(cache_key, shape);\n      }\n      break;\n\n    case 'cone':\n      cache_key = 'cone_' + description.radius + '_' + description.height;\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        shape = new Ammo.btConeShape(description.radius, description.height);\n        setShapeCache(cache_key, shape);\n      }\n      break;\n\n    case 'concave':\n      var i, triangle, triangle_mesh = new Ammo.btTriangleMesh;\n      if (!description.triangles.length) return false\n\n      for (i = 0; i < description.triangles.length; i++) {\n        triangle = description.triangles[i];\n\n        _vec3_1.setX(triangle[0].x);\n        _vec3_1.setY(triangle[0].y);\n        _vec3_1.setZ(triangle[0].z);\n\n        _vec3_2.setX(triangle[1].x);\n        _vec3_2.setY(triangle[1].y);\n        _vec3_2.setZ(triangle[1].z);\n\n        _vec3_3.setX(triangle[2].x);\n        _vec3_3.setY(triangle[2].y);\n        _vec3_3.setZ(triangle[2].z);\n\n        triangle_mesh.addTriangle(\n          _vec3_1,\n          _vec3_2,\n          _vec3_3,\n          true\n        );\n      }\n\n      shape = new Ammo.btBvhTriangleMeshShape(\n        triangle_mesh,\n        true,\n        true\n      );\n      _noncached_shapes[description.id] = shape;\n      break;\n\n    case 'convex':\n      var i, point, shape = new Ammo.btConvexHullShape;\n      for (i = 0; i < description.points.length; i++) {\n        point = description.points[i];\n\n        _vec3_1.setX(point.x);\n        _vec3_1.setY(point.y);\n        _vec3_1.setZ(point.z);\n\n        shape.addPoint(_vec3_1);\n\n      }\n      _noncached_shapes[description.id] = shape;\n      break;\n\n    case 'heightfield':\n\n      var ptr = Ammo.allocate(4 * description.xpts * description.ypts, \"float\", Ammo.ALLOC_NORMAL);\n\n      for (var f = 0; f < description.points.length; f++) {\n        Ammo.setValue(ptr + f, description.points[f], 'float');\n      }\n\n      shape = new Ammo.btHeightfieldTerrainShape(\n        description.xpts,\n        description.ypts,\n        ptr,\n        1,\n        -description.absMaxHeight,\n        description.absMaxHeight,\n        2,\n        0,\n        false\n      );\n\n      _vec3_1.setX(description.xsize / (description.xpts - 1));\n      _vec3_1.setY(description.ysize / (description.ypts - 1));\n      _vec3_1.setZ(1);\n\n      shape.setLocalScaling(_vec3_1);\n      _noncached_shapes[description.id] = shape;\n      break;\n\n    default:\n      // Not recognized\n      return;\n      break;\n  }\n\n  return shape;\n};\n\npublic_functions.init = function (params) {\n  importScripts(params.ammo);\n\n  _transform = new Ammo.btTransform;\n  _vec3_1 = new Ammo.btVector3(0, 0, 0);\n  _vec3_2 = new Ammo.btVector3(0, 0, 0);\n  _vec3_3 = new Ammo.btVector3(0, 0, 0);\n  _quat = new Ammo.btQuaternion(0, 0, 0, 0);\n\n  REPORT_CHUNKSIZE = params.reportsize || 50;\n  if (SUPPORT_TRANSFERABLE) {\n    // Transferable messages are supported, take advantage of them with TypedArrays\n    worldreport = new Float32Array(2 + REPORT_CHUNKSIZE * WORLDREPORT_ITEMSIZE); // message id + # of objects to report + chunk size * # of values per object\n    collisionreport = new Float32Array(2 + REPORT_CHUNKSIZE * COLLISIONREPORT_ITEMSIZE); // message id + # of collisions to report + chunk size * # of values per object\n    vehiclereport = new Float32Array(2 + REPORT_CHUNKSIZE * VEHICLEREPORT_ITEMSIZE); // message id + # of vehicles to report + chunk size * # of values per object\n    constraintreport = new Float32Array(2 + REPORT_CHUNKSIZE * CONSTRAINTREPORT_ITEMSIZE); // message id + # of constraints to report + chunk size * # of values per object\n  } else {\n    // Transferable messages are not supported, send data as normal arrays\n    worldreport = [];\n    collisionreport = [];\n    vehiclereport = [];\n    constraintreport = [];\n  }\n  worldreport[0] = MESSAGE_TYPES.WORLDREPORT;\n  collisionreport[0] = MESSAGE_TYPES.COLLISIONREPORT;\n  vehiclereport[0] = MESSAGE_TYPES.VEHICLEREPORT;\n  constraintreport[0] = MESSAGE_TYPES.CONSTRAINTREPORT;\n\n  var collisionConfiguration = new Ammo.btDefaultCollisionConfiguration,\n    dispatcher = new Ammo.btCollisionDispatcher(collisionConfiguration),\n    solver = new Ammo.btSequentialImpulseConstraintSolver,\n    broadphase;\n\n  if (!params.broadphase) params.broadphase = { type: 'dynamic' };\n  switch (params.broadphase.type) {\n    case 'sweepprune':\n\n      _vec3_1.setX(params.broadphase.aabbmin.x);\n      _vec3_1.setY(params.broadphase.aabbmin.y);\n      _vec3_1.setZ(params.broadphase.aabbmin.z);\n\n      _vec3_2.setX(params.broadphase.aabbmax.x);\n      _vec3_2.setY(params.broadphase.aabbmax.y);\n      _vec3_2.setZ(params.broadphase.aabbmax.z);\n\n      broadphase = new Ammo.btAxisSweep3(\n        _vec3_1,\n        _vec3_2\n      );\n\n      break;\n\n    case 'dynamic':\n    default:\n      broadphase = new Ammo.btDbvtBroadphase;\n      break;\n  }\n\n  world = new Ammo.btDiscreteDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration);\n\n  fixedTimeStep = params.fixedTimeStep;\n  rateLimit = params.rateLimit;\n\n  transferableMessage({ cmd: 'worldReady' });\n};\n\npublic_functions.registerMaterial = function (description) {\n  _materials[description.id] = description;\n};\n\npublic_functions.unRegisterMaterial = function (description) {\n  delete _materials[description.id];\n};\n\npublic_functions.setFixedTimeStep = function (description) {\n  fixedTimeStep = description;\n};\n\npublic_functions.setGravity = function (description) {\n  _vec3_1.setX(description.x);\n  _vec3_1.setY(description.y);\n  _vec3_1.setZ(description.z);\n  world.setGravity(_vec3_1);\n};\n\npublic_functions.addObject = function (description) {\n\n  var i,\n    localInertia, shape, motionState, rbInfo, body;\n\n  shape = createShape(description);\n  if (!shape) return\n  // If there are children then this is a compound shape\n  if (description.children) {\n    var compound_shape = new Ammo.btCompoundShape, _child;\n    compound_shape.addChildShape(_transform, shape);\n\n    for (i = 0; i < description.children.length; i++) {\n      _child = description.children[i];\n\n      var trans = new Ammo.btTransform;\n      trans.setIdentity();\n\n      _vec3_1.setX(_child.position_offset.x);\n      _vec3_1.setY(_child.position_offset.y);\n      _vec3_1.setZ(_child.position_offset.z);\n      trans.setOrigin(_vec3_1);\n\n      _quat.setX(_child.rotation.x);\n      _quat.setY(_child.rotation.y);\n      _quat.setZ(_child.rotation.z);\n      _quat.setW(_child.rotation.w);\n      trans.setRotation(_quat);\n\n      shape = createShape(description.children[i]);\n      compound_shape.addChildShape(trans, shape);\n      Ammo.destroy(trans);\n    }\n\n    shape = compound_shape;\n    _compound_shapes[description.id] = shape;\n  }\n  _vec3_1.setX(0);\n  _vec3_1.setY(0);\n  _vec3_1.setZ(0);\n  shape.calculateLocalInertia(description.mass, _vec3_1);\n\n  _transform.setIdentity();\n\n  _vec3_2.setX(description.position.x);\n  _vec3_2.setY(description.position.y);\n  _vec3_2.setZ(description.position.z);\n  _transform.setOrigin(_vec3_2);\n\n  _quat.setX(description.rotation.x);\n  _quat.setY(description.rotation.y);\n  _quat.setZ(description.rotation.z);\n  _quat.setW(description.rotation.w);\n  _transform.setRotation(_quat);\n\n  motionState = new Ammo.btDefaultMotionState(_transform); // #TODO: btDefaultMotionState supports center of mass offset as second argument - implement\n  rbInfo = new Ammo.btRigidBodyConstructionInfo(description.mass, motionState, shape, _vec3_1);\n\n  if (description.materialId !== undefined) {\n    rbInfo.set_m_friction(_materials[description.materialId].friction);\n    rbInfo.set_m_restitution(_materials[description.materialId].restitution);\n  }\n\n  body = new Ammo.btRigidBody(rbInfo);\n  Ammo.destroy(rbInfo);\n\n  if (typeof description.collision_flags !== 'undefined') {\n    body.setCollisionFlags(description.collision_flags);\n  }\n\n  world.addRigidBody(body);\n\n  body.id = description.id;\n  _objects[body.id] = body;\n  _motion_states[body.id] = motionState;\n\n  var ptr = body.a != undefined ? body.a : body.ptr;\n  _objects_ammo[ptr] = body.id;\n  _num_objects++;\n\n  transferableMessage({ cmd: 'objectReady', params: body.id });\n};\n\npublic_functions.addVehicle = function (description) {\n  var vehicle_tuning = new Ammo.btVehicleTuning(),\n    vehicle;\n\n  vehicle_tuning.set_m_suspensionStiffness(description.suspension_stiffness);\n  vehicle_tuning.set_m_suspensionCompression(description.suspension_compression);\n  vehicle_tuning.set_m_suspensionDamping(description.suspension_damping);\n  vehicle_tuning.set_m_maxSuspensionTravelCm(description.max_suspension_travel);\n  vehicle_tuning.set_m_maxSuspensionForce(description.max_suspension_force);\n\n  vehicle = new Ammo.btRaycastVehicle(vehicle_tuning, _objects[description.rigidBody], new Ammo.btDefaultVehicleRaycaster(world));\n  vehicle.tuning = vehicle_tuning;\n\n  _objects[description.rigidBody].setActivationState(4);\n  vehicle.setCoordinateSystem(0, 1, 2);\n\n  world.addVehicle(vehicle);\n  _vehicles[description.id] = vehicle;\n};\npublic_functions.removeVehicle = function (description) {\n  delete _vehicles[description.id];\n};\n\npublic_functions.addWheel = function (description) {\n  if (_vehicles[description.id] !== undefined) {\n    var tuning = _vehicles[description.id].tuning;\n    if (description.tuning !== undefined) {\n      tuning = new Ammo.btVehicleTuning();\n      tuning.set_m_suspensionStiffness(description.tuning.suspension_stiffness);\n      tuning.set_m_suspensionCompression(description.tuning.suspension_compression);\n      tuning.set_m_suspensionDamping(description.tuning.suspension_damping);\n      tuning.set_m_maxSuspensionTravelCm(description.tuning.max_suspension_travel);\n      tuning.set_m_maxSuspensionForce(description.tuning.max_suspension_force);\n    }\n\n    _vec3_1.setX(description.connection_point.x);\n    _vec3_1.setY(description.connection_point.y);\n    _vec3_1.setZ(description.connection_point.z);\n\n    _vec3_2.setX(description.wheel_direction.x);\n    _vec3_2.setY(description.wheel_direction.y);\n    _vec3_2.setZ(description.wheel_direction.z);\n\n    _vec3_3.setX(description.wheel_axle.x);\n    _vec3_3.setY(description.wheel_axle.y);\n    _vec3_3.setZ(description.wheel_axle.z);\n\n    _vehicles[description.id].addWheel(\n      _vec3_1,\n      _vec3_2,\n      _vec3_3,\n      description.suspension_rest_length,\n      description.wheel_radius,\n      tuning,\n      description.is_front_wheel\n    );\n  }\n\n  _num_wheels++;\n\n  if (SUPPORT_TRANSFERABLE) {\n    vehiclereport = new Float32Array(1 + _num_wheels * VEHICLEREPORT_ITEMSIZE); // message id & ( # of objects to report * # of values per object )\n    vehiclereport[0] = MESSAGE_TYPES.VEHICLEREPORT;\n  } else {\n    vehiclereport = [MESSAGE_TYPES.VEHICLEREPORT];\n  }\n};\n\npublic_functions.setSteering = function (details) {\n  if (_vehicles[details.id] !== undefined) {\n    _vehicles[details.id].setSteeringValue(details.steering, details.wheel);\n  }\n};\npublic_functions.setBrake = function (details) {\n  if (_vehicles[details.id] !== undefined) {\n    _vehicles[details.id].setBrake(details.brake, details.wheel);\n  }\n};\npublic_functions.applyEngineForce = function (details) {\n  if (_vehicles[details.id] !== undefined) {\n    _vehicles[details.id].applyEngineForce(details.force, details.wheel);\n  }\n};\n\npublic_functions.removeObject = function (details) {\n  world.removeRigidBody(_objects[details.id]);\n  Ammo.destroy(_objects[details.id]);\n  Ammo.destroy(_motion_states[details.id]);\n  if (_compound_shapes[details.id]) Ammo.destroy(_compound_shapes[details.id]);\n  if (_noncached_shapes[details.id]) Ammo.destroy(_noncached_shapes[details.id]);\n  var ptr = _objects[details.id].a != undefined ? _objects[details.id].a : _objects[details.id].ptr;\n  delete _objects_ammo[ptr];\n  delete _objects[details.id];\n  delete _motion_states[details.id];\n  if (_compound_shapes[details.id]) delete _compound_shapes[details.id];\n  if (_noncached_shapes[details.id]) delete _noncached_shapes[details.id];\n  _num_objects--;\n};\n\npublic_functions.updateTransform = function (details) {\n  _object = _objects[details.id];\n  _object.getMotionState().getWorldTransform(_transform);\n\n  if (details.pos) {\n    _vec3_1.setX(details.pos.x);\n    _vec3_1.setY(details.pos.y);\n    _vec3_1.setZ(details.pos.z);\n    _transform.setOrigin(_vec3_1);\n  }\n\n  if (details.quat) {\n    _quat.setX(details.quat.x);\n    _quat.setY(details.quat.y);\n    _quat.setZ(details.quat.z);\n    _quat.setW(details.quat.w);\n    _transform.setRotation(_quat);\n  }\n\n  _object.setWorldTransform(_transform);\n  _object.activate();\n};\n\npublic_functions.updateMass = function (details) {\n  // #TODO: changing a static object into dynamic is buggy\n  _object = _objects[details.id];\n\n  // Per http://www.bulletphysics.org/Bullet/phpBB3/viewtopic.php?p=&f=9&t=3663#p13816\n  world.removeRigidBody(_object);\n\n  _vec3_1.setX(0);\n  _vec3_1.setY(0);\n  _vec3_1.setZ(0);\n\n  _object.setMassProps(details.mass, _vec3_1);\n  world.addRigidBody(_object);\n  _object.activate();\n};\n\npublic_functions.applyCentralImpulse = function (details) {\n\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].applyCentralImpulse(_vec3_1);\n  _objects[details.id].activate();\n};\n\npublic_functions.applyImpulse = function (details) {\n\n  _vec3_1.setX(details.impulse_x);\n  _vec3_1.setY(details.impulse_y);\n  _vec3_1.setZ(details.impulse_z);\n\n  _vec3_2.setX(details.x);\n  _vec3_2.setY(details.y);\n  _vec3_2.setZ(details.z);\n\n  _objects[details.id].applyImpulse(\n    _vec3_1,\n    _vec3_2\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.applyTorque = function (details) {\n\n  _vec3_1.setX(details.torque_x);\n  _vec3_1.setY(details.torque_y);\n  _vec3_1.setZ(details.torque_z);\n\n  _objects[details.id].applyTorque(\n    _vec3_1\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.applyCentralForce = function (details) {\n\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].applyCentralForce(_vec3_1);\n  _objects[details.id].activate();\n};\n\npublic_functions.applyForce = function (details) {\n\n  _vec3_1.setX(details.force_x);\n  _vec3_1.setY(details.force_y);\n  _vec3_1.setZ(details.force_z);\n\n  _vec3_2.setX(details.x);\n  _vec3_2.setY(details.y);\n  _vec3_2.setZ(details.z);\n\n  _objects[details.id].applyForce(\n    _vec3_1,\n    _vec3_2\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.onSimulationResume = function (params) {\n  last_simulation_time = Date.now();\n};\n\npublic_functions.setAngularVelocity = function (details) {\n\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].setAngularVelocity(\n    _vec3_1\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.setLinearVelocity = function (details) {\n\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].setLinearVelocity(\n    _vec3_1\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.setAngularFactor = function (details) {\n\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].setAngularFactor(\n    _vec3_1\n  );\n};\n\npublic_functions.setLinearFactor = function (details) {\n\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].setLinearFactor(\n    _vec3_1\n  );\n};\n\npublic_functions.setDamping = function (details) {\n  _objects[details.id].setDamping(details.linear, details.angular);\n};\n\npublic_functions.setCcdMotionThreshold = function (details) {\n  _objects[details.id].setCcdMotionThreshold(details.threshold);\n};\n\npublic_functions.setCcdSweptSphereRadius = function (details) {\n  _objects[details.id].setCcdSweptSphereRadius(details.radius);\n};\n\npublic_functions.addConstraint = function (details) {\n  var constraint;\n\n  switch (details.type) {\n\n    case 'point':\n      if (details.objectb === undefined) {\n\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        constraint = new Ammo.btPoint2PointConstraint(\n          _objects[details.objecta],\n          _vec3_1\n        );\n      } else {\n\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        _vec3_2.setX(details.positionb.x);\n        _vec3_2.setY(details.positionb.y);\n        _vec3_2.setZ(details.positionb.z);\n\n        constraint = new Ammo.btPoint2PointConstraint(\n          _objects[details.objecta],\n          _objects[details.objectb],\n          _vec3_1,\n          _vec3_2\n        );\n      }\n      break;\n\n    case 'hinge':\n      if (details.objectb === undefined) {\n\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        _vec3_2.setX(details.axis.x);\n        _vec3_2.setY(details.axis.y);\n        _vec3_2.setZ(details.axis.z);\n\n        constraint = new Ammo.btHingeConstraint(\n          _objects[details.objecta],\n          _vec3_1,\n          _vec3_2\n        );\n      } else {\n\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        _vec3_2.setX(details.positionb.x);\n        _vec3_2.setY(details.positionb.y);\n        _vec3_2.setZ(details.positionb.z);\n\n        _vec3_3.setX(details.axis.x);\n        _vec3_3.setY(details.axis.y);\n        _vec3_3.setZ(details.axis.z);\n\n        constraint = new Ammo.btHingeConstraint(\n          _objects[details.objecta],\n          _objects[details.objectb],\n          _vec3_1,\n          _vec3_2,\n          _vec3_3,\n          _vec3_3\n        );\n      }\n      break;\n\n    case 'slider':\n      var transforma, transformb, rotation;\n\n      transforma = new Ammo.btTransform();\n\n      _vec3_1.setX(details.positiona.x);\n      _vec3_1.setY(details.positiona.y);\n      _vec3_1.setZ(details.positiona.z);\n\n      transforma.setOrigin(_vec3_1);\n\n      var rotation = transforma.getRotation();\n      rotation.setEuler(details.axis.x, details.axis.y, details.axis.z);\n      transforma.setRotation(rotation);\n\n      if (details.objectb) {\n        transformb = new Ammo.btTransform();\n\n        _vec3_2.setX(details.positionb.x);\n        _vec3_2.setY(details.positionb.y);\n        _vec3_2.setZ(details.positionb.z);\n\n        transformb.setOrigin(_vec3_2);\n\n        rotation = transformb.getRotation();\n        rotation.setEuler(details.axis.x, details.axis.y, details.axis.z);\n        transformb.setRotation(rotation);\n\n        constraint = new Ammo.btSliderConstraint(\n          _objects[details.objecta],\n          _objects[details.objectb],\n          transforma,\n          transformb,\n          true\n        );\n      } else {\n        constraint = new Ammo.btSliderConstraint(\n          _objects[details.objecta],\n          transforma,\n          true\n        );\n      }\n\n      Ammo.destroy(transforma);\n      if (transformb != undefined) {\n        Ammo.destroy(transformb);\n      }\n      break;\n\n    case 'conetwist':\n      var transforma, transformb;\n\n      transforma = new Ammo.btTransform();\n      transforma.setIdentity();\n\n      transformb = new Ammo.btTransform();\n      transformb.setIdentity();\n\n      _vec3_1.setX(details.positiona.x);\n      _vec3_1.setY(details.positiona.y);\n      _vec3_1.setZ(details.positiona.z);\n\n      _vec3_2.setX(details.positionb.x);\n      _vec3_2.setY(details.positionb.y);\n      _vec3_2.setZ(details.positionb.z);\n\n      transforma.setOrigin(_vec3_1);\n      transformb.setOrigin(_vec3_2);\n\n      var rotation = transforma.getRotation();\n      rotation.setEulerZYX(-details.axisa.z, -details.axisa.y, -details.axisa.x);\n      transforma.setRotation(rotation);\n\n      rotation = transformb.getRotation();\n      rotation.setEulerZYX(-details.axisb.z, -details.axisb.y, -details.axisb.x);\n      transformb.setRotation(rotation);\n\n      constraint = new Ammo.btConeTwistConstraint(\n        _objects[details.objecta],\n        _objects[details.objectb],\n        transforma,\n        transformb\n      );\n\n      constraint.setLimit(Math.PI, 0, Math.PI);\n\n      Ammo.destroy(transforma);\n      Ammo.destroy(transformb);\n\n      break;\n\n    case 'dof':\n      var transforma, transformb, rotation;\n\n      transforma = new Ammo.btTransform();\n      transforma.setIdentity();\n\n      _vec3_1.setX(details.positiona.x);\n      _vec3_1.setY(details.positiona.y);\n      _vec3_1.setZ(details.positiona.z);\n\n      transforma.setOrigin(_vec3_1);\n\n      rotation = transforma.getRotation();\n      rotation.setEulerZYX(-details.axisa.z, -details.axisa.y, -details.axisa.x);\n      transforma.setRotation(rotation);\n\n      if (details.objectb) {\n        transformb = new Ammo.btTransform();\n        transformb.setIdentity();\n\n        _vec3_2.setX(details.positionb.x);\n        _vec3_2.setY(details.positionb.y);\n        _vec3_2.setZ(details.positionb.z);\n\n        transformb.setOrigin(_vec3_2);\n\n        rotation = transformb.getRotation();\n        rotation.setEulerZYX(-details.axisb.z, -details.axisb.y, -details.axisb.x);\n        transformb.setRotation(rotation);\n\n        constraint = new Ammo.btGeneric6DofConstraint(\n          _objects[details.objecta],\n          _objects[details.objectb],\n          transforma,\n          transformb\n        );\n      } else {\n        constraint = new Ammo.btGeneric6DofConstraint(\n          _objects[details.objecta],\n          transforma\n        );\n      }\n      Ammo.destroy(transforma);\n      if (transformb != undefined) {\n        Ammo.destroy(transformb);\n      }\n      break;\n\n    default:\n      return;\n\n  };\n\n  world.addConstraint(constraint);\n\n  constraint.enableFeedback();\n  _constraints[details.id] = constraint;\n  _num_constraints++;\n\n  if (SUPPORT_TRANSFERABLE) {\n    constraintreport = new Float32Array(1 + _num_constraints * CONSTRAINTREPORT_ITEMSIZE); // message id & ( # of objects to report * # of values per object )\n    constraintreport[0] = MESSAGE_TYPES.CONSTRAINTREPORT;\n  } else {\n    constraintreport = [MESSAGE_TYPES.CONSTRAINTREPORT];\n  }\n};\n\npublic_functions.removeConstraint = function (details) {\n  var constraint = _constraints[details.id];\n  if (constraint !== undefined) {\n    world.removeConstraint(constraint);\n    delete _constraints[details.id];\n    _num_constraints--;\n  }\n};\n\npublic_functions.constraint_setBreakingImpulseThreshold = function (details) {\n  var constraint = _constraints[details.id];\n  if (constraint !== undefind) {\n    constraint.setBreakingImpulseThreshold(details.threshold);\n  }\n};\n\npublic_functions.simulate = function simulate(params) {\n  if (world) {\n    params = params || {};\n\n    if (!params.timeStep) {\n      if (last_simulation_time) {\n        params.timeStep = 0;\n        while (params.timeStep + last_simulation_duration <= fixedTimeStep) {\n          params.timeStep = (Date.now() - last_simulation_time) / 1000; // time since last simulation\n        }\n      } else {\n        params.timeStep = fixedTimeStep; // handle first frame\n      }\n    } else {\n      if (params.timeStep < fixedTimeStep) {\n        params.timeStep = fixedTimeStep;\n      }\n    }\n\n    params.maxSubSteps = params.maxSubSteps || Math.ceil(params.timeStep / fixedTimeStep); // If maxSubSteps is not defined, keep the simulation fully up to date\n\n    last_simulation_duration = Date.now();\n    world.stepSimulation(params.timeStep, params.maxSubSteps, fixedTimeStep);\n\n    reportVehicles();\n    reportCollisions();\n    reportConstraints();\n    reportWorld();\n\n    last_simulation_duration = (Date.now() - last_simulation_duration) / 1000;\n    last_simulation_time = Date.now();\n  }\n};\n\n\n// Constraint functions\npublic_functions.hinge_setLimits = function (params) {\n  _constraints[params.constraint].setLimit(params.low, params.high, 0, params.bias_factor, params.relaxation_factor);\n};\npublic_functions.hinge_enableAngularMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.enableAngularMotor(true, params.velocity, params.acceleration);\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.hinge_disableMotor = function (params) {\n  _constraints[params.constraint].enableMotor(false);\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\n\npublic_functions.slider_setLimits = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.setLowerLinLimit(params.lin_lower || 0);\n  constraint.setUpperLinLimit(params.lin_upper || 0);\n\n  constraint.setLowerAngLimit(params.ang_lower || 0);\n  constraint.setUpperAngLimit(params.ang_upper || 0);\n};\npublic_functions.slider_setRestitution = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.setSoftnessLimLin(params.linear || 0);\n  constraint.setSoftnessLimAng(params.angular || 0);\n};\npublic_functions.slider_enableLinearMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.setTargetLinMotorVelocity(params.velocity);\n  constraint.setMaxLinMotorForce(params.acceleration);\n  constraint.setPoweredLinMotor(true);\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.slider_disableLinearMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.setPoweredLinMotor(false);\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.slider_enableAngularMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.setTargetAngMotorVelocity(params.velocity);\n  constraint.setMaxAngMotorForce(params.acceleration);\n  constraint.setPoweredAngMotor(true);\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.slider_disableAngularMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.setPoweredAngMotor(false);\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\n\npublic_functions.conetwist_setLimit = function (params) {\n  _constraints[params.constraint].setLimit(params.z, params.y, params.x); // ZYX order\n};\npublic_functions.conetwist_enableMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.enableMotor(true);\n  constraint.getRigidBodyA().activate();\n  constraint.getRigidBodyB().activate();\n};\npublic_functions.conetwist_setMaxMotorImpulse = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.setMaxMotorImpulse(params.max_impulse);\n  constraint.getRigidBodyA().activate();\n  constraint.getRigidBodyB().activate();\n};\npublic_functions.conetwist_setMotorTarget = function (params) {\n  var constraint = _constraints[params.constraint];\n\n  _quat.setX(params.x);\n  _quat.setY(params.y);\n  _quat.setZ(params.z);\n  _quat.setW(params.w);\n\n  constraint.setMotorTarget(_quat);\n\n  constraint.getRigidBodyA().activate();\n  constraint.getRigidBodyB().activate();\n};\npublic_functions.conetwist_disableMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n  constraint.enableMotor(false);\n  constraint.getRigidBodyA().activate();\n  constraint.getRigidBodyB().activate();\n};\n\npublic_functions.dof_setLinearLowerLimit = function (params) {\n  var constraint = _constraints[params.constraint];\n\n  _vec3_1.setX(params.x);\n  _vec3_1.setY(params.y);\n  _vec3_1.setZ(params.z);\n\n  constraint.setLinearLowerLimit(_vec3_1);\n\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.dof_setLinearUpperLimit = function (params) {\n  var constraint = _constraints[params.constraint];\n\n  _vec3_1.setX(params.x);\n  _vec3_1.setY(params.y);\n  _vec3_1.setZ(params.z);\n\n  constraint.setLinearUpperLimit(_vec3_1);\n\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.dof_setAngularLowerLimit = function (params) {\n  var constraint = _constraints[params.constraint];\n\n  _vec3_1.setX(params.x);\n  _vec3_1.setY(params.y);\n  _vec3_1.setZ(params.z);\n\n  constraint.setAngularLowerLimit(_vec3_1);\n\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.dof_setAngularUpperLimit = function (params) {\n  var constraint = _constraints[params.constraint];\n\n  _vec3_1.setX(params.x);\n  _vec3_1.setY(params.y);\n  _vec3_1.setZ(params.z);\n\n  constraint.setAngularUpperLimit(_vec3_1);\n\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.dof_enableAngularMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n\n  var motor = constraint.getRotationalLimitMotor(params.which);\n  motor.set_m_enableMotor(true);\n\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.dof_configureAngularMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n\n  var motor = constraint.getRotationalLimitMotor(params.which);\n\n  motor.set_m_loLimit(params.low_angle);\n  motor.set_m_hiLimit(params.high_angle);\n  motor.set_m_targetVelocity(params.velocity);\n  motor.set_m_maxMotorForce(params.max_force);\n\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\npublic_functions.dof_disableAngularMotor = function (params) {\n  var constraint = _constraints[params.constraint];\n\n  var motor = constraint.getRotationalLimitMotor(params.which);\n  motor.set_m_enableMotor(false);\n\n  constraint.getRigidBodyA().activate();\n  if (constraint.getRigidBodyB()) {\n    constraint.getRigidBodyB().activate();\n  }\n};\n\nreportWorld = function () {\n  var index, object,\n    transform, origin, rotation,\n    offset = 0,\n    i = 0;\n\n  if (SUPPORT_TRANSFERABLE) {\n    if (worldreport.length < 2 + _num_objects * WORLDREPORT_ITEMSIZE) {\n      worldreport = new Float32Array(\n        2 + // message id & # objects in report\n        (Math.ceil(_num_objects / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * WORLDREPORT_ITEMSIZE // # of values needed * item size\n      );\n      worldreport[0] = MESSAGE_TYPES.WORLDREPORT;\n    }\n  }\n\n  worldreport[1] = _num_objects; // record how many objects we're reporting on\n\n  //for ( i = 0; i < worldreport[1]; i++ ) {\n  for (index in _objects) {\n    if (_objects.hasOwnProperty(index)) {\n      object = _objects[index];\n\n      // #TODO: we can't use center of mass transform when center of mass can change,\n      //        but getMotionState().getWorldTransform() screws up on objects that have been moved\n      //object.getMotionState().getWorldTransform( transform );\n      transform = object.getCenterOfMassTransform();\n\n      origin = transform.getOrigin();\n      rotation = transform.getRotation();\n\n      // add values to report\n      offset = 2 + (i++) * WORLDREPORT_ITEMSIZE;\n\n      worldreport[offset] = object.id;\n\n      worldreport[offset + 1] = origin.x();\n      worldreport[offset + 2] = origin.y();\n      worldreport[offset + 3] = origin.z();\n\n      worldreport[offset + 4] = rotation.x();\n      worldreport[offset + 5] = rotation.y();\n      worldreport[offset + 6] = rotation.z();\n      worldreport[offset + 7] = rotation.w();\n\n      _vector = object.getLinearVelocity();\n      worldreport[offset + 8] = _vector.x();\n      worldreport[offset + 9] = _vector.y();\n      worldreport[offset + 10] = _vector.z();\n\n      _vector = object.getAngularVelocity();\n      worldreport[offset + 11] = _vector.x();\n      worldreport[offset + 12] = _vector.y();\n      worldreport[offset + 13] = _vector.z();\n    }\n  }\n\n\n  if (SUPPORT_TRANSFERABLE) {\n    transferableMessage(worldreport.buffer, [worldreport.buffer]);\n  } else {\n    transferableMessage(worldreport);\n  }\n\n};\n\nreportCollisions = function () {\n  var i, offset,\n    dp = world.getDispatcher(),\n    num = dp.getNumManifolds(),\n    manifold, num_contacts, j, pt,\n    _collided = false;\n\n  if (SUPPORT_TRANSFERABLE) {\n    if (collisionreport.length < 2 + num * COLLISIONREPORT_ITEMSIZE) {\n      collisionreport = new Float32Array(\n        2 + // message id & # objects in report\n        (Math.ceil(_num_objects / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * COLLISIONREPORT_ITEMSIZE // # of values needed * item size\n      );\n      collisionreport[0] = MESSAGE_TYPES.COLLISIONREPORT;\n    }\n  }\n\n  collisionreport[1] = 0; // how many collisions we're reporting on\n\n  for (i = 0; i < num; i++) {\n    manifold = dp.getManifoldByIndexInternal(i);\n\n    num_contacts = manifold.getNumContacts();\n    if (num_contacts === 0) {\n      continue;\n    }\n\n    for (j = 0; j < num_contacts; j++) {\n      pt = manifold.getContactPoint(j);\n      //if ( pt.getDistance() < 0 ) {\n      offset = 2 + (collisionreport[1]++) * COLLISIONREPORT_ITEMSIZE;\n      collisionreport[offset] = _objects_ammo[manifold.getBody0()];\n      collisionreport[offset + 1] = _objects_ammo[manifold.getBody1()];\n\n      _vector = pt.get_m_normalWorldOnB();\n      collisionreport[offset + 2] = _vector.x();\n      collisionreport[offset + 3] = _vector.y();\n      collisionreport[offset + 4] = _vector.z();\n      break;\n      //}\n\n      transferableMessage(_objects_ammo);\n\n    }\n  }\n\n\n  if (SUPPORT_TRANSFERABLE) {\n    transferableMessage(collisionreport.buffer, [collisionreport.buffer]);\n  } else {\n    transferableMessage(collisionreport);\n  }\n};\n\nreportVehicles = function () {\n  var index, vehicle,\n    transform, origin, rotation,\n    offset = 0,\n    i = 0, j = 0;\n\n  if (SUPPORT_TRANSFERABLE) {\n    if (vehiclereport.length < 2 + _num_wheels * VEHICLEREPORT_ITEMSIZE) {\n      vehiclereport = new Float32Array(\n        2 + // message id & # objects in report\n        (Math.ceil(_num_wheels / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * VEHICLEREPORT_ITEMSIZE // # of values needed * item size\n      );\n      vehiclereport[0] = MESSAGE_TYPES.VEHICLEREPORT;\n    }\n  }\n\n  for (index in _vehicles) {\n    if (_vehicles.hasOwnProperty(index)) {\n      vehicle = _vehicles[index];\n\n      for (j = 0; j < vehicle.getNumWheels(); j++) {\n\n        //vehicle.updateWheelTransform( j, true );\n\n        //transform = vehicle.getWheelTransformWS( j );\n        transform = vehicle.getWheelInfo(j).get_m_worldTransform();\n\n        origin = transform.getOrigin();\n        rotation = transform.getRotation();\n\n        // add values to report\n        offset = 1 + (i++) * VEHICLEREPORT_ITEMSIZE;\n\n        vehiclereport[offset] = index;\n        vehiclereport[offset + 1] = j;\n\n        vehiclereport[offset + 2] = origin.x();\n        vehiclereport[offset + 3] = origin.y();\n        vehiclereport[offset + 4] = origin.z();\n\n        vehiclereport[offset + 5] = rotation.x();\n        vehiclereport[offset + 6] = rotation.y();\n        vehiclereport[offset + 7] = rotation.z();\n        vehiclereport[offset + 8] = rotation.w();\n\n      }\n\n    }\n  }\n\n  if (j !== 0) {\n    if (SUPPORT_TRANSFERABLE) {\n      transferableMessage(vehiclereport.buffer, [vehiclereport.buffer]);\n    } else {\n      transferableMessage(vehiclereport);\n    }\n  }\n};\n\nreportConstraints = function () {\n  var index, constraint,\n    offset_body,\n    transform, origin,\n    offset = 0,\n    i = 0;\n\n  if (SUPPORT_TRANSFERABLE) {\n    if (constraintreport.length < 2 + _num_constraints * CONSTRAINTREPORT_ITEMSIZE) {\n      constraintreport = new Float32Array(\n        2 + // message id & # objects in report\n        (Math.ceil(_num_constraints / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * CONSTRAINTREPORT_ITEMSIZE // # of values needed * item size\n      );\n      constraintreport[0] = MESSAGE_TYPES.CONSTRAINTREPORT;\n    }\n  }\n\n  for (index in _constraints) {\n    if (_constraints.hasOwnProperty(index)) {\n      constraint = _constraints[index];\n      offset_body = constraint.getRigidBodyA();\n      transform = constraint.getFrameOffsetA();\n      origin = transform.getOrigin();\n\n      // add values to report\n      offset = 1 + (i++) * CONSTRAINTREPORT_ITEMSIZE;\n\n      constraintreport[offset] = index;\n      constraintreport[offset + 1] = offset_body.id;\n      constraintreport[offset + 2] = origin.getX();\n      constraintreport[offset + 3] = origin.getY();\n      constraintreport[offset + 4] = origin.getZ();\n      constraintreport[offset + 5] = constraint.getAppliedImpulse();\n    }\n  }\n\n\n  if (i !== 0) {\n    if (SUPPORT_TRANSFERABLE) {\n      transferableMessage(constraintreport.buffer, [constraintreport.buffer]);\n    } else {\n      transferableMessage(constraintreport);\n    }\n  }\n\n};\n\nself.onmessage = function (event) {\n\n  if (event.data instanceof Float32Array) {\n    // transferable object\n\n    switch (event.data[0]) {\n      case MESSAGE_TYPES.WORLDREPORT:\n        worldreport = new Float32Array(event.data);\n        break;\n\n      case MESSAGE_TYPES.COLLISIONREPORT:\n        collisionreport = new Float32Array(event.data);\n        break;\n\n      case MESSAGE_TYPES.VEHICLEREPORT:\n        vehiclereport = new Float32Array(event.data);\n        break;\n\n      case MESSAGE_TYPES.CONSTRAINTREPORT:\n        constraintreport = new Float32Array(event.data);\n        break;\n    }\n\n    return;\n  }\n\n  if (event.data.cmd && public_functions[event.data.cmd]) {\n    //if ( event.data.params.id !== undefined && _objects[event.data.params.id] === undefined && event.data.cmd !== 'addObject' && event.data.cmd !== 'registerMaterial' ) return;\n    public_functions[event.data.cmd](event.data.params);\n  }\n\n};\n\nwindow.Physijs = (function () {\n  'use strict';\n\n  var SUPPORT_TRANSFERABLE,\n    _is_simulating = false,\n    _Physijs = Physijs, // used for noConflict method\n    Physijs = {}, // object assigned to window.Physijs\n    Eventable, // class to provide simple event methods\n    getObjectId, // returns a unique ID for a Physijs mesh object\n    getEulerXYZFromQuaternion, getQuatertionFromEuler,\n    convertWorldPositionToObject, // Converts a world-space position to object-space\n    addObjectChildren,\n\n    _temp1, _temp2,\n    _temp_vector3_1 = new THREE.Vector3,\n    _temp_vector3_2 = new THREE.Vector3,\n    _temp_matrix4_1 = new THREE.Matrix4,\n    _quaternion_1 = new THREE.Quaternion,\n\n    // constants\n    MESSAGE_TYPES = {\n      WORLDREPORT: 0,\n      COLLISIONREPORT: 1,\n      VEHICLEREPORT: 2,\n      CONSTRAINTREPORT: 3\n    },\n    REPORT_ITEMSIZE = 14,\n    COLLISIONREPORT_ITEMSIZE = 5,\n    VEHICLEREPORT_ITEMSIZE = 9,\n    CONSTRAINTREPORT_ITEMSIZE = 6;\n\n  Physijs.scripts = {};\n\n  Eventable = function () {\n    this._eventListeners = {};\n  };\n  Eventable.prototype.addEventListener = function (event_name, callback) {\n    if (!this._eventListeners.hasOwnProperty(event_name)) {\n      this._eventListeners[event_name] = [];\n    }\n    this._eventListeners[event_name].push(callback);\n  };\n  Eventable.prototype.removeEventListener = function (event_name, callback) {\n    var index;\n\n    if (!this._eventListeners.hasOwnProperty(event_name)) return false;\n\n    if ((index = this._eventListeners[event_name].indexOf(callback)) >= 0) {\n      this._eventListeners[event_name].splice(index, 1);\n      return true;\n    }\n\n    return false;\n  };\n  Eventable.prototype.dispatchEvent = function (event_name) {\n    var i,\n      parameters = Array.prototype.splice.call(arguments, 1);\n\n    if (this._eventListeners.hasOwnProperty(event_name)) {\n      for (i = 0; i < this._eventListeners[event_name].length; i++) {\n        this._eventListeners[event_name][i].apply(this, parameters);\n      }\n    }\n  };\n  Eventable.make = function (obj) {\n    obj.prototype.addEventListener = Eventable.prototype.addEventListener;\n    obj.prototype.removeEventListener = Eventable.prototype.removeEventListener;\n    obj.prototype.dispatchEvent = Eventable.prototype.dispatchEvent;\n  };\n\n  getObjectId = (function () {\n    var _id = 1;\n    return function () {\n      return _id++;\n    };\n  })();\n\n  getEulerXYZFromQuaternion = function (x, y, z, w) {\n    return new THREE.Vector3(\n      Math.atan2(2 * (x * w - y * z), (w * w - x * x - y * y + z * z)),\n      Math.asin(2 * (x * z + y * w)),\n      Math.atan2(2 * (z * w - x * y), (w * w + x * x - y * y - z * z))\n    );\n  };\n\n  getQuatertionFromEuler = function (x, y, z) {\n    var c1, s1, c2, s2, c3, s3, c1c2, s1s2;\n    c1 = Math.cos(y);\n    s1 = Math.sin(y);\n    c2 = Math.cos(-z);\n    s2 = Math.sin(-z);\n    c3 = Math.cos(x);\n    s3 = Math.sin(x);\n\n    c1c2 = c1 * c2;\n    s1s2 = s1 * s2;\n\n    return {\n      w: c1c2 * c3 - s1s2 * s3,\n      x: c1c2 * s3 + s1s2 * c3,\n      y: s1 * c2 * c3 + c1 * s2 * s3,\n      z: c1 * s2 * c3 - s1 * c2 * s3\n    };\n  };\n\n  convertWorldPositionToObject = function (position, object) {\n    _temp_matrix4_1.identity(); // reset temp matrix\n\n    // Set the temp matrix's rotation to the object's rotation\n    _temp_matrix4_1.identity().makeRotationFromQuaternion(object.quaternion);\n\n    // Invert rotation matrix in order to \"unrotate\" a point back to object space\n    _temp_matrix4_1.getInverse(_temp_matrix4_1);\n\n    // Yay! Temp vars!\n    _temp_vector3_1.copy(position);\n    _temp_vector3_2.copy(object.position);\n\n    // Apply the rotation\n\n    return _temp_vector3_1.sub(_temp_vector3_2).applyMatrix4(_temp_matrix4_1);\n  };\n\n\n\n  // Physijs.noConflict\n  Physijs.noConflict = function () {\n    window.Physijs = _Physijs;\n    return Physijs;\n  };\n\n\n  // Physijs.createMaterial\n  Physijs.createMaterial = function (material, friction, restitution) {\n    var physijs_material = function () { };\n    physijs_material.prototype = material;\n    physijs_material = new physijs_material;\n\n    physijs_material._physijs = {\n      id: material.id,\n      friction: friction === undefined ? .8 : friction,\n      restitution: restitution === undefined ? .2 : restitution\n    };\n\n    return physijs_material;\n  };\n\n\n  // Constraints\n  Physijs.PointConstraint = function (objecta, objectb, position) {\n    if (position === undefined) {\n      position = objectb;\n      objectb = undefined;\n    }\n\n    this.type = 'point';\n    this.appliedImpulse = 0;\n    this.id = getObjectId();\n    this.objecta = objecta._physijs.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n\n    if (objectb) {\n      this.objectb = objectb._physijs.id;\n      this.positionb = convertWorldPositionToObject(position, objectb).clone();\n    }\n  };\n  Physijs.PointConstraint.prototype.getDefinition = function () {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb\n    };\n  };\n\n  Physijs.HingeConstraint = function (objecta, objectb, position, axis) {\n    if (axis === undefined) {\n      axis = position;\n      position = objectb;\n      objectb = undefined;\n    }\n\n    this.type = 'hinge';\n    this.appliedImpulse = 0;\n    this.id = getObjectId();\n    this.scene = objecta.parent;\n    this.objecta = objecta._physijs.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n    this.position = position.clone();\n    this.axis = axis;\n\n    if (objectb) {\n      this.objectb = objectb._physijs.id;\n      this.positionb = convertWorldPositionToObject(position, objectb).clone();\n    }\n  };\n  Physijs.HingeConstraint.prototype.getDefinition = function () {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb,\n      axis: this.axis\n    };\n  };\n\t/*\n\t * low = minimum angle in radians\n\t * high = maximum angle in radians\n\t * bias_factor = applied as a factor to constraint error\n\t * relaxation_factor = controls bounce (0.0 == no bounce)\n\t */\n  Physijs.HingeConstraint.prototype.setLimits = function (low, high, bias_factor, relaxation_factor) {\n    this.scene.execute('hinge_setLimits', { constraint: this.id, low: low, high: high, bias_factor: bias_factor, relaxation_factor: relaxation_factor });\n  };\n  Physijs.HingeConstraint.prototype.enableAngularMotor = function (velocity, acceleration) {\n    this.scene.execute('hinge_enableAngularMotor', { constraint: this.id, velocity: velocity, acceleration: acceleration });\n  };\n  Physijs.HingeConstraint.prototype.disableMotor = function (velocity, acceleration) {\n    this.scene.execute('hinge_disableMotor', { constraint: this.id });\n  };\n\n  Physijs.SliderConstraint = function (objecta, objectb, position, axis) {\n    if (axis === undefined) {\n      axis = position;\n      position = objectb;\n      objectb = undefined;\n    }\n\n    this.type = 'slider';\n    this.appliedImpulse = 0;\n    this.id = getObjectId();\n    this.scene = objecta.parent;\n    this.objecta = objecta._physijs.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n    this.axis = axis;\n\n    if (objectb) {\n      this.objectb = objectb._physijs.id;\n      this.positionb = convertWorldPositionToObject(position, objectb).clone();\n    }\n  };\n  Physijs.SliderConstraint.prototype.getDefinition = function () {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb,\n      axis: this.axis\n    };\n  };\n  Physijs.SliderConstraint.prototype.setLimits = function (lin_lower, lin_upper, ang_lower, ang_upper) {\n    this.scene.execute('slider_setLimits', { constraint: this.id, lin_lower: lin_lower, lin_upper: lin_upper, ang_lower: ang_lower, ang_upper: ang_upper });\n  };\n  Physijs.SliderConstraint.prototype.setRestitution = function (linear, angular) {\n    this.scene.execute(\n      'slider_setRestitution',\n      {\n        constraint: this.id,\n        linear: linear,\n        angular: angular\n      }\n    );\n  };\n  Physijs.SliderConstraint.prototype.enableLinearMotor = function (velocity, acceleration) {\n    this.scene.execute('slider_enableLinearMotor', { constraint: this.id, velocity: velocity, acceleration: acceleration });\n  };\n  Physijs.SliderConstraint.prototype.disableLinearMotor = function () {\n    this.scene.execute('slider_disableLinearMotor', { constraint: this.id });\n  };\n  Physijs.SliderConstraint.prototype.enableAngularMotor = function (velocity, acceleration) {\n    this.scene.execute('slider_enableAngularMotor', { constraint: this.id, velocity: velocity, acceleration: acceleration });\n  };\n  Physijs.SliderConstraint.prototype.disableAngularMotor = function () {\n    this.scene.execute('slider_disableAngularMotor', { constraint: this.id });\n  };\n\n  Physijs.ConeTwistConstraint = function (objecta, objectb, position) {\n    if (position === undefined) {\n      throw 'Both objects must be defined in a ConeTwistConstraint.';\n    }\n    this.type = 'conetwist';\n    this.appliedImpulse = 0;\n    this.id = getObjectId();\n    this.scene = objecta.parent;\n    this.objecta = objecta._physijs.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n    this.objectb = objectb._physijs.id;\n    this.positionb = convertWorldPositionToObject(position, objectb).clone();\n    this.axisa = { x: objecta.rotation.x, y: objecta.rotation.y, z: objecta.rotation.z };\n    this.axisb = { x: objectb.rotation.x, y: objectb.rotation.y, z: objectb.rotation.z };\n  };\n  Physijs.ConeTwistConstraint.prototype.getDefinition = function () {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb,\n      axisa: this.axisa,\n      axisb: this.axisb\n    };\n  };\n  Physijs.ConeTwistConstraint.prototype.setLimit = function (x, y, z) {\n    this.scene.execute('conetwist_setLimit', { constraint: this.id, x: x, y: y, z: z });\n  };\n  Physijs.ConeTwistConstraint.prototype.enableMotor = function () {\n    this.scene.execute('conetwist_enableMotor', { constraint: this.id });\n  };\n  Physijs.ConeTwistConstraint.prototype.setMaxMotorImpulse = function (max_impulse) {\n    this.scene.execute('conetwist_setMaxMotorImpulse', { constraint: this.id, max_impulse: max_impulse });\n  };\n  Physijs.ConeTwistConstraint.prototype.setMotorTarget = function (target) {\n    if (target instanceof THREE.Vector3) {\n      target = new THREE.Quaternion().setFromEuler(new THREE.Euler(target.x, target.y, target.z));\n    } else if (target instanceof THREE.Euler) {\n      target = new THREE.Quaternion().setFromEuler(target);\n    } else if (target instanceof THREE.Matrix4) {\n      target = new THREE.Quaternion().setFromRotationMatrix(target);\n    }\n    this.scene.execute('conetwist_setMotorTarget', { constraint: this.id, x: target.x, y: target.y, z: target.z, w: target.w });\n  };\n  Physijs.ConeTwistConstraint.prototype.disableMotor = function () {\n    this.scene.execute('conetwist_disableMotor', { constraint: this.id });\n  };\n\n  Physijs.DOFConstraint = function (objecta, objectb, position) {\n    if (position === undefined) {\n      position = objectb;\n      objectb = undefined;\n    }\n    this.type = 'dof';\n    this.appliedImpulse = 0;\n    this.id = getObjectId();\n    this.scene = objecta.parent;\n    this.objecta = objecta._physijs.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n    this.axisa = { x: objecta.rotation.x, y: objecta.rotation.y, z: objecta.rotation.z };\n\n    if (objectb) {\n      this.objectb = objectb._physijs.id;\n      this.positionb = convertWorldPositionToObject(position, objectb).clone();\n      this.axisb = { x: objectb.rotation.x, y: objectb.rotation.y, z: objectb.rotation.z };\n    }\n  };\n  Physijs.DOFConstraint.prototype.getDefinition = function () {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb,\n      axisa: this.axisa,\n      axisb: this.axisb\n    };\n  };\n  Physijs.DOFConstraint.prototype.setLinearLowerLimit = function (limit) {\n    this.scene.execute('dof_setLinearLowerLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z });\n  };\n  Physijs.DOFConstraint.prototype.setLinearUpperLimit = function (limit) {\n    this.scene.execute('dof_setLinearUpperLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z });\n  };\n  Physijs.DOFConstraint.prototype.setAngularLowerLimit = function (limit) {\n    this.scene.execute('dof_setAngularLowerLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z });\n  };\n  Physijs.DOFConstraint.prototype.setAngularUpperLimit = function (limit) {\n    this.scene.execute('dof_setAngularUpperLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z });\n  };\n  Physijs.DOFConstraint.prototype.enableAngularMotor = function (which) {\n    this.scene.execute('dof_enableAngularMotor', { constraint: this.id, which: which });\n  };\n  Physijs.DOFConstraint.prototype.configureAngularMotor = function (which, low_angle, high_angle, velocity, max_force) {\n    this.scene.execute('dof_configureAngularMotor', { constraint: this.id, which: which, low_angle: low_angle, high_angle: high_angle, velocity: velocity, max_force: max_force });\n  };\n  Physijs.DOFConstraint.prototype.disableAngularMotor = function (which) {\n    this.scene.execute('dof_disableAngularMotor', { constraint: this.id, which: which });\n  };\n\n  // Physijs.Scene\n  Physijs.Scene = function (params) {\n    var self = this;\n\n    Eventable.call(this);\n    THREE.Scene.call(this);\n\n    this._worker = new Worker(Physijs.scripts.worker || 'physijs_worker.js');\n    this._worker.transferableMessage = this._worker.webkitPostMessage || this._worker.postMessage;\n    this._materials_ref_counts = {};\n    this._objects = {};\n    this._vehicles = {};\n    this._constraints = {};\n\n    var ab = new ArrayBuffer(1);\n    this._worker.transferableMessage(ab, [ab]);\n    SUPPORT_TRANSFERABLE = (ab.byteLength === 0);\n\n    this._worker.onmessage = function (event) {\n      var _temp,\n        data = event.data;\n\n      if (data instanceof ArrayBuffer && data.byteLength !== 1) { // byteLength === 1 is the worker making a SUPPORT_TRANSFERABLE test\n        data = new Float32Array(data);\n      }\n\n      if (data instanceof Float32Array) {\n\n        // transferable object\n        switch (data[0]) {\n          case MESSAGE_TYPES.WORLDREPORT:\n            self._updateScene(data);\n            break;\n\n          case MESSAGE_TYPES.COLLISIONREPORT:\n            self._updateCollisions(data);\n            break;\n\n          case MESSAGE_TYPES.VEHICLEREPORT:\n            self._updateVehicles(data);\n            break;\n\n          case MESSAGE_TYPES.CONSTRAINTREPORT:\n            self._updateConstraints(data);\n            break;\n        }\n\n      } else {\n\n        if (data.cmd) {\n\n          // non-transferable object\n          switch (data.cmd) {\n            case 'objectReady':\n              _temp = data.params;\n              if (self._objects[_temp]) {\n                self._objects[_temp].dispatchEvent('ready');\n              }\n              break;\n\n            case 'worldReady':\n              self.dispatchEvent('ready');\n              break;\n\n            case 'vehicle':\n              window.test = data;\n              break;\n\n            default:\n              // Do nothing, just show the message\n              console.debug('Received: ' + data.cmd);\n              console.dir(data.params);\n              break;\n          }\n\n        } else {\n\n          switch (data[0]) {\n            case MESSAGE_TYPES.WORLDREPORT:\n              self._updateScene(data);\n              break;\n\n            case MESSAGE_TYPES.COLLISIONREPORT:\n              self._updateCollisions(data);\n              break;\n\n            case MESSAGE_TYPES.VEHICLEREPORT:\n              self._updateVehicles(data);\n              break;\n\n            case MESSAGE_TYPES.CONSTRAINTREPORT:\n              self._updateConstraints(data);\n              break;\n          }\n\n        }\n\n      }\n    };\n\n\n    params = params || {};\n    params.ammo = Physijs.scripts.ammo || 'ammo.js';\n    params.fixedTimeStep = params.fixedTimeStep || 1 / 60;\n    params.rateLimit = params.rateLimit || true;\n    this.execute('init', params);\n  };\n  Physijs.Scene.prototype = new THREE.Scene;\n  Physijs.Scene.prototype.constructor = Physijs.Scene;\n  Eventable.make(Physijs.Scene);\n\n  Physijs.Scene.prototype._updateScene = function (data) {\n    var num_objects = data[1],\n      object,\n      i, offset;\n\n    for (i = 0; i < num_objects; i++) {\n      offset = 2 + i * REPORT_ITEMSIZE;\n      object = this._objects[data[offset]];\n\n      if (object === undefined) {\n        continue;\n      }\n\n      if (object.__dirtyPosition === false) {\n        object.position.set(\n          data[offset + 1],\n          data[offset + 2],\n          data[offset + 3]\n        );\n      }\n\n      if (object.__dirtyRotation === false) {\n        object.quaternion.set(\n          data[offset + 4],\n          data[offset + 5],\n          data[offset + 6],\n          data[offset + 7]\n        );\n      }\n\n      object._physijs.linearVelocity.set(\n        data[offset + 8],\n        data[offset + 9],\n        data[offset + 10]\n      );\n\n      object._physijs.angularVelocity.set(\n        data[offset + 11],\n        data[offset + 12],\n        data[offset + 13]\n      );\n\n    }\n\n    if (SUPPORT_TRANSFERABLE) {\n      // Give the typed array back to the worker\n      this._worker.transferableMessage(data.buffer, [data.buffer]);\n    }\n\n    _is_simulating = false;\n    this.dispatchEvent('update');\n  };\n\n  Physijs.Scene.prototype._updateVehicles = function (data) {\n    var vehicle, wheel,\n      i, offset;\n\n    for (i = 0; i < (data.length - 1) / VEHICLEREPORT_ITEMSIZE; i++) {\n      offset = 1 + i * VEHICLEREPORT_ITEMSIZE;\n      vehicle = this._vehicles[data[offset]];\n\n      if (vehicle === undefined) {\n        continue;\n      }\n\n      wheel = vehicle.wheels[data[offset + 1]];\n\n      wheel.position.set(\n        data[offset + 2],\n        data[offset + 3],\n        data[offset + 4]\n      );\n\n      wheel.quaternion.set(\n        data[offset + 5],\n        data[offset + 6],\n        data[offset + 7],\n        data[offset + 8]\n      );\n    }\n\n    if (SUPPORT_TRANSFERABLE) {\n      // Give the typed array back to the worker\n      this._worker.transferableMessage(data.buffer, [data.buffer]);\n    }\n  };\n\n  Physijs.Scene.prototype._updateConstraints = function (data) {\n    var constraint, object,\n      i, offset;\n\n    for (i = 0; i < (data.length - 1) / CONSTRAINTREPORT_ITEMSIZE; i++) {\n      offset = 1 + i * CONSTRAINTREPORT_ITEMSIZE;\n      constraint = this._constraints[data[offset]];\n      object = this._objects[data[offset + 1]];\n\n      if (constraint === undefined || object === undefined) {\n        continue;\n      }\n\n      _temp_vector3_1.set(\n        data[offset + 2],\n        data[offset + 3],\n        data[offset + 4]\n      );\n      _temp_matrix4_1.extractRotation(object.matrix);\n      _temp_vector3_1.applyMatrix4(_temp_matrix4_1);\n\n      constraint.positiona.addVectors(object.position, _temp_vector3_1);\n      constraint.appliedImpulse = data[offset + 5];\n    }\n\n    if (SUPPORT_TRANSFERABLE) {\n      // Give the typed array back to the worker\n      this._worker.transferableMessage(data.buffer, [data.buffer]);\n    }\n  };\n\n  Physijs.Scene.prototype._updateCollisions = function (data) {\n\t\t/**\n\t\t * #TODO\n\t\t * This is probably the worst way ever to handle collisions. The inherent evilness is a residual\n\t\t * effect from the previous version's evilness which mutated when switching to transferable objects.\n\t\t *\n\t\t * If you feel inclined to make this better, please do so.\n\t\t */\n\n    var i, j, offset, object, object2, id1, id2,\n      collisions = {}, normal_offsets = {};\n\n    // Build collision manifest\n    for (i = 0; i < data[1]; i++) {\n      offset = 2 + i * COLLISIONREPORT_ITEMSIZE;\n      object = data[offset];\n      object2 = data[offset + 1];\n\n      normal_offsets[object + '-' + object2] = offset + 2;\n      normal_offsets[object2 + '-' + object] = -1 * (offset + 2);\n\n      // Register collisions for both the object colliding and the object being collided with\n      if (!collisions[object]) collisions[object] = [];\n      collisions[object].push(object2);\n\n      if (!collisions[object2]) collisions[object2] = [];\n      collisions[object2].push(object);\n    }\n\n    // Deal with collisions\n    for (id1 in this._objects) {\n      if (!this._objects.hasOwnProperty(id1)) continue;\n      object = this._objects[id1];\n\n      // If object touches anything, ...\n      if (collisions[id1]) {\n\n        // Clean up touches array\n        for (j = 0; j < object._physijs.touches.length; j++) {\n          if (collisions[id1].indexOf(object._physijs.touches[j]) === -1) {\n            object._physijs.touches.splice(j--, 1);\n          }\n        }\n\n        // Handle each colliding object\n        for (j = 0; j < collisions[id1].length; j++) {\n          id2 = collisions[id1][j];\n          object2 = this._objects[id2];\n\n          if (object2) {\n            // If object was not already touching object2, notify object\n            if (object._physijs.touches.indexOf(id2) === -1) {\n              object._physijs.touches.push(id2);\n\n              _temp_vector3_1.subVectors(object.getLinearVelocity(), object2.getLinearVelocity());\n              _temp1 = _temp_vector3_1.clone();\n\n              _temp_vector3_1.subVectors(object.getAngularVelocity(), object2.getAngularVelocity());\n              _temp2 = _temp_vector3_1.clone();\n\n              var normal_offset = normal_offsets[object._physijs.id + '-' + object2._physijs.id];\n              if (normal_offset > 0) {\n                _temp_vector3_1.set(\n                  -data[normal_offset],\n                  -data[normal_offset + 1],\n                  -data[normal_offset + 2]\n                );\n              } else {\n                normal_offset *= -1;\n                _temp_vector3_1.set(\n                  data[normal_offset],\n                  data[normal_offset + 1],\n                  data[normal_offset + 2]\n                );\n              }\n\n              object.dispatchEvent('collision', object2, _temp1, _temp2, _temp_vector3_1);\n            }\n          }\n        }\n\n      } else {\n\n        // not touching other objects\n        object._physijs.touches.length = 0;\n\n      }\n\n    }\n\n    this.collisions = collisions;\n\n    if (SUPPORT_TRANSFERABLE) {\n      // Give the typed array back to the worker\n      this._worker.transferableMessage(data.buffer, [data.buffer]);\n    }\n  };\n\n  Physijs.Scene.prototype.addConstraint = function (constraint, show_marker) {\n    this._constraints[constraint.id] = constraint;\n    this.execute('addConstraint', constraint.getDefinition());\n\n    if (show_marker) {\n      var marker;\n\n      switch (constraint.type) {\n        case 'point':\n          marker = new THREE.Mesh(\n            new THREE.SphereGeometry(1.5),\n            new THREE.MeshNormalMaterial\n          );\n          marker.position.copy(constraint.positiona);\n          this._objects[constraint.objecta].add(marker);\n          break;\n\n        case 'hinge':\n          marker = new THREE.Mesh(\n            new THREE.SphereGeometry(1.5),\n            new THREE.MeshNormalMaterial\n          );\n          marker.position.copy(constraint.positiona);\n          this._objects[constraint.objecta].add(marker);\n          break;\n\n        case 'slider':\n          marker = new THREE.Mesh(\n            new THREE.BoxGeometry(10, 1, 1),\n            new THREE.MeshNormalMaterial\n          );\n          marker.position.copy(constraint.positiona);\n          // This rotation isn't right if all three axis are non-0 values\n          // TODO: change marker's rotation order to ZYX\n          marker.rotation.set(\n            constraint.axis.y, // yes, y and\n            constraint.axis.x, // x axis are swapped\n            constraint.axis.z\n          );\n          this._objects[constraint.objecta].add(marker);\n          break;\n\n        case 'conetwist':\n          marker = new THREE.Mesh(\n            new THREE.SphereGeometry(1.5),\n            new THREE.MeshNormalMaterial\n          );\n          marker.position.copy(constraint.positiona);\n          this._objects[constraint.objecta].add(marker);\n          break;\n\n        case 'dof':\n          marker = new THREE.Mesh(\n            new THREE.SphereGeometry(1.5),\n            new THREE.MeshNormalMaterial\n          );\n          marker.position.copy(constraint.positiona);\n          this._objects[constraint.objecta].add(marker);\n          break;\n      }\n    }\n\n    return constraint;\n  };\n\n  Physijs.Scene.prototype.onSimulationResume = function () {\n    this.execute('onSimulationResume', {});\n  };\n\n  Physijs.Scene.prototype.removeConstraint = function (constraint) {\n    if (this._constraints[constraint.id] !== undefined) {\n      this.execute('removeConstraint', { id: constraint.id });\n      delete this._constraints[constraint.id];\n    }\n  };\n\n  Physijs.Scene.prototype.execute = function (cmd, params) {\n    this._worker.postMessage({ cmd: cmd, params: params });\n  };\n\n  addObjectChildren = function (parent, object) {\n    var i;\n\n    for (i = 0; i < object.children.length; i++) {\n      if (object.children[i]._physijs) {\n        object.children[i].updateMatrix();\n        object.children[i].updateMatrixWorld();\n\n        _temp_vector3_1.setFromMatrixPosition(object.children[i].matrixWorld);\n        _quaternion_1.setFromRotationMatrix(object.children[i].matrixWorld);\n\n        object.children[i]._physijs.position_offset = {\n          x: _temp_vector3_1.x,\n          y: _temp_vector3_1.y,\n          z: _temp_vector3_1.z\n        };\n\n        object.children[i]._physijs.rotation = {\n          x: _quaternion_1.x,\n          y: _quaternion_1.y,\n          z: _quaternion_1.z,\n          w: _quaternion_1.w\n        };\n\n        parent._physijs.children.push(object.children[i]._physijs);\n      }\n\n      addObjectChildren(parent, object.children[i]);\n    }\n  };\n\n  Physijs.Scene.prototype.add = function (object) {\n    THREE.Mesh.prototype.add.call(this, object);\n\n    if (object._physijs) {\n\n      object.world = this;\n\n      if (object instanceof Physijs.Vehicle) {\n\n        this.add(object.mesh);\n        this._vehicles[object._physijs.id] = object;\n        this.execute('addVehicle', object._physijs);\n\n      } else {\n\n        object.__dirtyPosition = false;\n        object.__dirtyRotation = false;\n        this._objects[object._physijs.id] = object;\n\n        if (object.children.length) {\n          object._physijs.children = [];\n          addObjectChildren(object, object);\n        }\n\n        if (object.material._physijs) {\n          if (!this._materials_ref_counts.hasOwnProperty(object.material._physijs.id)) {\n            this.execute('registerMaterial', object.material._physijs);\n            object._physijs.materialId = object.material._physijs.id;\n            this._materials_ref_counts[object.material._physijs.id] = 1;\n          } else {\n            this._materials_ref_counts[object.material._physijs.id]++;\n          }\n        }\n\n        // Object starting position + rotation\n        object._physijs.position = { x: object.position.x, y: object.position.y, z: object.position.z };\n        object._physijs.rotation = { x: object.quaternion.x, y: object.quaternion.y, z: object.quaternion.z, w: object.quaternion.w };\n\n        // Check for scaling\n        var mass_scaling = new THREE.Vector3(1, 1, 1);\n        if (object._physijs.width) {\n          object._physijs.width *= object.scale.x;\n        }\n        if (object._physijs.height) {\n          object._physijs.height *= object.scale.y;\n        }\n        if (object._physijs.depth) {\n          object._physijs.depth *= object.scale.z;\n        }\n\n        this.execute('addObject', object._physijs);\n\n      }\n    }\n  };\n\n  Physijs.Scene.prototype.remove = function (object) {\n    if (object instanceof Physijs.Vehicle) {\n      this.execute('removeVehicle', { id: object._physijs.id });\n      while (object.wheels.length) {\n        this.remove(object.wheels.pop());\n      }\n      this.remove(object.mesh);\n      delete this._vehicles[object._physijs.id];\n    } else {\n      THREE.Mesh.prototype.remove.call(this, object);\n      if (object._physijs) {\n        delete this._objects[object._physijs.id];\n        this.execute('removeObject', { id: object._physijs.id });\n      }\n    }\n    if (object.material && object.material._physijs && this._materials_ref_counts.hasOwnProperty(object.material._physijs.id)) {\n      this._materials_ref_counts[object.material._physijs.id]--;\n      if (this._materials_ref_counts[object.material._physijs.id] == 0) {\n        this.execute('unRegisterMaterial', object.material._physijs);\n        delete this._materials_ref_counts[object.material._physijs.id];\n      }\n    }\n  };\n\n  Physijs.Scene.prototype.setFixedTimeStep = function (fixedTimeStep) {\n    if (fixedTimeStep) {\n      this.execute('setFixedTimeStep', fixedTimeStep);\n    }\n  };\n\n  Physijs.Scene.prototype.setGravity = function (gravity) {\n    if (gravity) {\n      this.execute('setGravity', gravity);\n    }\n  };\n\n  Physijs.Scene.prototype.simulate = function (timeStep, maxSubSteps) {\n    var object_id, object, update;\n\n    if (_is_simulating) {\n      return false;\n    }\n\n    _is_simulating = true;\n\n    for (object_id in this._objects) {\n      if (!this._objects.hasOwnProperty(object_id)) continue;\n\n      object = this._objects[object_id];\n\n      if (object.__dirtyPosition || object.__dirtyRotation) {\n        update = { id: object._physijs.id };\n\n        if (object.__dirtyPosition) {\n          update.pos = { x: object.position.x, y: object.position.y, z: object.position.z };\n          object.__dirtyPosition = false;\n        }\n\n        if (object.__dirtyRotation) {\n          update.quat = { x: object.quaternion.x, y: object.quaternion.y, z: object.quaternion.z, w: object.quaternion.w };\n          object.__dirtyRotation = false;\n        }\n\n        this.execute('updateTransform', update);\n      }\n    }\n\n    this.execute('simulate', { timeStep: timeStep, maxSubSteps: maxSubSteps });\n\n    return true;\n  };\n\n\n  // Phsijs.Mesh\n  Physijs.Mesh = function (geometry, material, mass) {\n    var index;\n\n    if (!geometry) {\n      return;\n    }\n\n    Eventable.call(this);\n    THREE.Mesh.call(this, geometry, material);\n\n    if (!geometry.boundingBox) {\n      geometry.computeBoundingBox();\n    }\n\n    this._physijs = {\n      type: null,\n      id: getObjectId(),\n      mass: mass || 0,\n      touches: [],\n      linearVelocity: new THREE.Vector3,\n      angularVelocity: new THREE.Vector3\n    };\n  };\n  Physijs.Mesh.prototype = new THREE.Mesh;\n  Physijs.Mesh.prototype.constructor = Physijs.Mesh;\n  Eventable.make(Physijs.Mesh);\n\n  // Physijs.Mesh.mass\n  Physijs.Mesh.prototype.__defineGetter__('mass', function () {\n    return this._physijs.mass;\n  });\n  Physijs.Mesh.prototype.__defineSetter__('mass', function (mass) {\n    this._physijs.mass = mass;\n    if (this.world) {\n      this.world.execute('updateMass', { id: this._physijs.id, mass: mass });\n    }\n  });\n\n  // Physijs.Mesh.applyCentralImpulse\n  Physijs.Mesh.prototype.applyCentralImpulse = function (force) {\n    if (this.world) {\n      this.world.execute('applyCentralImpulse', { id: this._physijs.id, x: force.x, y: force.y, z: force.z });\n    }\n  };\n\n  // Physijs.Mesh.applyImpulse\n  Physijs.Mesh.prototype.applyImpulse = function (force, offset) {\n    if (this.world) {\n      this.world.execute('applyImpulse', { id: this._physijs.id, impulse_x: force.x, impulse_y: force.y, impulse_z: force.z, x: offset.x, y: offset.y, z: offset.z });\n    }\n  };\n\n  // Physijs.Mesh.applyTorque\n  Physijs.Mesh.prototype.applyTorque = function (force) {\n    if (this.world) {\n      this.world.execute('applyTorque', { id: this._physijs.id, torque_x: force.x, torque_y: force.y, torque_z: force.z });\n    }\n  };\n\n  // Physijs.Mesh.applyCentralForce\n  Physijs.Mesh.prototype.applyCentralForce = function (force) {\n    if (this.world) {\n      this.world.execute('applyCentralForce', { id: this._physijs.id, x: force.x, y: force.y, z: force.z });\n    }\n  };\n\n  // Physijs.Mesh.applyForce\n  Physijs.Mesh.prototype.applyForce = function (force, offset) {\n    if (this.world) {\n      this.world.execute('applyForce', { id: this._physijs.id, force_x: force.x, force_y: force.y, force_z: force.z, x: offset.x, y: offset.y, z: offset.z });\n    }\n  };\n\n  // Physijs.Mesh.getAngularVelocity\n  Physijs.Mesh.prototype.getAngularVelocity = function () {\n    return this._physijs.angularVelocity;\n  };\n\n  // Physijs.Mesh.setAngularVelocity\n  Physijs.Mesh.prototype.setAngularVelocity = function (velocity) {\n    if (this.world) {\n      this.world.execute('setAngularVelocity', { id: this._physijs.id, x: velocity.x, y: velocity.y, z: velocity.z });\n    }\n  };\n\n  // Physijs.Mesh.getLinearVelocity\n  Physijs.Mesh.prototype.getLinearVelocity = function () {\n    return this._physijs.linearVelocity;\n  };\n\n  // Physijs.Mesh.setLinearVelocity\n  Physijs.Mesh.prototype.setLinearVelocity = function (velocity) {\n    if (this.world) {\n      this.world.execute('setLinearVelocity', { id: this._physijs.id, x: velocity.x, y: velocity.y, z: velocity.z });\n    }\n  };\n\n  // Physijs.Mesh.setAngularFactor\n  Physijs.Mesh.prototype.setAngularFactor = function (factor) {\n    if (this.world) {\n      this.world.execute('setAngularFactor', { id: this._physijs.id, x: factor.x, y: factor.y, z: factor.z });\n    }\n  };\n\n  // Physijs.Mesh.setLinearFactor\n  Physijs.Mesh.prototype.setLinearFactor = function (factor) {\n    if (this.world) {\n      this.world.execute('setLinearFactor', { id: this._physijs.id, x: factor.x, y: factor.y, z: factor.z });\n    }\n  };\n\n  // Physijs.Mesh.setDamping\n  Physijs.Mesh.prototype.setDamping = function (linear, angular) {\n    if (this.world) {\n      this.world.execute('setDamping', { id: this._physijs.id, linear: linear, angular: angular });\n    }\n  };\n\n  // Physijs.Mesh.setCcdMotionThreshold\n  Physijs.Mesh.prototype.setCcdMotionThreshold = function (threshold) {\n    if (this.world) {\n      this.world.execute('setCcdMotionThreshold', { id: this._physijs.id, threshold: threshold });\n    }\n  };\n\n  // Physijs.Mesh.setCcdSweptSphereRadius\n  Physijs.Mesh.prototype.setCcdSweptSphereRadius = function (radius) {\n    if (this.world) {\n      this.world.execute('setCcdSweptSphereRadius', { id: this._physijs.id, radius: radius });\n    }\n  };\n\n\n  // Physijs.PlaneMesh\n  Physijs.PlaneMesh = function (geometry, material, mass) {\n    var width, height;\n\n    Physijs.Mesh.call(this, geometry, material, mass);\n\n    if (!geometry.boundingBox) {\n      geometry.computeBoundingBox();\n    }\n\n    width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n    height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n\n    this._physijs.type = 'plane';\n    this._physijs.normal = geometry.faces[0].normal.clone();\n    this._physijs.mass = (typeof mass === 'undefined') ? width * height : mass;\n  };\n  Physijs.PlaneMesh.prototype = new Physijs.Mesh;\n  Physijs.PlaneMesh.prototype.constructor = Physijs.PlaneMesh;\n\n  // Physijs.HeightfieldMesh\n  Physijs.HeightfieldMesh = function (geometry, material, mass, xdiv, ydiv) {\n    Physijs.Mesh.call(this, geometry, material, mass);\n\n    this._physijs.type = 'heightfield';\n    this._physijs.xsize = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n    this._physijs.ysize = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n    this._physijs.xpts = (typeof xdiv === 'undefined') ? Math.sqrt(geometry.vertices.length) : xdiv + 1;\n    this._physijs.ypts = (typeof ydiv === 'undefined') ? Math.sqrt(geometry.vertices.length) : ydiv + 1;\n    // note - this assumes our plane geometry is square, unless we pass in specific xdiv and ydiv\n    this._physijs.absMaxHeight = Math.max(geometry.boundingBox.max.z, Math.abs(geometry.boundingBox.min.z));\n\n    var points = [];\n\n    var a, b;\n    for (var i = 0; i < geometry.vertices.length; i++) {\n\n      a = i % this._physijs.xpts;\n      b = Math.round((i / this._physijs.xpts) - ((i % this._physijs.xpts) / this._physijs.xpts));\n      points[i] = geometry.vertices[a + ((this._physijs.ypts - b - 1) * this._physijs.ypts)].z;\n\n      //points[i] = geometry.vertices[i];\n    }\n\n    this._physijs.points = points;\n  };\n  Physijs.HeightfieldMesh.prototype = new Physijs.Mesh;\n  Physijs.HeightfieldMesh.prototype.constructor = Physijs.HeightfieldMesh;\n\n  // Physijs.BoxMesh\n  Physijs.BoxMesh = function (geometry, material, mass) {\n    var width, height, depth;\n\n    Physijs.Mesh.call(this, geometry, material, mass);\n\n    if (!geometry.boundingBox) {\n      geometry.computeBoundingBox();\n    }\n\n    width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n    height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n    depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n    this._physijs.type = 'box';\n    this._physijs.width = width;\n    this._physijs.height = height;\n    this._physijs.depth = depth;\n    this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n  };\n  Physijs.BoxMesh.prototype = new Physijs.Mesh;\n  Physijs.BoxMesh.prototype.constructor = Physijs.BoxMesh;\n\n\n  // Physijs.SphereMesh\n  Physijs.SphereMesh = function (geometry, material, mass) {\n    Physijs.Mesh.call(this, geometry, material, mass);\n\n    if (!geometry.boundingSphere) {\n      geometry.computeBoundingSphere();\n    }\n\n    this._physijs.type = 'sphere';\n    this._physijs.radius = geometry.boundingSphere.radius;\n    this._physijs.mass = (typeof mass === 'undefined') ? (4 / 3) * Math.PI * Math.pow(this._physijs.radius, 3) : mass;\n  };\n  Physijs.SphereMesh.prototype = new Physijs.Mesh;\n  Physijs.SphereMesh.prototype.constructor = Physijs.SphereMesh;\n\n\n  // Physijs.CylinderMesh\n  Physijs.CylinderMesh = function (geometry, material, mass) {\n    var width, height, depth;\n\n    Physijs.Mesh.call(this, geometry, material, mass);\n\n    if (!geometry.boundingBox) {\n      geometry.computeBoundingBox();\n    }\n\n    width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n    height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n    depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n    this._physijs.type = 'cylinder';\n    this._physijs.width = width;\n    this._physijs.height = height;\n    this._physijs.depth = depth;\n    this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n  };\n  Physijs.CylinderMesh.prototype = new Physijs.Mesh;\n  Physijs.CylinderMesh.prototype.constructor = Physijs.CylinderMesh;\n\n\n  // Physijs.CapsuleMesh\n  Physijs.CapsuleMesh = function (geometry, material, mass) {\n    var width, height, depth;\n\n    Physijs.Mesh.call(this, geometry, material, mass);\n\n    if (!geometry.boundingBox) {\n      geometry.computeBoundingBox();\n    }\n\n    width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n    height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n    depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n    this._physijs.type = 'capsule';\n    this._physijs.radius = Math.max(width / 2, depth / 2);\n    this._physijs.height = height;\n    this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n  };\n  Physijs.CapsuleMesh.prototype = new Physijs.Mesh;\n  Physijs.CapsuleMesh.prototype.constructor = Physijs.CapsuleMesh;\n\n\n  // Physijs.ConeMesh\n  Physijs.ConeMesh = function (geometry, material, mass) {\n    var width, height, depth;\n\n    Physijs.Mesh.call(this, geometry, material, mass);\n\n    if (!geometry.boundingBox) {\n      geometry.computeBoundingBox();\n    }\n\n    width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n    height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n\n    this._physijs.type = 'cone';\n    this._physijs.radius = width / 2;\n    this._physijs.height = height;\n    this._physijs.mass = (typeof mass === 'undefined') ? width * height : mass;\n  };\n  Physijs.ConeMesh.prototype = new Physijs.Mesh;\n  Physijs.ConeMesh.prototype.constructor = Physijs.ConeMesh;\n\n\n  // Physijs.ConcaveMesh\n  Physijs.ConcaveMesh = function (geometry, material, mass) {\n    var i,\n      width, height, depth,\n      vertices, face, triangles = [];\n\n    Physijs.Mesh.call(this, geometry, material, mass);\n\n    if (!geometry.boundingBox) {\n      geometry.computeBoundingBox();\n    }\n\n    vertices = geometry.vertices;\n\n    for (i = 0; i < geometry.faces.length; i++) {\n      face = geometry.faces[i];\n      if (face instanceof THREE.Face3) {\n\n        triangles.push([\n          { x: vertices[face.a].x, y: vertices[face.a].y, z: vertices[face.a].z },\n          { x: vertices[face.b].x, y: vertices[face.b].y, z: vertices[face.b].z },\n          { x: vertices[face.c].x, y: vertices[face.c].y, z: vertices[face.c].z }\n        ]);\n\n      } else if (face instanceof THREE.Face4) {\n\n        triangles.push([\n          { x: vertices[face.a].x, y: vertices[face.a].y, z: vertices[face.a].z },\n          { x: vertices[face.b].x, y: vertices[face.b].y, z: vertices[face.b].z },\n          { x: vertices[face.d].x, y: vertices[face.d].y, z: vertices[face.d].z }\n        ]);\n        triangles.push([\n          { x: vertices[face.b].x, y: vertices[face.b].y, z: vertices[face.b].z },\n          { x: vertices[face.c].x, y: vertices[face.c].y, z: vertices[face.c].z },\n          { x: vertices[face.d].x, y: vertices[face.d].y, z: vertices[face.d].z }\n        ]);\n\n      }\n    }\n\n    width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n    height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n    depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n    this._physijs.type = 'concave';\n    this._physijs.triangles = triangles;\n    this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n  };\n  Physijs.ConcaveMesh.prototype = new Physijs.Mesh;\n  Physijs.ConcaveMesh.prototype.constructor = Physijs.ConcaveMesh;\n\n\n  // Physijs.ConvexMesh\n  Physijs.ConvexMesh = function (geometry, material, mass) {\n    var i,\n      width, height, depth,\n      points = [];\n\n    Physijs.Mesh.call(this, geometry, material, mass);\n\n    if (!geometry.boundingBox) {\n      geometry.computeBoundingBox();\n    }\n\n    for (i = 0; i < geometry.vertices.length; i++) {\n      points.push({\n        x: geometry.vertices[i].x,\n        y: geometry.vertices[i].y,\n        z: geometry.vertices[i].z\n      });\n    }\n\n\n    width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n    height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n    depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n    this._physijs.type = 'convex';\n    this._physijs.points = points;\n    this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n  };\n  Physijs.ConvexMesh.prototype = new Physijs.Mesh;\n  Physijs.ConvexMesh.prototype.constructor = Physijs.ConvexMesh;\n\n\n  // Physijs.Vehicle\n  Physijs.Vehicle = function (mesh, tuning) {\n    tuning = tuning || new Physijs.VehicleTuning;\n    this.mesh = mesh;\n    this.wheels = [];\n    this._physijs = {\n      id: getObjectId(),\n      rigidBody: mesh._physijs.id,\n      suspension_stiffness: tuning.suspension_stiffness,\n      suspension_compression: tuning.suspension_compression,\n      suspension_damping: tuning.suspension_damping,\n      max_suspension_travel: tuning.max_suspension_travel,\n      friction_slip: tuning.friction_slip,\n      max_suspension_force: tuning.max_suspension_force\n    };\n  };\n  Physijs.Vehicle.prototype.addWheel = function (wheel_geometry, wheel_material, connection_point, wheel_direction, wheel_axle, suspension_rest_length, wheel_radius, is_front_wheel, tuning) {\n    var wheel = new THREE.Mesh(wheel_geometry, wheel_material);\n    wheel.castShadow = wheel.receiveShadow = true;\n    wheel.position.copy(wheel_direction).multiplyScalar(suspension_rest_length / 100).add(connection_point);\n    this.world.add(wheel);\n    this.wheels.push(wheel);\n\n    this.world.execute('addWheel', {\n      id: this._physijs.id,\n      connection_point: { x: connection_point.x, y: connection_point.y, z: connection_point.z },\n      wheel_direction: { x: wheel_direction.x, y: wheel_direction.y, z: wheel_direction.z },\n      wheel_axle: { x: wheel_axle.x, y: wheel_axle.y, z: wheel_axle.z },\n      suspension_rest_length: suspension_rest_length,\n      wheel_radius: wheel_radius,\n      is_front_wheel: is_front_wheel,\n      tuning: tuning\n    });\n  };\n  Physijs.Vehicle.prototype.setSteering = function (amount, wheel) {\n    if (wheel !== undefined && this.wheels[wheel] !== undefined) {\n      this.world.execute('setSteering', { id: this._physijs.id, wheel: wheel, steering: amount });\n    } else if (this.wheels.length > 0) {\n      for (var i = 0; i < this.wheels.length; i++) {\n        this.world.execute('setSteering', { id: this._physijs.id, wheel: i, steering: amount });\n      }\n    }\n  };\n  Physijs.Vehicle.prototype.setBrake = function (amount, wheel) {\n    if (wheel !== undefined && this.wheels[wheel] !== undefined) {\n      this.world.execute('setBrake', { id: this._physijs.id, wheel: wheel, brake: amount });\n    } else if (this.wheels.length > 0) {\n      for (var i = 0; i < this.wheels.length; i++) {\n        this.world.execute('setBrake', { id: this._physijs.id, wheel: i, brake: amount });\n      }\n    }\n  };\n  Physijs.Vehicle.prototype.applyEngineForce = function (amount, wheel) {\n    if (wheel !== undefined && this.wheels[wheel] !== undefined) {\n      this.world.execute('applyEngineForce', { id: this._physijs.id, wheel: wheel, force: amount });\n    } else if (this.wheels.length > 0) {\n      for (var i = 0; i < this.wheels.length; i++) {\n        this.world.execute('applyEngineForce', { id: this._physijs.id, wheel: i, force: amount });\n      }\n    }\n  };\n\n  // Physijs.VehicleTuning\n  Physijs.VehicleTuning = function (suspension_stiffness, suspension_compression, suspension_damping, max_suspension_travel, friction_slip, max_suspension_force) {\n    this.suspension_stiffness = suspension_stiffness !== undefined ? suspension_stiffness : 5.88;\n    this.suspension_compression = suspension_compression !== undefined ? suspension_compression : 0.83;\n    this.suspension_damping = suspension_damping !== undefined ? suspension_damping : 0.88;\n    this.max_suspension_travel = max_suspension_travel !== undefined ? max_suspension_travel : 500;\n    this.friction_slip = friction_slip !== undefined ? friction_slip : 10.5;\n    this.max_suspension_force = max_suspension_force !== undefined ? max_suspension_force : 6000;\n  };\n\n  return Physijs;\n})();\n\nfunction Bullets() {\n  self = this;\n}\n\nBullets.prototype.fire = (playerSpeed) => {\n  // bullets = new Bullets();\n\n  // //RIGHT\n  // let bulletsRBlockGeometry = new THREE.SphereGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n  // let bulletsRBlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n  // bulletsRBlock = new Physijs.BoxMesh(bulletsRBlockGeometry, bulletsRBlockMaterial); //MESH POINTS MAT TO GEOMETRY\n\n  // bulletsRBlock.name = 'bullet'\n  // bulletsRBlock.position.set(player.position.x + 2, player.position.y, player.position.z - 2);\n\n  // // bulletsRBlock.rotation.set(-rotateAngle);\n  // bulletsRBlock.createdAt = clock.getElapsedTime();\n  // debugger\n  // console.log(THREE.Math.radToDeg(player.rotation.y));\n  // console.log(player.getWorldDirection().z);\n  // console.log((player.rotation.y/ Math.PI) * 2);\n  // scene.add(bulletsRBlock)\n\n  // bulletsRBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n  //   if (other_object.name === 'ground') {\n  //     let selectedObject = scene.getObjectByName('bullet');\n  //     if (selectedObject) {\n  //       scene.remove(selectedObject);\n  //     }\n  //   }\n  // });\n\n\n  //LEFT\n  let bulletsLBlockGeometry = new THREE.SphereGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n  let bulletsLBlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n  bulletsLBlock = new Physijs.BoxMesh(bulletsLBlockGeometry, bulletsLBlockMaterial); //MESH POINTS MAT TO GEOMETRY\n  // console.log((player.rotation.y/ Math.PI) * 2);\n\n\n  let wpVector = new THREE.Vector3();\n  bulletsLBlock.name = 'bullet'\n  bulletsLBlock.position.set(player.position.x + -8 * player.getWorldDirection(wpVector).x, player.position.y, player.position.z - 8 * player.getWorldDirection(wpVector).z);\n  // bulletsLBlock.rotation.set(-rotateAngle);\n\n  bulletsLBlock.createdAt = clock.getElapsedTime();\n  // debugger\n\n  scene.add(bulletsLBlock)\n\n\n  bulletsLBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n    // console.log(other_object)\n    // console.log(linear_velocity)\n    // console.log(angular_velocity)\n    // env3Block.material.wireframe = true\n    if (other_object.name === 'ground' || other_object.name === 'floorBlock' || other_object.name === 'target' || other_object.name === 'player2') {\n      let selectedObject = scene.getObjectByName('bullet');\n      if (selectedObject) {\n        console.log(other_object.name)\n\n        scene.remove(selectedObject);\n      }\n\n      if (other_object.name === 'player2') {\n        winner = document.getElementById('winner');\n        other_object.hp -= 1;\n        opponent = document.getElementById('opponent')\n        opponent.innerHTML = `Opponent HP: ${other_object.hp}`;\n        if (other_object.hp <= 0) {\n          winner.innerHTML = 'You win!'\n        }\n      }\n    }\n    // env3Block.visible = false; // make any mesh disappear on collision...\n  });\n\n\n\n\n}\n\n\nfunction Input() {\n  self = this;\n\n  //Set initial state of Input class\n  self.isLeftPressed = false;\n  self.isRightPressed = false;\n  self.isFwdPressed = false;\n  self.isBwdPressed = false;\n  self.isShiftPressed = false;\n  self.isRLPressed = false;\n  self.isRRPressed = false;\n  //how do we add gravity?\n  self.isSpacePressed = false;\n  //bullets?\n  self.isFirePressed = false;\n  self.isXPressed = false;\n\n  //Handle key events (setting value according to event listener)\n  const handleKeyEvent = (e, isKeyDown) => {\n    if (e.keyCode === 65) {\n      self.isLeftPressed = isKeyDown;\n    }\n    if (e.keyCode === 68) {\n      self.isRightPressed = isKeyDown;\n    }\n    if (e.keyCode === 32) {\n      self.isSpacePressed = isKeyDown;\n    }\n    if (e.keyCode === 87) {\n      self.isFwdPressed = isKeyDown;\n    }\n    if (e.keyCode === 83) {\n      self.isBwdPressed = isKeyDown;\n    }\n    if (e.keyCode === 16) {\n      self.isShiftPressed = isKeyDown;\n    }\n    if (e.keyCode === 81) {\n      self.isRLPressed = isKeyDown;\n    }\n    if (e.keyCode === 69) {\n      self.isRRPressed = isKeyDown;\n    }\n    if (e.keyCode === 74) {\n      self.isFirePressed = isKeyDown;\n    }\n    if (e.keyCode === 75) {\n      self.isXPressed = isKeyDown;\n    }\n  }\n\n  //Event listeners for key input, pass event and bool to handle event\n  document.addEventListener(\"keydown\", (e) => { handleKeyEvent(e, true) })\n  document.addEventListener(\"keyup\", (e) => { handleKeyEvent(e, false) })\n}\n\nfunction Environment() {\n  //Texture loader\n\n  const textureLoader = new THREE.TextureLoader();\n\n  const texture = textureLoader.load('textures/tron1.jpg');\n\n  texture.encoding = THREE.sRGBEncoding;\n\n  texture.anisotropy = 16;\n\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.offset.set(0, 0);\n  texture.repeat.set(200, 200);\n\n  // debugger\n  const materialMap = new THREE.MeshStandardMaterial({\n    map: texture,\n  });\n\n  //TARGET TEXTURE\n\n  const Targettexture = textureLoader.load('textures/tron1.jpg');\n\n  Targettexture.encoding = THREE.sRGBEncoding;\n\n  Targettexture.anisotropy = 16;\n\n  Targettexture.wrapS = Targettexture.wrapT = THREE.RepeatWrapping;\n  Targettexture.offset.set(0, 0);\n  Targettexture.repeat.set(200, 200);\n\n  // debugger\n  const TargetMaterialMap = new THREE.MeshStandardMaterial({\n    map: Targettexture,\n  });\n\n  //GROUND\n  let groundGeometry = new THREE.PlaneGeometry(1000, 1000, 0); //PRIMITIVE SHAPE AND SIZE\n  let groundMaterial = new THREE.MeshBasicMaterial({ color: 'black' }); //COLOR OF MESH\n  // let ground = new THREE.Mesh(groundGeometry, groundMaterial); //MESH POINTS MAT TO GEOMETRY\n\n\n  var friction = 0.8; // high friction\n  var restitution = 0.3; // low restitution\n\n  var material = Physijs.createMaterial(\n    new THREE.MeshBasicMaterial({ color: 0x888888 }),\n    friction,\n    restitution\n  );\n\n  let ground = new Physijs.PlaneMesh(groundGeometry, materialMap, 0, 0); //MESH POINTS MAT TO GEOMETRY\n  ground.rotation.x = -0.5 * Math.PI;\n  ground.name = 'ground'\n  ground.receiveShadow = true;\n  scene.add(ground); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n\n  // // 07c\n  // // ELEMENT ONE (**LOOK UP MATERIAL OPTIONS**)\n  // for (let i = 0; i < 100; i++) {\n  //   let env2BlockGeometry = new THREE.BoxBufferGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n  //   let env2BlockMaterial = new THREE.MeshLambertMaterial({ color: 0x22CAC2 }); //COLOR OF MESH\n  //   let env2Block = new THREE.Mesh(env2BlockGeometry, env2BlockMaterial); //MESH POINTS MAT TO GEOMETRY\n  //   env2Block.position.x = (Math.random() - 0.5) * 400;\n  //   env2Block.position.y = (Math.random() - 0.5) * 400;\n  //   env2Block.position.z = (Math.random() - 0.5) * 300;\n  //   // scene.add(env2Block); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n  // }\n\n  let _vector = new THREE.Vector3(0, 0, 0)\n  for (let i = 0; i < 200; i++) {\n    let env3BlockGeometry = new THREE.BoxBufferGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n    let env3BlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n    let env3Block = new Physijs.BoxMesh(env3BlockGeometry, env3BlockMaterial); //MESH POINTS MAT TO GEOMETRY\n    env3Block.position.x = (Math.random() - 0.5) * 300;\n    env3Block.position.y = 1\n    env3Block.position.z = (Math.random() - 0.5) * 300;\n    // debugger//\n    env3Block.scale.set(2, 2, 2)\n    env3Block.name = 'floorBlock'\n    // scene.add(env3Block); //DROP ELEMENST INTO VIRTUAL ENVIRONMENT\n\n    env3Block.setAngularFactor(_vector);\n    env3Block.setAngularVelocity(_vector);\n\n    env3Block.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n      if (other_object.name === 'bullet') {\n        player.points += 1;\n        let pointEle = document.getElementById('points')\n        pointEle.innerHTML = `Score: ${player.points}`\n        env3Block.visible = false;\n      }\n    });\n  }\n\n  _vector = new THREE.Vector3(0, 0, 0)\n  for (let i = 0; i < 100; i++) {\n\n    let color;\n    if (i % 2 === 0) {\n      color = 0xfffff;\n      rot = Math.PI / 2\n      point = 100;\n      scale = 1;\n    } else {\n      color = 0xb52626;\n      rot = 0;\n      point = 1000\n      scale = .5;\n    }\n\n    let TargetBlockGeometry = new THREE.CylinderBufferGeometry(scale, scale, 1, 100); //PRIMITIVE SHAPE AND SIZE\n    let TargetBlockMaterial = new THREE.MeshLambertMaterial({ color: color }); //COLOR OF MESH\n\n    let TargetBlock = new Physijs.BoxMesh(TargetBlockGeometry, TargetBlockMaterial, 0, 0); //MESH POINTS MAT TO GEOMETRY\n    TargetBlock.position.x = (Math.random() - 0.5) * 300;\n    TargetBlock.position.y = (Math.random() - 0.5) * 300 + 200;\n    TargetBlock.position.z = (Math.random() - 0.5) * 300;\n    TargetBlock.rotation.x = Math.PI / 2;\n    TargetBlock.rotation.z = rot;\n    // debugger//\n    TargetBlock.scale.set(10, 1, 10)\n    TargetBlock.name = 'target'\n    TargetBlock.points = point;\n    scene.add(TargetBlock); //DROP ELEMENST INTO VIRTUAL ENVIRONMENT\n\n    TargetBlock.setAngularFactor(_vector);\n    TargetBlock.setAngularVelocity(_vector);\n\n    TargetBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n      if (other_object.name === 'bullet') {\n        player.points += this.points;\n        let pointEle = document.getElementById('points')\n        pointEle.innerHTML = `Score: ${player.points}`\n        // TargetBlock.visible = false;\n        scene.remove(this);\n      }\n    });\n  }\n\n  for (let i = 0; i < 200; i++) {\n    // let BIGheight = (Math.random() - 0.5) * 10;\n    let BIGheight = 1;\n    let Trunkheight = 2.125\n    let env1BIGBlockGeometry = new THREE.BoxBufferGeometry(1, BIGheight, 1); //PRIMITIVE SHAPE AND SIZE\n    let env1BIGBlockMaterial = new THREE.MeshLambertMaterial({ color: 0x6bff42 }); //COLOR OF MESH\n    let env1BIGBlock = new Physijs.BoxMesh(env1BIGBlockGeometry, env1BIGBlockMaterial, 0); //MESH POINTS MAT TO GEOMETRY\n    let env1TrunkBlockGeometry = new THREE.BoxBufferGeometry(.25, Trunkheight, .25, 1); //PRIMITIVE SHAPE AND SIZE\n    let env1TrunkBlockMaterial = new THREE.MeshLambertMaterial({ color: 0xffffff }); //COLOR OF MESH\n    let env1TrunkBlock = new Physijs.BoxMesh(env1TrunkBlockGeometry, env1TrunkBlockMaterial, 0); //MESH POINTS MAT TO GEOMETRY\n\n    env1TrunkBlock.position.x = env1BIGBlock.position.x;\n    env1TrunkBlock.position.y = 1\n    env1TrunkBlock.position.z = env1BIGBlock.position.z;\n\n    env1BIGBlock.add(env1TrunkBlock)\n    env1BIGBlock.hp = 100;\n    env1BIGBlock.rotation.x = Math.PI\n\n    env1BIGBlock.position.x = (Math.random() - 0.5) * 600;\n    env1BIGBlock.position.y = 40\n    env1BIGBlock.position.z = (Math.random() - 0.5) * 600;\n\n\n    // debugger\n    env1BIGBlock.scale.set(20, 20, 20)\n    env1BIGBlock.name = 'floorBlock'\n    env1TrunkBlock.name = 'floorBlock'\n\n    scene.add(env1BIGBlock); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n    // scene.add(env1TrunkBlock); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n\n    env1BIGBlock.setAngularFactor(_vector);\n    env1BIGBlock.setAngularVelocity(_vector);\n\n    env1BIGBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n      if (other_object.name === 'bullet') {\n        env1BIGBlock.hp -= 1;\n        if (env1BIGBlock.hp === 0) {\n          player.points += 100;\n          let pointEle = document.getElementById('points')\n          pointEle.innerHTML = `Score: ${player.points}`\n          scene.remove(this)\n          // env1BIGBlock.visible = false;\n        }\n      }\n    });\n\n    env1TrunkBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n      if (other_object.name === 'bullet') {\n        env1BIGBlock.hp -= 1;\n        if (env1BIGBlock.hp === 0) {\n          player.points += 10;\n          let pointEle = document.getElementById('points')\n          pointEle.innerHTML = `Score: ${player.points}`\n          env1BIGBlock.visible = false;\n        }\n      }\n    });\n  }\n\n  const towerRow = (height, width, zPos) => {\n    for (let i = 0; i < width; i++) {\n      let env4BlockGeometry = new THREE.BoxBufferGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n      var env4BlockMaterial = Physijs.createMaterial(new THREE.MeshLambertMaterial({ color: 0xff00C2 }), 0, .1)\n      // let env4BlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n      let env4Block = new Physijs.BoxMesh(env4BlockGeometry, env4BlockMaterial); //MESH POINTS MAT TO GEOMETRY\n\n      env4Block.position.x = i * 2.1 + 6;\n      env4Block.position.y = height;\n      env4Block.position.z = zPos;\n      // debugger\n      env4Block.scale.set(2, 2, 2)\n      env4Block.name = 'floorBlock'\n      scene.add(env4Block); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n\n      env4Block.setAngularFactor(_vector);\n      env4Block.setAngularVelocity(_vector);\n\n      env4Block.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n        if (other_object.name === 'bullet') {\n          player.points += 1;\n          let pointEle = document.getElementById('points')\n          pointEle.innerHTML = `Score: ${player.points}`\n          // env4Block.visible = false;\n          scene.remove(this)\n        }\n      });\n    }\n  }\n\n\n  const towerBuilder = (numRows) => {\n    zPos = (Math.random() - 0.5) * 300;\n    width = 1;\n    for (let i = 0; i < numRows; i++) {\n      towerRow((i * 2 + 1), width, zPos)\n    }\n  }\n\n  for (let i = 0; i < 0; i++) {\n    towerBuilder(20)\n  }\n\n}\n\n\nlet MechLoader = new THREE.OBJLoader();\nMechLoader.load(\n  'assets/mech.obj',\n  function (object) {\n    mechMesh = object.children[0]\n    mechMesh.position.set(0, -4, 0);\n    mechMesh.rotation.y = Math.PI;\n\n    let materials = mechMesh.material\n    for (let i = 0; i < materials.length; i++) {\n      if (i % 2 === 0) {\n        mechMesh.material[i].color.set(0x2f523e);\n      } else {\n        mechMesh.material[i].color.set(0xf5d742);\n      }\n    }\n    player.points = 0;\n    player.position.set(0, 10, 0);\n    player.material.wireframe = true;\n\n    player.add(mechMesh)\n    player.position.set(1, 4, 0)\n\n    let mechMesh2 = mechMesh.clone();\n    player2.add(mechMesh2)\n    player2.name = 'player2';\n\n    scene.add(player)\n    scene.add(player2)\n\n  }\n);\n\n// //A huge city w/o colliders or physics \n// let cityLoader = new THREE.OBJLoader();\n// cityLoader.load(\n//   'assets/City.obj',\n//   function (object) {\n\n//     for (let i = 0; i < object.children.length; i++) {\n//       cityMesh = object.children[i]\n//       if (i % 2 === 0) {\n//         debugger\n//         cityMesh.material.color.set(0xa39f98);\n//       } else {\n//         cityMesh.material.color.set(0xc4b9a7);\n//       }\n\n\n//       cityMesh.position.set(0, 0, 400);\n//       scene.add(cityMesh)\n//     }\n// }\n// );\n\n\n//Main.js\nlet camera, sceneHUD, cameraHUD, rotateAngle, renderer, scene, player, bullets, bulletsBlock, input, environment, clock, lastTimeStamp;\nlet player2 = { id: null, x: 0, y: 0, z: 0, ph: 0 };\nlet serverPackage = [];\nlet player2Data = { id: null, x: 0, y: 0, z: 0, ph: 0 };\nlet bulletCount = 0;\n\nlet RELOAD = 1000;\n\nfunction reset(animate) {\n  // for (let i = scene.children.length - 1; i >= 0; i--) {\n  //   debugger\n  //     scene.remove(scene.children[i])\n  // }\n  // scene.remove.apply(scene, scene.children);\n  // init();\n  setTimeout(() => {\n    // location.reload()\n  }, 3000);\n\n\n  // animate();\n  // requestAnimationFrame(animate);\n}\n\nfunction init() {\n\n\n  // 201 \n  Physijs.scripts.worker = './lib/physijs_worker.js';\n  Physijs.scripts.ammo = './lib/ammo.js';\n\n  // 02\n  //RENDERER INPUT, SCENE (virtual environment)/CAMERA \n  // let scene = new THREE.Scene();\n  scene = new Physijs.Scene;\n\n  // let scene = new Physijs.Scene({ reportsize: 50, fixedTimeStep: 1 / 20 }); //Slow down scene to fix rotation bug\n  scene.setGravity(new THREE.Vector3(0, -5, 0));\n  {\n    const color = 'grey';  // white\n    const near = 90;\n    const far = 300;\n    // scene.fog = new THREE.Fog(color, near, far);\n  }\n  scene.background = new THREE.Color('skyblue');\n\n  createCamera();\n  createLights();\n  createMeshes();\n  createRenderer();\n\n\n  //202\n  //Bullets\n  bullets = new Bullets();\n  // let bulletsBlockGeometry = new THREE.SphereGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n  // let bulletsBlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n  // bulletsBlock = new Physijs.BoxMesh(bulletsBlockGeometry, bulletsBlockMaterial); //MESH POINTS MAT TO GEOMETRY\n\n  // 101\n  //INPUT OBJECT\n  input = new Input();\n\n  // 001\n  // Environment\n  environment = new Environment();\n\n\n\n  // 05\n  //MAKE WINDOW RESPONSIVE ON RESIZE\n  window.addEventListener('resize', () => {\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    camera.aspect = window.innerWidth / window.innerHeight;\n\n    camera.updateProjectionMatrix();\n  })\n\n  // 06\n  //RAYCASTER => VECTOR 'RAY'... RAY === Array? (like vector array?)\n  let raycaster = new THREE.Raycaster();\n  let mouse = new THREE.Vector2();\n\n\n  // 09\n  //RENDER LOOP\n  // 102\n  //Normalize animation loop\n  lastTimeStamp = 0;\n\n  clock = new THREE.Clock();\n  _vector = new THREE.Vector3(0, 0, 0)\n\n\n  // debugger\n  socket.emit('init', {\n    id: socket.id,\n    x: player.position.x,\n    y: player.position.y,\n    z: player.position.z,\n    h: player.rotation.y,\n    pb: player.rotation.y\n  });\n\n\n}\n\nfunction createCamera() {\n  camera = new THREE.PerspectiveCamera(\n    75,\n    window.innerWidth / window.innerHeight,\n    0.1,\n    300\n  );\n  // debugger\n\n  camera.position.set(0, 6, 10);\n  camera.rotation.x = -.2\n}\n\nfunction createLights() {\n  // 08\n  //LIGHT ONE\n  let light1 = new THREE.DirectionalLight(0xFFFFFF, 2);\n  light1.position.set(0, 20, 25)\n  scene.add(light1)\n\n  //LIGHT TWO\n  let light2 = new THREE.AmbientLight(0xaaaaaa, 1);\n  light2.position.set(0, 0, 25)\n  scene.add(light2)\n  // const ambientLight = new THREE.HemisphereLight(\n  //   0xddeeff,\n  //   0x202020,\n  //   .5,\n  // );\n  // scene.add(ambientLight)\n\n}\n\nfunction createMeshes() {\n  // 07\n  //ELEMENT ONE (**LOOK UP MATERIAL OPTIONS**)\n  let playerGeometry = new THREE.BoxBufferGeometry(5, 8, 5, 0); //PRIMITIVE SHAPE AND SIZE (set 3rd val to 111 for cat paw)\n  let playerMaterial = new THREE.MeshLambertMaterial({\n    color: 0x22CAC2,\n    opacity: 0.0,\n  }); //COLOR OF MESH\n  //ELEMENT ONE (**LOOK UP MATERIAL OPTIONS**)\n\n  // let player = new THREE.Mesh(playerGeometry, playerMaterial); //MESH POINTS MAT TO GEOMETRY\n  player = new Physijs.BoxMesh(playerGeometry, playerMaterial); //MESH POINTS MAT TO GEOMETRY\n  player.position.set(0, 1, 0);\n  player.name = 'player';\n  player.add(camera)\n\n  let player2Geometry = new THREE.CubeGeometry(5, 8, 5, 0);\n  let player2Material = new THREE.MeshLambertMaterial({\n    color: 0x22CAC2,\n    opacity: 0.0,\n  })\n\n  player2 = new Physijs.BoxMesh(playerGeometry, playerMaterial);\n\n  player2.hp = 200;\n}\n\nfunction createRenderer() {\n  // 03\n  //INSTANCE OF RENDERER\n  renderer = new THREE.WebGLRenderer({ antialias: true });\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  renderer.setPixelRatio(window.devicePixelRatio);\n\n  // renderer.gammaFactorw\n\n  renderer.physicallyCorrectLights = true;\n  // renderer.setClearColor(\"#e5e5e5\"); //BACKGROUND COLOR\n\n  // 04\n  //ADD CANVAS ELEMENT TO DOM\n  pointTally = document.createElement('h1');\n  pointTally.id = 'points'\n  pointTally.style.position = 'absolute';\n  document.body.appendChild(pointTally);\n  pointTally.innerHTML = 'Score: 0'\n\n  opponentHP = document.createElement('h1');\n  opponentHP.id = 'opponent'\n  opponentHP.style.position = 'absolute';\n  opponentHP.style.marginTop = '70';\n  document.body.appendChild(opponentHP);\n  opponentHP.innerHTML = `Opponent HP: ${player2.hp}`;\n\n\n  timeTally = document.createElement('h1');\n  timeTally.id = 'time'\n  timeTally.style.position = 'absolute';\n  timeTally.style.marginTop = '100';\n  document.body.appendChild(timeTally);\n  timeTally.innerHTML = 'Time: 0'\n\n  winnerUI = document.createElement('h1');\n  winnerUI.id = 'winner'\n  winnerUI.style.position = 'absolute';\n  winnerUI.style.marginTop = '130';\n  document.body.appendChild(winnerUI);\n  winnerUI.innerHTML = 'FIGHT!'\n\n\n  document.body.appendChild(renderer.domElement);\n}\n\n\n\n\nlet animate = function (timeStamp) {\n  // player.__dirtyPosition = true;\n  // player.__dirtyRotation = true;\n\n\n\n  player.setAngularFactor(_vector);\n  player.setAngularVelocity(_vector);\n  // player.setLinearVelocity(new THREE.Vector3(0, 0, 0));\n\n  let delta = clock.getDelta(); // seconds\n  // console.log(clock.getElapsedTime())\n  let moveDistance = 200 * delta; // 200 pixels per second\n  rotateAngle = Math.PI / 2 * delta; // pi/2 radians (90 deg) per sec\n\n  let time = document.getElementById('time')\n  // time.innerHTML = `Time: ${Math.floor(clock.elapsedTime * 100)}`\n  // let socketData = 'nope';\n  // time.innerHTML = `Time: ${socketData}`\n\n  let start = requestAnimationFrame(animate);\n\n  //!Comment in for time challenge!!!\n  // if (Math.floor(clock.elapsedTime * 100) >= RELOAD) {\n  //   let pointEle = document.getElementById('points')\n  //   // pointEle.className= 'finalpoint';\n  //   pointEle.style = 'color: red; position: absolute; top: 20%; left: 40%; padding: 10px; border: 5px solid black;';\n  //   pointEle.innerHTML = `Final Score: ${player.points}`\n  //   // pointEle.style = `align: center;`\n  //   cancelAnimationFrame(start);\n  //   reset(animate);\n  // }\n\n  let timeDelta = (timeStamp - lastTimeStamp) / 1000;\n  lastTimeStamp = timeStamp;\n\n  let movementSpeed = 12 * timeDelta;\n\n\n  //BOOST\n  let boost = 1;\n  if (input.isShiftPressed) {\n    boost = 10 * movementSpeed;\n    // boost = 1\n  }\n\n  let playerSpeed = movementSpeed * boost * 2;\n\n  //LEFT\n  if (input.isLeftPressed) {\n    player.__dirtyPosition = true;\n    player.__dirtyRotation = true;\n    player.setLinearVelocity(_vector);\n    player.translateOnAxis(new THREE.Vector3(playerSpeed * 100, 0, 0), -rotateAngle)\n\n    // player.position.x -= Math.sin(player.rotation.y + Math.PI / 2) * playerSpeed;\n    // player.position.z -= Math.cos(player.rotation.y + Math.PI / 2) * playerSpeed;\n  }\n  //RIGHT\n  if (input.isRightPressed) {\n    player.__dirtyPosition = true;\n    player.__dirtyRotation = true;\n    player.setLinearVelocity(_vector);\n    player.translateOnAxis(new THREE.Vector3(-playerSpeed * 100, 0, 0), -rotateAngle)\n\n    // player.position.x += Math.sin(player.rotation.y + Math.PI / 2) * playerSpeed;\n    // player.position.z += Math.cos(player.rotation.y + Math.PI / 2) * playerSpeed;\n  }\n  //JUMP  \n  if (input.isSpacePressed) {\n    player.__dirtyPosition = true;\n    player.__dirtyRotation = true;\n    player.setLinearVelocity(_vector);\n    player.setAngularFactor(_vector);\n    player.setAngularVelocity(_vector);\n    player.translateOnAxis(new THREE.Vector3(0, -movementSpeed * 1000, 0), -rotateAngle)\n    // player.position.y += playerSpeed*2;\n  }\n\n  if (input.isXPressed) {\n    player.__dirtyPosition = true;\n    player.__dirtyRotation = true;\n    if (player.position.y > 10) {\n      player.translateOnAxis(new THREE.Vector3(0, movementSpeed * 200, 0), -rotateAngle)\n      player.setAngularFactor(_vector);\n      player.setAngularVelocity(_vector);\n    }\n  }\n\n  //FWD \n\n\n  if (input.isFwdPressed) {\n    player.__dirtyPosition = true;\n    player.__dirtyRotation = true;\n    player.setAngularFactor(_vector);\n    player.setAngularVelocity(_vector);\n    player.setAngularFactor(_vector);\n    player.setLinearVelocity(_vector);\n\n    player.translateOnAxis(new THREE.Vector3(0, 0, playerSpeed * 100), -rotateAngle)\n    // console.log(player.getWorldQuaternion())\n\n\n\n    // delete3DOBJ('bullet');\n\n    // player.position.x -= Math.sin(player.rotation.y) * playerSpeed;\n    // player.position.z -= Math.cos(player.rotation.y) * playerSpeed;\n  }\n  //BACK \n  if (input.isBwdPressed) {\n    player.__dirtyPosition = true;\n    player.__dirtyRotation = true;\n    player.setLinearVelocity(_vector);\n    player.translateOnAxis(new THREE.Vector3(0, 0, -playerSpeed * 100), -rotateAngle)\n\n    // player.position.x += Math.sin(player.rotation.y) * playerSpeed;\n    // player.position.z += Math.cos(player.rotation.y) * playerSpeed;\n  }\n  //RotLeft\n  if (input.isRLPressed) {\n    // player.rotation.y += playerSpeed/4;\n    player.rotateOnAxis(new THREE.Vector3(0, 1, 0), +0.05);\n    player.setLinearVelocity(_vector);\n    // console.log(player.rotateOnAxis)\n    player.__dirtyPosition = true;\n    player.__dirtyRotation = true;\n  }\n  //RotRight\n  if (input.isRRPressed) {\n\n    player.rotateOnAxis(new THREE.Vector3(0, 1, 0), -0.05);\n    player.setLinearVelocity(_vector);\n    player.__dirtyPosition = true;\n    player.__dirtyRotation = true;\n  }\n\n  //bullets?\n  if (input.isFirePressed) {\n    bullets.fire()\n    // bulletsRBlock.setLinearVelocity(new THREE.Vector3((player.rotation.y / Math.PI) * 2), 0, 0)\n    // bulletsRBlock.setLinearVelocity(new THREE.Vector3(0, 0, -100))\n    let xCompensator = ((player.rotation.y / Math.PI) * -2) * 100\n    let zCompensator = 100 / (xCompensator + 1)\n    // bulletsLBlock.setLinearVelocity(new THREE.Vector3(xCompensator, 0, zCompensator))\n\n    let wpVector2 = new THREE.Vector3();\n    bulletsLBlock.setLinearVelocity(new THREE.Vector3(-player.getWorldDirection(wpVector2).x * 400, 0, player.getWorldDirection(wpVector2).z * -400))\n    // bulletsLBlock.setLinearVelocity(new THREE.Vector3(0, 0, -100))\n    // console.log(clock.getElapsedTime() - bulletsBlock.createdAt)\n\n    // if ((clock.getElapsedTime() - bulletsBlock.createdAt) >= 5) {\n    //   debugger\n    //   delete3DOBJ('bullet')\n    // }\n\n\n    // debugger\n    for (let i = 0; i < scene.children.length; i++) {\n      if (scene.children[i].name === 'bullet') {\n        // debugger\n        bulletCount += 1\n        if (bulletCount > 100) {\n          // debugger\n          for (let i = 0; i < scene.children.length; i++) {\n            if (scene.children[i].name === 'bullet') {\n              scene.remove(scene.children[i])\n            }\n          }\n          bulletCount = 0;\n        }\n      }\n    }\n    player.setAngularFactor(_vector);\n    player.setAngularVelocity(_vector);\n  }\n\n\n\n  // //GRAVITY...fix this please\n  // if (player.position.y <= 1) {\n  //   player.translateOnAxis(new THREE.Vector3(0, 0, 0), -rotateAngle)\n  // } else {\n  //   player.translateOnAxis(new THREE.Vector3(0, playerSpeed * 50, 0), -rotateAngle)\n  // }\n  // camera.lookAt(player.position)\n\n\n  function delete3DOBJ(objName) {\n    let selectedObject = scene.getObjectByName(objName);\n    if (selectedObject) {\n      scene.remove(selectedObject);\n    }\n\n    // animate();\n  }\n\n  // socket.emit('spawn', {\n  //   id: socket.id,\n  //   x: player.position.x,\n  //   y: player.position.y,\n  //   z: player.position.z,\n  //   h: player.rotation.y,\n  //   pb: player.rotation.x\n  // });\n\n  let wpVector2 = new THREE.Vector3();\n  player.getWorldDirection(wpVector2).y\n\n  //player 2 update...\n  var tquaternion = new THREE.Quaternion()\n  if (player2Data.h) {\n    player2Data.h = player2Data.h\n  } else {\n    player2Data.h = tquaternion\n  }\n  player2.position.x = player2Data.x;\n  player2.position.y = player2Data.y;\n  player2.position.z = player2Data.z;\n  // player2.rotation.y = player2Data.h;\n  player2.rotation.setFromQuaternion(player2Data.h);\n  // player2.rotateOnAxis(new THREE.Vector3(0, 1, 0));\n  // let xComp = player.getWorldDirection(wpVector2).x;\n  // let zComp = player.getWorldDirection(wpVector2).z;\n\n  // let yComp = Math.cos(zComp/xComp);\n  // player2.rotateOnAxis(player2Data.h)\n  scene.add(player2)\n\n  let adjustRot = THREE.Math.degToRad(20)\n  // debugger\n  socket.emit('updatedPos', {\n    id: socket.id,\n    x: player.position.x,\n    y: player.position.y,\n    z: player.position.z,\n    // h: player.getWorldQuaternion(tquaternion).y,\n    h: player.getWorldQuaternion(tquaternion),\n    // h: new THREE.Vector3(-player.getWorldDirection(wpVector2).x, 0, player.getWorldDirection(wpVector2).z),\n    pb: player.position.y,\n  });\n  // console.log((player.getWorldDirection(wpVector2).y))\n  // let worldY = player.getWorldDirection(wpVector2).y\n  // console.log(player.getWorldDirection(wpVector2))\n\n\n  socket.on('otherSpawn', (serverPack) => {\n    serverPackage = serverPack\n  })\n  // debugger\n  for (let i = 0; i < serverPackage.length; i++) {\n    if (serverPackage[i].id !== socket.id) {\n      // console.log(serverPackage[i].y);\n      player2Data = serverPackage[i];\n    }\n  }\n  // debugger\n  // socket.on('otherSpawn', (data) => {\n  //   // debugger\n  //   if (data.y > 100) {\n  //     console.log(`Client side data: ${data.y}`)\n  //   }\n  // })\n  // debugger\n  // console.log(`io.sockets: ${io.sockets}`)\n  // console.log(`io: ${io}`)\n\n  scene.simulate();\n  // renderer.render(sceneHUD, cameraHUD)\n  renderer.render(scene, camera);\n\n\n  // socket.on('otherSpawn', (data) => {\n  //   socketData = data;\n  //   // console.log(data)\n  // })\n\n};\n\ninit();\n\n// 11 \n//...10 is mouse event listener, 12 is adding listener to window)...\n// CALL RENDER LOOP\nanimate();\n\n"],"sourceRoot":""}