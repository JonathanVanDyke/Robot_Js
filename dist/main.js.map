{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/bundledv3.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","onload","Stats","container","document","createElement","addPanel","panel","appendChild","dom","showPanel","id","children","length","style","display","cssText","addEventListener","event","preventDefault","beginTime","performance","Date","now","prevTime","frames","fpsPanel","Panel","msPanel","self","memory","memPanel","REVISION","begin","end","time","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","fg","bg","min","Infinity","max","round","Math","PR","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","canvas","width","height","context","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","maxValue","drawImage","THREE","TerrainLoader","manager","undefined","DefaultLoadingManager","constructor","load","url","onLoad","onProgress","onError","scope","request","XMLHttpRequest","Uint16Array","target","response","itemEnd","crossOrigin","open","responseType","send","itemStart","setCrossOrigin","socket","io","connect","GLTFLoader","Loader","dracoLoader","ddsLoader","GLTFRegistry","objects","add","remove","removeAll","assign","resourcePath","path","LoaderUtils","extractUrlBase","_onError","e","console","error","itemError","loader","FileLoader","setPath","setResponseType","setWithCredentials","data","parse","gltf","setDRACOLoader","setDDSLoader","content","extensions","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","version","Error","extensionsUsed","extensionName","extensionsRequired","KHR_LIGHTS_PUNCTUAL","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","indexOf","warn","GLTFParser","extension","lightDefs","lights","loadLight","lightIndex","lightNode","lightDef","color","Color","fromArray","range","type","DirectionalLight","position","set","PointLight","distance","SpotLight","spot","innerConeAngle","outerConeAngle","PI","angle","penumbra","decay","intensity","Promise","resolve","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","parser","pending","opacity","metallicRoughness","pbrMetallicRoughness","Array","isArray","baseColorFactor","array","baseColorTexture","push","assignTexture","all","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","body","headerView","DataView","header","magic","slice","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","specularGlossinessParams","ShaderMaterial","pbrSpecularGlossiness","shader","ShaderLib","uniforms","UniformsUtils","clone","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","fragmentShader","replace","roughness","metalness","roughnessMap","metalnessMap","specular","setHex","glossiness","specularMap","glossinessMap","vertexShader","defines","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","params","material","fog","transparent","isGLTFSpecularGlossinessMaterial","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","derivatives","cloneMaterial","source","il","isColor","refreshUniforms","renderer","scene","camera","geometry","uvScaleMap","diffuse","copy","multiplyScalar","isWebGLRenderTarget","texture","matrixAutoUpdate","updateMatrix","uvTransform","matrix","flipEnvMap","isCubeTexture","reflectivity","maxMipLevel","properties","__maxMipLevel","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","attributes","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","toLowerCase","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","getDependency","then","decodeDracoFile","attribute","extendTexture","transform","offset","rotation","scale","repeat","texCoord","needsUpdate","copySampleValue_","index","result","values","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t1","stride","stride2","stride3","td","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","defaultMaterial","WEBGL_CONSTANTS","5120","Int8Array","5121","5122","Int16Array","5123","5125","Uint32Array","5126","Float32Array","WEBGL_FILTERS","9728","NearestFilter","9729","LinearFilter","9984","NearestMipmapNearestFilter","9985","LinearMipmapNearestFilter","9986","NearestMipmapLinearFilter","9987","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","MIME_TYPE_FORMATS","RGBAFormat","RGBFormat","resolveURL","test","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","mesh","meshDef","morphTargetInfluences","targetNames","morphTargetDictionary","createAttributesKey","attributesKey","keys","sort","cloneBufferAttribute","isInterleavedBufferAttribute","count","itemSize","j","getX","getY","getZ","getW","BufferAttribute","options","cache","primitiveCache","textureLoader","TextureLoader","fileLoader","addPrimitiveAttributes","primitiveDef","assignAttributeAccessor","accessorIndex","accessor","addAttribute","gltfAttributeName","indices","setIndex","targets","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","normal","morphPositions","morphNormals","positionAttribute","jl","setXYZ","normalAttribute","morphAttributes","addMorphTargets","markDefs","getDependencies","dependencies","scenes","animations","cameras","catch","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","uri","reject","bufferViewDef","bufferViews","buffer","sparse","pendingBufferViews","bufferAttribute","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","textureIndex","URL","webkitURL","textureDef","textures","textureExtensions","sourceURI","images","isObjectURL","blob","Blob","mimeType","createObjectURL","getHandler","revokeObjectURL","flipY","format","sampler","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","isCompressedTexture","assignFinalMaterial","useVertexTangents","tangent","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","skinning","vertexTangents","vertexColors","VertexColors","flatShading","morphTargets","uv2","uv","onBeforeRender","materialIndex","materialType","materials","materialExtensions","sgExtension","kmuExtension","MeshStandardMaterial","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","side","DoubleSide","alphaMode","alphaTest","alphaCutoff","normalTexture","Vector2","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","sRGBEncoding","loadGeometries","primitives","createDracoPrimitive","dracoExtension","geometryPromise","cached","promise","BufferGeometry","meshIndex","depthTest","FrontSide","originalMaterials","geometries","SkinnedMesh","Mesh","skinWeight","normalizeSkinWeights","drawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","Line","LineLoop","Points","group","Group","cameraIndex","cameraDef","PerspectiveCamera","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","input","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","traverse","isMesh","outputArray","scaled","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","instanceNum","light","Bone","Object3D","PropertyBinding","sanitizeNodeName","Matrix4","applyMatrix","quaternion","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","Skeleton","matrixWorld","child","sceneIndex","sceneDef","Scene","nodeIds","OBJLoader","object_pattern","material_library_pattern","material_use_pattern","ParserState","state","vertices","normals","colors","uvs","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","smooth","startMaterial","libraries","previous","inherited","groupCount","splice","mtllib","groupStart","groupEnd","cloned","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","len","parseInt","parseNormalIndex","parseUVIndex","addVertex","a","b","src","dst","addVertexPoint","addVertexLine","addNormal","addColor","addUV","addUVLine","addFace","ua","ub","uc","na","nb","nc","vLen","ia","ic","uvLen","nLen","addPointGeometry","vi","addLineGeometry","uvi","text","setMaterials","lines","split","line","lineFirstChar","trimLeft","trim","charAt","parseFloat","vertexData","substr","faceVertices","vertex","vertexParts","v1","v2","v3","lineParts","substring","lineVertices","lineUVs","li","llen","parts","pointData","exec","concat","hasVertexColors","buffergeometry","Float32BufferAttribute","computeVertexNormals","createdMaterials","miLen","sourceMaterial","materialPoints","size","materialLine","MeshPhongMaterial","NoColors","addGroup","timeEnd","_object","_vector","_transform","getShapeFromCache","setShapeCache","createShape","reportWorld","reportVehicles","reportCollisions","reportConstraints","fixedTimeStep","last_simulation_time","world","_vec3_1","_vec3_2","_vec3_3","_quat","REPORT_CHUNKSIZE","worldreport","collisionreport","vehiclereport","constraintreport","transferableMessage","webkitPostMessage","postMessage","MESSAGE_TYPES","public_functions","last_simulation_duration","_objects","_vehicles","_constraints","_materials","_objects_ammo","_num_objects","_num_wheels","_num_constraints","_object_shapes","_motion_states","_noncached_shapes","_compound_shapes","ab","ArrayBuffer","SUPPORT_TRANSFERABLE","Bullets","Input","isLeftPressed","isRightPressed","isFwdPressed","isBwdPressed","isShiftPressed","isRLPressed","isRRPressed","isSpacePressed","isFirePressed","isXPressed","handleKeyEvent","isKeyDown","keyCode","Environment","Tmaterial","ImageUtils","PlaneGeometry","z","plane","Physijs","PlaneMesh","x","y","texture2","CubeTextureLoader","background","anisotropy","Targettexture","groundGeometry","groundMaterial","visible","ground","receiveShadow","Vector3","env3BlockGeometry","BoxBufferGeometry","env3BlockMaterial","MeshLambertMaterial","env3Block","BoxMesh","random","setAngularFactor","setAngularVelocity","other_object","linear_velocity","angular_velocity","rot","point","TargetBlockGeometry","CylinderBufferGeometry","TargetBlockMaterial","TargetBlock","points","getElementById","env1BIGBlockGeometry","env1BIGBlockMaterial","env1BIGBlock","env1TrunkBlockGeometry","env1TrunkBlockMaterial","env1TrunkBlock","hp","innerHTML","player","towerRow","zPos","env4BlockGeometry","env4BlockMaterial","env4Block","towerBuilder","numRows","cache_key","shape","description","setIdentity","Ammo","btStaticPlaneShape","depth","btBoxShape","radius","btSphereShape","btCylinderShape","btCapsuleShape","btConeShape","triangle","triangle_mesh","btTriangleMesh","triangles","addTriangle","btBvhTriangleMeshShape","btConvexHullShape","addPoint","ptr","allocate","xpts","ypts","ALLOC_NORMAL","f","setValue","btHeightfieldTerrainShape","absMaxHeight","xsize","ysize","setLocalScaling","init","importScripts","ammo","btTransform","btVector3","btQuaternion","reportsize","broadphase","collisionConfiguration","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","solver","btSequentialImpulseConstraintSolver","aabbmin","aabbmax","btAxisSweep3","btDbvtBroadphase","btDiscreteDynamicsWorld","rateLimit","cmd","registerMaterial","unRegisterMaterial","setFixedTimeStep","setGravity","addObject","motionState","rbInfo","_child","compound_shape","btCompoundShape","addChildShape","trans","position_offset","setOrigin","w","setRotation","destroy","calculateLocalInertia","mass","btDefaultMotionState","btRigidBodyConstructionInfo","materialId","set_m_friction","friction","set_m_restitution","restitution","btRigidBody","collision_flags","setCollisionFlags","addRigidBody","addVehicle","vehicle","vehicle_tuning","btVehicleTuning","set_m_suspensionStiffness","suspension_stiffness","set_m_suspensionCompression","suspension_compression","set_m_suspensionDamping","suspension_damping","set_m_maxSuspensionTravelCm","max_suspension_travel","set_m_maxSuspensionForce","max_suspension_force","btRaycastVehicle","rigidBody","btDefaultVehicleRaycaster","tuning","setActivationState","setCoordinateSystem","removeVehicle","addWheel","connection_point","wheel_direction","wheel_axle","suspension_rest_length","wheel_radius","is_front_wheel","setSteering","details","setSteeringValue","steering","wheel","setBrake","brake","applyEngineForce","force","removeObject","removeRigidBody","updateTransform","getMotionState","getWorldTransform","pos","quat","setWorldTransform","activate","updateMass","setMassProps","applyCentralImpulse","applyImpulse","impulse_x","impulse_y","impulse_z","applyTorque","torque_x","torque_y","torque_z","applyCentralForce","applyForce","force_x","force_y","force_z","onSimulationResume","setLinearVelocity","setLinearFactor","setDamping","linear","angular","setCcdMotionThreshold","threshold","setCcdSweptSphereRadius","addConstraint","constraint","objectb","positiona","btPoint2PointConstraint","objecta","positionb","axis","btHingeConstraint","transforma","getRotation","setEuler","transformb","btSliderConstraint","setEulerZYX","axisa","axisb","btConeTwistConstraint","setLimit","btGeneric6DofConstraint","enableFeedback","removeConstraint","constraint_setBreakingImpulseThreshold","undefind","setBreakingImpulseThreshold","simulate","timeStep","maxSubSteps","ceil","stepSimulation","hinge_setLimits","low","high","bias_factor","relaxation_factor","hinge_enableAngularMotor","enableAngularMotor","velocity","acceleration","getRigidBodyA","getRigidBodyB","hinge_disableMotor","enableMotor","slider_setLimits","setLowerLinLimit","lin_lower","setUpperLinLimit","lin_upper","setLowerAngLimit","ang_lower","setUpperAngLimit","ang_upper","slider_setRestitution","setSoftnessLimLin","setSoftnessLimAng","slider_enableLinearMotor","setTargetLinMotorVelocity","setMaxLinMotorForce","setPoweredLinMotor","slider_disableLinearMotor","slider_enableAngularMotor","setTargetAngMotorVelocity","setMaxAngMotorForce","setPoweredAngMotor","slider_disableAngularMotor","conetwist_setLimit","conetwist_enableMotor","conetwist_setMaxMotorImpulse","setMaxMotorImpulse","max_impulse","conetwist_setMotorTarget","setMotorTarget","conetwist_disableMotor","dof_setLinearLowerLimit","setLinearLowerLimit","dof_setLinearUpperLimit","setLinearUpperLimit","dof_setAngularLowerLimit","setAngularLowerLimit","dof_setAngularUpperLimit","setAngularUpperLimit","dof_enableAngularMotor","getRotationalLimitMotor","which","set_m_enableMotor","dof_configureAngularMotor","motor","set_m_loLimit","low_angle","set_m_hiLimit","high_angle","set_m_targetVelocity","set_m_maxMotorForce","max_force","dof_disableAngularMotor","origin","getCenterOfMassTransform","getOrigin","getLinearVelocity","getAngularVelocity","manifold","num_contacts","pt","dp","getDispatcher","num","getNumManifolds","getManifoldByIndexInternal","getNumContacts","getContactPoint","getBody0","getBody1","get_m_normalWorldOnB","getNumWheels","getWheelInfo","get_m_worldTransform","offset_body","getFrameOffsetA","getAppliedImpulse","onmessage","Eventable","getObjectId","convertWorldPositionToObject","addObjectChildren","_temp1","_temp2","_id","_is_simulating","_Physijs","_temp_vector3_1","_temp_vector3_2","_temp_matrix4_1","_quaternion_1","Quaternion","scripts","_eventListeners","event_name","callback","removeEventListener","dispatchEvent","arguments","apply","make","obj","atan2","asin","c1","c2","c3","c1c2","s1s2","cos","sin","identity","makeRotationFromQuaternion","getInverse","sub","applyMatrix4","noConflict","physijs_material","_physijs","PointConstraint","appliedImpulse","getDefinition","HingeConstraint","parent","setLimits","execute","disableMotor","SliderConstraint","setRestitution","enableLinearMotor","disableLinearMotor","disableAngularMotor","ConeTwistConstraint","setFromEuler","Euler","setFromRotationMatrix","DOFConstraint","limit","configureAngularMotor","_worker","Worker","worker","_materials_ref_counts","_temp","_updateScene","_updateCollisions","_updateVehicles","_updateConstraints","debug","dir","num_objects","__dirtyPosition","__dirtyRotation","linearVelocity","angularVelocity","wheels","extractRotation","addVectors","object2","id1","id2","collisions","normal_offsets","touches","subVectors","normal_offset","show_marker","marker","SphereGeometry","MeshNormalMaterial","BoxGeometry","updateMatrixWorld","setFromMatrixPosition","Vehicle","pop","gravity","object_id","boundingBox","computeBoundingBox","__defineGetter__","__defineSetter__","factor","faces","HeightfieldMesh","xdiv","ydiv","sqrt","abs","SphereMesh","boundingSphere","computeBoundingSphere","pow","CylinderMesh","CapsuleMesh","ConeMesh","ConcaveMesh","face","Face3","Face4","ConvexMesh","VehicleTuning","friction_slip","wheel_geometry","wheel_material","castShadow","amount","fire","playerSpeed","bulletsLBlockGeometry","bulletsLBlockMaterial","bulletsLBlock","wpVector2","getWorldDirection","createdAt","clock","getElapsedTime","selectedObject","getObjectByName","log","winner","opponent","p2fire","p2BulletsBlockGeometry","p2BulletsBlockMaterial","p2BulletsBlock","wpVector","player2","mechMesh","points2","mechMesh2","lightPlayer","radarGeometry","radarMaterial","wireframe","radar","p1radarGeometry","ConeBufferGeometry","p1radarMaterial","rotateX","p1radar","p2radarGeometry","p2radarMaterial","p2radar","hpBarGeometry","hpBarMaterial","hpBar","hp2BarGeometry","hp2BarMaterial","hp2Bar","rotateAngle","bullets","lastTimeStamp","TreeLoader","treeMesh","treeGeometry","treeMaterial","tree","randX","randZ","ph","serverPackage","player2Data","bulletCount","stats","playerGeometry","playerMaterial","crosshair","Fog","innerWidth","innerHeight","light1","light2","AmbientLight","createLights","CubeGeometry","WebGLRenderer","antialias","setSize","setPixelRatio","physicallyCorrectLights","hud","pointTally","opponentHP","marginTop","playerHP","winnerUI","aspect","updateProjectionMatrix","Raycaster","Clock","emit","h","pb","animate","timeStamp","delta","getDelta","requestAnimationFrame","timeDelta","movementSpeed","boost","translateOnAxis","rotateOnAxis","firing","setTimeout","pointEle","tquaternion","setFromQuaternion","degToRad","getWorldQuaternion","on","serverPack","radarX","radarY","radarZ","radarX2","radarY2","radarZ2","render"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\n\nwindow.onload = () => {\n\n  //!STATS\n  /**\n * @author mrdoob / http://mrdoob.com/\n */\n\n  var Stats = function () {\n\n    var mode = 0;\n\n    var container = document.createElement('div');\n    container.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n    container.addEventListener('click', function (event) {\n\n      event.preventDefault();\n      showPanel(++mode % container.children.length);\n\n    }, false);\n\n    //\n\n    function addPanel(panel) {\n\n      container.appendChild(panel.dom);\n      return panel;\n\n    }\n\n    function showPanel(id) {\n\n      for (var i = 0; i < container.children.length; i++) {\n\n        container.children[i].style.display = i === id ? 'block' : 'none';\n\n      }\n\n      mode = id;\n\n    }\n\n    //\n\n    var beginTime = (performance || Date).now(), prevTime = beginTime, frames = 0;\n\n    var fpsPanel = addPanel(new Stats.Panel('FPS', '#0ff', '#002'));\n    var msPanel = addPanel(new Stats.Panel('MS', '#0f0', '#020'));\n\n    if (self.performance && self.performance.memory) {\n\n      var memPanel = addPanel(new Stats.Panel('MB', '#f08', '#201'));\n\n    }\n\n    showPanel(0);\n\n    return {\n\n      REVISION: 16,\n\n      dom: container,\n\n      addPanel: addPanel,\n      showPanel: showPanel,\n\n      begin: function () {\n\n        beginTime = (performance || Date).now();\n\n      },\n\n      end: function () {\n\n        frames++;\n\n        var time = (performance || Date).now();\n\n        msPanel.update(time - beginTime, 200);\n\n        if (time >= prevTime + 1000) {\n\n          fpsPanel.update((frames * 1000) / (time - prevTime), 100);\n\n          prevTime = time;\n          frames = 0;\n\n          if (memPanel) {\n\n            var memory = performance.memory;\n            memPanel.update(memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576);\n\n          }\n\n        }\n\n        return time;\n\n      },\n\n      update: function () {\n\n        beginTime = this.end();\n\n      },\n\n      // Backwards Compatibility\n\n      domElement: container,\n      setMode: showPanel\n\n    };\n\n  };\n\n  Stats.Panel = function (name, fg, bg) {\n\n    var min = Infinity, max = 0, round = Math.round;\n    var PR = round(window.devicePixelRatio || 1);\n\n    var WIDTH = 80 * PR, HEIGHT = 48 * PR,\n      TEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n      GRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n      GRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n    var canvas = document.createElement('canvas');\n    canvas.width = WIDTH;\n    canvas.height = HEIGHT;\n    canvas.style.cssText = 'width:80px;height:48px';\n\n    var context = canvas.getContext('2d');\n    context.font = 'bold ' + (9 * PR) + 'px Helvetica,Arial,sans-serif';\n    context.textBaseline = 'top';\n\n    context.fillStyle = bg;\n    context.fillRect(0, 0, WIDTH, HEIGHT);\n\n    context.fillStyle = fg;\n    context.fillText(name, TEXT_X, TEXT_Y);\n    context.fillRect(GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT);\n\n    context.fillStyle = bg;\n    context.globalAlpha = 0.9;\n    context.fillRect(GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT);\n\n    return {\n\n      dom: canvas,\n\n      update: function (value, maxValue) {\n\n        min = Math.min(min, value);\n        max = Math.max(max, value);\n\n        context.fillStyle = bg;\n        context.globalAlpha = 1;\n        context.fillRect(0, 0, WIDTH, GRAPH_Y);\n        context.fillStyle = fg;\n        context.fillText(round(value) + ' ' + name + ' (' + round(min) + '-' + round(max) + ')', TEXT_X, TEXT_Y);\n\n        context.drawImage(canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT);\n\n        context.fillRect(GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT);\n\n        context.fillStyle = bg;\n        context.globalAlpha = 0.9;\n        context.fillRect(GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round((1 - (value / maxValue)) * GRAPH_HEIGHT));\n\n      }\n\n    };\n\n  };\n  //!STATS\n\n  //!TerrainLoader\n  /**\n * @author Bjorn Sandvik / http://thematicmapping.org/\n */\n\n  THREE.TerrainLoader = function (manager) {\n\n    this.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;\n\n  };\n\n  THREE.TerrainLoader.prototype = {\n\n    constructor: THREE.TerrainLoader,\n\n    load: function (url, onLoad, onProgress, onError) {\n\n      var scope = this;\n      var request = new XMLHttpRequest();\n\n      if (onLoad !== undefined) {\n\n        request.addEventListener('load', function (event) {\n\n          onLoad(new Uint16Array(event.target.response));\n          scope.manager.itemEnd(url);\n\n        }, false);\n\n      }\n\n      if (onProgress !== undefined) {\n\n        request.addEventListener('progress', function (event) {\n\n          onProgress(event);\n\n        }, false);\n\n      }\n\n      if (onError !== undefined) {\n\n        request.addEventListener('error', function (event) {\n\n          onError(event);\n\n        }, false);\n\n      }\n\n      if (this.crossOrigin !== undefined) request.crossOrigin = this.crossOrigin;\n\n      request.open('GET', url, true);\n\n      request.responseType = 'arraybuffer';\n\n      request.send(null);\n\n      scope.manager.itemStart(url);\n\n    },\n\n    setCrossOrigin: function (value) {\n\n      this.crossOrigin = value;\n\n    }\n\n  };\n\n  //!GLTFLoader\n  let socket = io.connect();\n  /**\n   * @author Rich Tibbett / https://github.com/richtr\n   * @author mrdoob / http://mrdoob.com/\n   * @author Tony Parisi / http://www.tonyparisi.com/\n   * @author Takahiro / https://github.com/takahirox\n   * @author Don McCurdy / https://www.donmccurdy.com\n   */\n\n  THREE.GLTFLoader = (function () {\n\n    function GLTFLoader(manager) {\n\n      THREE.Loader.call(this, manager);\n\n      this.dracoLoader = null;\n      this.ddsLoader = null;\n\n    }\n\n    GLTFLoader.prototype = Object.assign(Object.create(THREE.Loader.prototype), {\n\n      constructor: GLTFLoader,\n\n      load: function (url, onLoad, onProgress, onError) {\n\n        var scope = this;\n\n        var resourcePath;\n\n        if (this.resourcePath !== '') {\n\n          resourcePath = this.resourcePath;\n\n        } else if (this.path !== '') {\n\n          resourcePath = this.path;\n\n        } else {\n\n          resourcePath = THREE.LoaderUtils.extractUrlBase(url);\n\n        }\n\n        // Tells the LoadingManager to track an extra item, which resolves after\n        // the model is fully loaded. This means the count of items loaded will\n        // be incorrect, but ensures manager.onLoad() does not fire early.\n        // debugger\n        scope.manager.itemStart(url);\n\n        var _onError = function (e) {\n\n          if (onError) {\n\n            onError(e);\n\n          } else {\n\n            console.error(e);\n\n          }\n\n          scope.manager.itemError(url);\n          scope.manager.itemEnd(url);\n\n        };\n\n        var loader = new THREE.FileLoader(scope.manager);\n\n        loader.setPath(this.path);\n        loader.setResponseType('arraybuffer');\n\n        if (scope.crossOrigin === 'use-credentials') {\n\n          loader.setWithCredentials(true);\n\n        }\n\n        loader.load(url, function (data) {\n\n          try {\n\n            scope.parse(data, resourcePath, function (gltf) {\n\n              onLoad(gltf);\n\n              scope.manager.itemEnd(url);\n\n            }, _onError);\n\n          } catch (e) {\n\n            _onError(e);\n\n          }\n\n        }, onProgress, _onError);\n\n      },\n\n      setDRACOLoader: function (dracoLoader) {\n\n        this.dracoLoader = dracoLoader;\n        return this;\n\n      },\n\n      setDDSLoader: function (ddsLoader) {\n\n        this.ddsLoader = ddsLoader;\n        return this;\n\n      },\n\n      parse: function (data, path, onLoad, onError) {\n\n        var content;\n        var extensions = {};\n\n        if (typeof data === 'string') {\n\n          content = data;\n\n        } else {\n\n          var magic = THREE.LoaderUtils.decodeText(new Uint8Array(data, 0, 4));\n\n          if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n\n            try {\n\n              extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n\n            } catch (error) {\n\n              if (onError) onError(error);\n              return;\n\n            }\n\n            content = extensions[EXTENSIONS.KHR_BINARY_GLTF].content;\n\n          } else {\n\n            content = THREE.LoaderUtils.decodeText(new Uint8Array(data));\n\n          }\n\n        }\n\n        var json = JSON.parse(content);\n\n        if (json.asset === undefined || json.asset.version[0] < 2) {\n\n          if (onError) onError(new Error('THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.'));\n          return;\n\n        }\n\n        if (json.extensionsUsed) {\n\n          for (var i = 0; i < json.extensionsUsed.length; ++i) {\n\n            var extensionName = json.extensionsUsed[i];\n            var extensionsRequired = json.extensionsRequired || [];\n\n            switch (extensionName) {\n\n              case EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\n                extensions[extensionName] = new GLTFLightsExtension(json);\n                break;\n\n              case EXTENSIONS.KHR_MATERIALS_UNLIT:\n                extensions[extensionName] = new GLTFMaterialsUnlitExtension();\n                break;\n\n              case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n                extensions[extensionName] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n                break;\n\n              case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n                extensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\n                break;\n\n              case EXTENSIONS.MSFT_TEXTURE_DDS:\n                extensions[EXTENSIONS.MSFT_TEXTURE_DDS] = new GLTFTextureDDSExtension(this.ddsLoader);\n                break;\n\n              case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n                extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] = new GLTFTextureTransformExtension();\n                break;\n\n              default:\n\n                if (extensionsRequired.indexOf(extensionName) >= 0) {\n\n                  console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\n\n                }\n\n            }\n\n          }\n\n        }\n\n        var parser = new GLTFParser(json, extensions, {\n\n          path: path || this.resourcePath || '',\n          crossOrigin: this.crossOrigin,\n          manager: this.manager\n\n        });\n\n        parser.parse(onLoad, onError);\n\n      }\n\n    });\n\n    /* GLTFREGISTRY */\n\n    function GLTFRegistry() {\n\n      var objects = {};\n\n      return {\n\n        get: function (key) {\n\n          return objects[key];\n\n        },\n\n        add: function (key, object) {\n\n          objects[key] = object;\n\n        },\n\n        remove: function (key) {\n\n          delete objects[key];\n\n        },\n\n        removeAll: function () {\n\n          objects = {};\n\n        }\n\n      };\n\n    }\n\n    /*********************************/\n    /********** EXTENSIONS ***********/\n    /*********************************/\n\n    var EXTENSIONS = {\n      KHR_BINARY_GLTF: 'KHR_binary_glTF',\n      KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n      KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n      KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n      KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n      KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n      MSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n    };\n\n    /**\n     * DDS Texture Extension\n     *\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n     *\n     */\n    function GLTFTextureDDSExtension(ddsLoader) {\n\n      if (!ddsLoader) {\n\n        throw new Error('THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader');\n\n      }\n\n      this.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n      this.ddsLoader = ddsLoader;\n\n    }\n\n    /**\n     * Punctual Lights Extension\n     *\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n     */\n    function GLTFLightsExtension(json) {\n\n      this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n      var extension = (json.extensions && json.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL]) || {};\n      this.lightDefs = extension.lights || [];\n\n    }\n\n    GLTFLightsExtension.prototype.loadLight = function (lightIndex) {\n\n      var lightDef = this.lightDefs[lightIndex];\n      var lightNode;\n\n      var color = new THREE.Color(0xffffff);\n      if (lightDef.color !== undefined) color.fromArray(lightDef.color);\n\n      var range = lightDef.range !== undefined ? lightDef.range : 0;\n\n      switch (lightDef.type) {\n\n        case 'directional':\n          lightNode = new THREE.DirectionalLight(color);\n          lightNode.target.position.set(0, 0, - 1);\n          lightNode.add(lightNode.target);\n          break;\n\n        case 'point':\n          lightNode = new THREE.PointLight(color);\n          lightNode.distance = range;\n          break;\n\n        case 'spot':\n          lightNode = new THREE.SpotLight(color);\n          lightNode.distance = range;\n          // Handle spotlight properties.\n          lightDef.spot = lightDef.spot || {};\n          lightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n          lightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n          lightNode.angle = lightDef.spot.outerConeAngle;\n          lightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n          lightNode.target.position.set(0, 0, - 1);\n          lightNode.add(lightNode.target);\n          break;\n\n        default:\n          throw new Error('THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".');\n\n      }\n\n      // Some lights (e.g. spot) default to a position other than the origin. Reset the position\n      // here, because node-level parsing will only override position if explicitly specified.\n      lightNode.position.set(0, 0, 0);\n\n      lightNode.decay = 2;\n\n      if (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity;\n\n      lightNode.name = lightDef.name || ('light_' + lightIndex);\n\n      return Promise.resolve(lightNode);\n\n    };\n\n    /**\n     * Unlit Materials Extension\n     *\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n     */\n    function GLTFMaterialsUnlitExtension() {\n\n      this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n    }\n\n    GLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n      return THREE.MeshBasicMaterial;\n\n    };\n\n    GLTFMaterialsUnlitExtension.prototype.extendParams = function (materialParams, materialDef, parser) {\n\n      var pending = [];\n\n      materialParams.color = new THREE.Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n\n      var metallicRoughness = materialDef.pbrMetallicRoughness;\n\n      if (metallicRoughness) {\n\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n\n          var array = metallicRoughness.baseColorFactor;\n\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n\n        }\n\n      }\n\n      return Promise.all(pending);\n\n    };\n\n    /* BINARY EXTENSION */\n    var BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n    var BINARY_EXTENSION_HEADER_LENGTH = 12;\n    var BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n    function GLTFBinaryExtension(data) {\n\n      this.name = EXTENSIONS.KHR_BINARY_GLTF;\n      this.content = null;\n      this.body = null;\n\n      var headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n\n      this.header = {\n        magic: THREE.LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n        version: headerView.getUint32(4, true),\n        length: headerView.getUint32(8, true)\n      };\n\n      if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n\n        throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');\n\n      } else if (this.header.version < 2.0) {\n\n        throw new Error('THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.');\n\n      }\n\n      var chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n      var chunkIndex = 0;\n\n      while (chunkIndex < chunkView.byteLength) {\n\n        var chunkLength = chunkView.getUint32(chunkIndex, true);\n        chunkIndex += 4;\n\n        var chunkType = chunkView.getUint32(chunkIndex, true);\n        chunkIndex += 4;\n\n        if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n\n          var contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n          this.content = THREE.LoaderUtils.decodeText(contentArray);\n\n        } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n\n          var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n          this.body = data.slice(byteOffset, byteOffset + chunkLength);\n\n        }\n\n        // Clients must ignore chunks with unknown types.\n\n        chunkIndex += chunkLength;\n\n      }\n\n      if (this.content === null) {\n\n        throw new Error('THREE.GLTFLoader: JSON content not found.');\n\n      }\n\n    }\n\n    /**\n     * DRACO Mesh Compression Extension\n     *\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n     */\n    function GLTFDracoMeshCompressionExtension(json, dracoLoader) {\n\n      if (!dracoLoader) {\n\n        throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.');\n\n      }\n\n      this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n      this.json = json;\n      this.dracoLoader = dracoLoader;\n\n    }\n\n    GLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function (primitive, parser) {\n\n      var json = this.json;\n      var dracoLoader = this.dracoLoader;\n      var bufferViewIndex = primitive.extensions[this.name].bufferView;\n      var gltfAttributeMap = primitive.extensions[this.name].attributes;\n      var threeAttributeMap = {};\n      var attributeNormalizedMap = {};\n      var attributeTypeMap = {};\n\n      for (var attributeName in gltfAttributeMap) {\n\n        var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n\n        threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n\n      }\n\n      for (attributeName in primitive.attributes) {\n\n        var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n\n        if (gltfAttributeMap[attributeName] !== undefined) {\n\n          var accessorDef = json.accessors[primitive.attributes[attributeName]];\n          var componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n\n          attributeTypeMap[threeAttributeName] = componentType;\n          attributeNormalizedMap[threeAttributeName] = accessorDef.normalized === true;\n\n        }\n\n      }\n\n      return parser.getDependency('bufferView', bufferViewIndex).then(function (bufferView) {\n\n        return new Promise(function (resolve) {\n\n          dracoLoader.decodeDracoFile(bufferView, function (geometry) {\n\n            for (var attributeName in geometry.attributes) {\n\n              var attribute = geometry.attributes[attributeName];\n              var normalized = attributeNormalizedMap[attributeName];\n\n              if (normalized !== undefined) attribute.normalized = normalized;\n\n            }\n\n            resolve(geometry);\n\n          }, threeAttributeMap, attributeTypeMap);\n\n        });\n\n      });\n\n    };\n\n    /**\n     * Texture Transform Extension\n     *\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n     */\n    function GLTFTextureTransformExtension() {\n\n      this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n    }\n\n    GLTFTextureTransformExtension.prototype.extendTexture = function (texture, transform) {\n\n      texture = texture.clone();\n\n      if (transform.offset !== undefined) {\n\n        texture.offset.fromArray(transform.offset);\n\n      }\n\n      if (transform.rotation !== undefined) {\n\n        texture.rotation = transform.rotation;\n\n      }\n\n      if (transform.scale !== undefined) {\n\n        texture.repeat.fromArray(transform.scale);\n\n      }\n\n      if (transform.texCoord !== undefined) {\n\n        console.warn('THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.');\n\n      }\n\n      texture.needsUpdate = true;\n\n      return texture;\n\n    };\n\n    /**\n     * Specular-Glossiness Extension\n     *\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n     */\n    function GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n      return {\n\n        name: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n        specularGlossinessParams: [\n          'color',\n          'map',\n          'lightMap',\n          'lightMapIntensity',\n          'aoMap',\n          'aoMapIntensity',\n          'emissive',\n          'emissiveIntensity',\n          'emissiveMap',\n          'bumpMap',\n          'bumpScale',\n          'normalMap',\n          'displacementMap',\n          'displacementScale',\n          'displacementBias',\n          'specularMap',\n          'specular',\n          'glossinessMap',\n          'glossiness',\n          'alphaMap',\n          'envMap',\n          'envMapIntensity',\n          'refractionRatio',\n        ],\n\n        getMaterialType: function () {\n\n          return THREE.ShaderMaterial;\n\n        },\n\n        extendParams: function (materialParams, materialDef, parser) {\n\n          var pbrSpecularGlossiness = materialDef.extensions[this.name];\n\n          var shader = THREE.ShaderLib['standard'];\n\n          var uniforms = THREE.UniformsUtils.clone(shader.uniforms);\n\n          var specularMapParsFragmentChunk = [\n            '#ifdef USE_SPECULARMAP',\n            '\tuniform sampler2D specularMap;',\n            '#endif'\n          ].join('\\n');\n\n          var glossinessMapParsFragmentChunk = [\n            '#ifdef USE_GLOSSINESSMAP',\n            '\tuniform sampler2D glossinessMap;',\n            '#endif'\n          ].join('\\n');\n\n          var specularMapFragmentChunk = [\n            'vec3 specularFactor = specular;',\n            '#ifdef USE_SPECULARMAP',\n            '\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n            '\ttexelSpecular = sRGBToLinear( texelSpecular );',\n            '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n            '\tspecularFactor *= texelSpecular.rgb;',\n            '#endif'\n          ].join('\\n');\n\n          var glossinessMapFragmentChunk = [\n            'float glossinessFactor = glossiness;',\n            '#ifdef USE_GLOSSINESSMAP',\n            '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n            '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n            '\tglossinessFactor *= texelGlossiness.a;',\n            '#endif'\n          ].join('\\n');\n\n          var lightPhysicalFragmentChunk = [\n            'PhysicalMaterial material;',\n            'material.diffuseColor = diffuseColor.rgb;',\n            'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\n            'material.specularColor = specularFactor.rgb;',\n          ].join('\\n');\n\n          var fragmentShader = shader.fragmentShader\n            .replace('uniform float roughness;', 'uniform vec3 specular;')\n            .replace('uniform float metalness;', 'uniform float glossiness;')\n            .replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk)\n            .replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk)\n            .replace('#include <roughnessmap_fragment>', specularMapFragmentChunk)\n            .replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk)\n            .replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk);\n\n          delete uniforms.roughness;\n          delete uniforms.metalness;\n          delete uniforms.roughnessMap;\n          delete uniforms.metalnessMap;\n\n          uniforms.specular = { value: new THREE.Color().setHex(0x111111) };\n          uniforms.glossiness = { value: 0.5 };\n          uniforms.specularMap = { value: null };\n          uniforms.glossinessMap = { value: null };\n\n          materialParams.vertexShader = shader.vertexShader;\n          materialParams.fragmentShader = fragmentShader;\n          materialParams.uniforms = uniforms;\n          materialParams.defines = { 'STANDARD': '' };\n\n          materialParams.color = new THREE.Color(1.0, 1.0, 1.0);\n          materialParams.opacity = 1.0;\n\n          var pending = [];\n\n          if (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n\n            var array = pbrSpecularGlossiness.diffuseFactor;\n\n            materialParams.color.fromArray(array);\n            materialParams.opacity = array[3];\n\n          }\n\n          if (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n\n            pending.push(parser.assignTexture(materialParams, 'map', pbrSpecularGlossiness.diffuseTexture));\n\n          }\n\n          materialParams.emissive = new THREE.Color(0.0, 0.0, 0.0);\n          materialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n          materialParams.specular = new THREE.Color(1.0, 1.0, 1.0);\n\n          if (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n\n            materialParams.specular.fromArray(pbrSpecularGlossiness.specularFactor);\n\n          }\n\n          if (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n\n            var specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n            pending.push(parser.assignTexture(materialParams, 'glossinessMap', specGlossMapDef));\n            pending.push(parser.assignTexture(materialParams, 'specularMap', specGlossMapDef));\n\n          }\n\n          return Promise.all(pending);\n\n        },\n\n        createMaterial: function (params) {\n\n          // setup material properties based on MeshStandardMaterial for Specular-Glossiness\n\n          var material = new THREE.ShaderMaterial({\n            defines: params.defines,\n            vertexShader: params.vertexShader,\n            fragmentShader: params.fragmentShader,\n            uniforms: params.uniforms,\n            fog: true,\n            lights: true,\n            opacity: params.opacity,\n            transparent: params.transparent\n          });\n\n          material.isGLTFSpecularGlossinessMaterial = true;\n\n          material.color = params.color;\n\n          material.map = params.map === undefined ? null : params.map;\n\n          material.lightMap = null;\n          material.lightMapIntensity = 1.0;\n\n          material.aoMap = params.aoMap === undefined ? null : params.aoMap;\n          material.aoMapIntensity = 1.0;\n\n          material.emissive = params.emissive;\n          material.emissiveIntensity = 1.0;\n          material.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;\n\n          material.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;\n          material.bumpScale = 1;\n\n          material.normalMap = params.normalMap === undefined ? null : params.normalMap;\n\n          if (params.normalScale) material.normalScale = params.normalScale;\n\n          material.displacementMap = null;\n          material.displacementScale = 1;\n          material.displacementBias = 0;\n\n          material.specularMap = params.specularMap === undefined ? null : params.specularMap;\n          material.specular = params.specular;\n\n          material.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;\n          material.glossiness = params.glossiness;\n\n          material.alphaMap = null;\n\n          material.envMap = params.envMap === undefined ? null : params.envMap;\n          material.envMapIntensity = 1.0;\n\n          material.refractionRatio = 0.98;\n\n          material.extensions.derivatives = true;\n\n          return material;\n\n        },\n\n        /**\n         * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can\n         * copy only properties it knows about or inherits, and misses many properties that would\n         * normally be defined by MeshStandardMaterial.\n         *\n         * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of\n         * loading a glTF model, but cloning later (e.g. by the user) would require these changes\n         * AND also updating `.onBeforeRender` on the parent mesh.\n         *\n         * @param  {THREE.ShaderMaterial} source\n         * @return {THREE.ShaderMaterial}\n         */\n        cloneMaterial: function (source) {\n\n          var target = source.clone();\n\n          target.isGLTFSpecularGlossinessMaterial = true;\n\n          var params = this.specularGlossinessParams;\n\n          for (var i = 0, il = params.length; i < il; i++) {\n\n            var value = source[params[i]];\n            target[params[i]] = (value && value.isColor) ? value.clone() : value;\n\n          }\n\n          return target;\n\n        },\n\n        // Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.\n        refreshUniforms: function (renderer, scene, camera, geometry, material) {\n\n          if (material.isGLTFSpecularGlossinessMaterial !== true) {\n\n            return;\n\n          }\n\n          var uniforms = material.uniforms;\n          var defines = material.defines;\n\n          uniforms.opacity.value = material.opacity;\n\n          uniforms.diffuse.value.copy(material.color);\n          uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);\n\n          uniforms.map.value = material.map;\n          uniforms.specularMap.value = material.specularMap;\n          uniforms.alphaMap.value = material.alphaMap;\n\n          uniforms.lightMap.value = material.lightMap;\n          uniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n          uniforms.aoMap.value = material.aoMap;\n          uniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n          // uv repeat and offset setting priorities\n          // 1. color map\n          // 2. specular map\n          // 3. normal map\n          // 4. bump map\n          // 5. alpha map\n          // 6. emissive map\n\n          var uvScaleMap;\n\n          if (material.map) {\n\n            uvScaleMap = material.map;\n\n          } else if (material.specularMap) {\n\n            uvScaleMap = material.specularMap;\n\n          } else if (material.displacementMap) {\n\n            uvScaleMap = material.displacementMap;\n\n          } else if (material.normalMap) {\n\n            uvScaleMap = material.normalMap;\n\n          } else if (material.bumpMap) {\n\n            uvScaleMap = material.bumpMap;\n\n          } else if (material.glossinessMap) {\n\n            uvScaleMap = material.glossinessMap;\n\n          } else if (material.alphaMap) {\n\n            uvScaleMap = material.alphaMap;\n\n          } else if (material.emissiveMap) {\n\n            uvScaleMap = material.emissiveMap;\n\n          }\n\n          if (uvScaleMap !== undefined) {\n\n            // backwards compatibility\n            if (uvScaleMap.isWebGLRenderTarget) {\n\n              uvScaleMap = uvScaleMap.texture;\n\n            }\n\n            if (uvScaleMap.matrixAutoUpdate === true) {\n\n              uvScaleMap.updateMatrix();\n\n            }\n\n            uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n\n          }\n\n          if (material.envMap) {\n\n            uniforms.envMap.value = material.envMap;\n            uniforms.envMapIntensity.value = material.envMapIntensity;\n\n            // don't flip CubeTexture envMaps, flip everything else:\n            //  WebGLRenderTargetCube will be flipped for backwards compatibility\n            //  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n            // this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n            uniforms.flipEnvMap.value = material.envMap.isCubeTexture ? - 1 : 1;\n\n            uniforms.reflectivity.value = material.reflectivity;\n            uniforms.refractionRatio.value = material.refractionRatio;\n\n            uniforms.maxMipLevel.value = renderer.properties.get(material.envMap).__maxMipLevel;\n\n          }\n\n          uniforms.specular.value.copy(material.specular);\n          uniforms.glossiness.value = material.glossiness;\n\n          uniforms.glossinessMap.value = material.glossinessMap;\n\n          uniforms.emissiveMap.value = material.emissiveMap;\n          uniforms.bumpMap.value = material.bumpMap;\n          uniforms.normalMap.value = material.normalMap;\n\n          uniforms.displacementMap.value = material.displacementMap;\n          uniforms.displacementScale.value = material.displacementScale;\n          uniforms.displacementBias.value = material.displacementBias;\n\n          if (uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined) {\n\n            defines.USE_GLOSSINESSMAP = '';\n            // set USE_ROUGHNESSMAP to enable vUv\n            defines.USE_ROUGHNESSMAP = '';\n\n          }\n\n          if (uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined) {\n\n            delete defines.USE_GLOSSINESSMAP;\n            delete defines.USE_ROUGHNESSMAP;\n\n          }\n\n        }\n\n      };\n\n    }\n\n    /*********************************/\n    /********** INTERPOLATION ********/\n    /*********************************/\n\n    // Spline Interpolation\n    // Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n    function GLTFCubicSplineInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n\n      THREE.Interpolant.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n\n    }\n\n    GLTFCubicSplineInterpolant.prototype = Object.create(THREE.Interpolant.prototype);\n    GLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n    GLTFCubicSplineInterpolant.prototype.copySampleValue_ = function (index) {\n\n      // Copies a sample value to the result buffer. See description of glTF\n      // CUBICSPLINE values layout in interpolate_() function below.\n\n      var result = this.resultBuffer,\n        values = this.sampleValues,\n        valueSize = this.valueSize,\n        offset = index * valueSize * 3 + valueSize;\n\n      for (var i = 0; i !== valueSize; i++) {\n\n        result[i] = values[offset + i];\n\n      }\n\n      return result;\n\n    };\n\n    GLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n    GLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n    GLTFCubicSplineInterpolant.prototype.interpolate_ = function (i1, t0, t, t1) {\n\n      var result = this.resultBuffer;\n      var values = this.sampleValues;\n      var stride = this.valueSize;\n\n      var stride2 = stride * 2;\n      var stride3 = stride * 3;\n\n      var td = t1 - t0;\n\n      var p = (t - t0) / td;\n      var pp = p * p;\n      var ppp = pp * p;\n\n      var offset1 = i1 * stride3;\n      var offset0 = offset1 - stride3;\n\n      var s2 = - 2 * ppp + 3 * pp;\n      var s3 = ppp - pp;\n      var s0 = 1 - s2;\n      var s1 = s3 - pp + p;\n\n      // Layout of keyframe output values for CUBICSPLINE animations:\n      //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n      for (var i = 0; i !== stride; i++) {\n\n        var p0 = values[offset0 + i + stride]; // splineVertex_k\n        var m0 = values[offset0 + i + stride2] * td; // outTangent_k * (t_k+1 - t_k)\n        var p1 = values[offset1 + i + stride]; // splineVertex_k+1\n        var m1 = values[offset1 + i] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n        result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n      }\n\n      return result;\n\n    };\n\n    /*********************************/\n    /********** INTERNALS ************/\n    /*********************************/\n\n    /* CONSTANTS */\n\n    var WEBGL_CONSTANTS = {\n      FLOAT: 5126,\n      //FLOAT_MAT2: 35674,\n      FLOAT_MAT3: 35675,\n      FLOAT_MAT4: 35676,\n      FLOAT_VEC2: 35664,\n      FLOAT_VEC3: 35665,\n      FLOAT_VEC4: 35666,\n      LINEAR: 9729,\n      REPEAT: 10497,\n      SAMPLER_2D: 35678,\n      POINTS: 0,\n      LINES: 1,\n      LINE_LOOP: 2,\n      LINE_STRIP: 3,\n      TRIANGLES: 4,\n      TRIANGLE_STRIP: 5,\n      TRIANGLE_FAN: 6,\n      UNSIGNED_BYTE: 5121,\n      UNSIGNED_SHORT: 5123\n    };\n\n    var WEBGL_COMPONENT_TYPES = {\n      5120: Int8Array,\n      5121: Uint8Array,\n      5122: Int16Array,\n      5123: Uint16Array,\n      5125: Uint32Array,\n      5126: Float32Array\n    };\n\n    var WEBGL_FILTERS = {\n      9728: THREE.NearestFilter,\n      9729: THREE.LinearFilter,\n      9984: THREE.NearestMipmapNearestFilter,\n      9985: THREE.LinearMipmapNearestFilter,\n      9986: THREE.NearestMipmapLinearFilter,\n      9987: THREE.LinearMipmapLinearFilter\n    };\n\n    var WEBGL_WRAPPINGS = {\n      33071: THREE.ClampToEdgeWrapping,\n      33648: THREE.MirroredRepeatWrapping,\n      10497: THREE.RepeatWrapping\n    };\n\n    var WEBGL_TYPE_SIZES = {\n      'SCALAR': 1,\n      'VEC2': 2,\n      'VEC3': 3,\n      'VEC4': 4,\n      'MAT2': 4,\n      'MAT3': 9,\n      'MAT4': 16\n    };\n\n    var ATTRIBUTES = {\n      POSITION: 'position',\n      NORMAL: 'normal',\n      TANGENT: 'tangent',\n      TEXCOORD_0: 'uv',\n      TEXCOORD_1: 'uv2',\n      COLOR_0: 'color',\n      WEIGHTS_0: 'skinWeight',\n      JOINTS_0: 'skinIndex',\n    };\n\n    var PATH_PROPERTIES = {\n      scale: 'scale',\n      translation: 'position',\n      rotation: 'quaternion',\n      weights: 'morphTargetInfluences'\n    };\n\n    var INTERPOLATION = {\n      CUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n      // keyframe track will be initialized with a default interpolation type, then modified.\n      LINEAR: THREE.InterpolateLinear,\n      STEP: THREE.InterpolateDiscrete\n    };\n\n    var ALPHA_MODES = {\n      OPAQUE: 'OPAQUE',\n      MASK: 'MASK',\n      BLEND: 'BLEND'\n    };\n\n    var MIME_TYPE_FORMATS = {\n      'image/png': THREE.RGBAFormat,\n      'image/jpeg': THREE.RGBFormat\n    };\n\n    /* UTILITY FUNCTIONS */\n\n    function resolveURL(url, path) {\n\n      // Invalid URL\n      if (typeof url !== 'string' || url === '') return '';\n\n      // Host Relative URL\n      if (/^https?:\\/\\//i.test(path) && /^\\//.test(url)) {\n\n        path = path.replace(/(^https?:\\/\\/[^\\/]+).*/i, '$1');\n\n      }\n\n      // Absolute URL http://,https://,//\n      if (/^(https?:)?\\/\\//i.test(url)) return url;\n\n      // Data URI\n      if (/^data:.*,.*$/i.test(url)) return url;\n\n      // Blob URL\n      if (/^blob:.*$/i.test(url)) return url;\n\n      // Relative URL\n      return path + url;\n\n    }\n\n    var defaultMaterial;\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n     */\n    function createDefaultMaterial() {\n\n      defaultMaterial = defaultMaterial || new THREE.MeshStandardMaterial({\n        color: 0xFFFFFF,\n        emissive: 0x000000,\n        metalness: 1,\n        roughness: 1,\n        transparent: false,\n        depthTest: true,\n        side: THREE.FrontSide\n      });\n\n      return defaultMaterial;\n\n    }\n\n    function addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n\n      // Add unknown glTF extensions to an object's userData.\n\n      for (var name in objectDef.extensions) {\n\n        if (knownExtensions[name] === undefined) {\n\n          object.userData.gltfExtensions = object.userData.gltfExtensions || {};\n          object.userData.gltfExtensions[name] = objectDef.extensions[name];\n\n        }\n\n      }\n\n    }\n\n    /**\n     * @param {THREE.Object3D|THREE.Material|THREE.BufferGeometry} object\n     * @param {GLTF.definition} gltfDef\n     */\n    function assignExtrasToUserData(object, gltfDef) {\n\n      if (gltfDef.extras !== undefined) {\n\n        if (typeof gltfDef.extras === 'object') {\n\n          Object.assign(object.userData, gltfDef.extras);\n\n        } else {\n\n          console.warn('THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras);\n\n        }\n\n      }\n\n    }\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n     *\n     * @param {THREE.BufferGeometry} geometry\n     * @param {Array<GLTF.Target>} targets\n     * @param {GLTFParser} parser\n     * @return {Promise<THREE.BufferGeometry>}\n     */\n    function addMorphTargets(geometry, targets, parser) {\n\n      var hasMorphPosition = false;\n      var hasMorphNormal = false;\n\n      for (var i = 0, il = targets.length; i < il; i++) {\n\n        var target = targets[i];\n\n        if (target.POSITION !== undefined) hasMorphPosition = true;\n        if (target.NORMAL !== undefined) hasMorphNormal = true;\n\n        if (hasMorphPosition && hasMorphNormal) break;\n\n      }\n\n      if (!hasMorphPosition && !hasMorphNormal) return Promise.resolve(geometry);\n\n      var pendingPositionAccessors = [];\n      var pendingNormalAccessors = [];\n\n      for (var i = 0, il = targets.length; i < il; i++) {\n\n        var target = targets[i];\n\n        if (hasMorphPosition) {\n\n          var pendingAccessor = target.POSITION !== undefined\n            ? parser.getDependency('accessor', target.POSITION)\n            : geometry.attributes.position;\n\n          pendingPositionAccessors.push(pendingAccessor);\n\n        }\n\n        if (hasMorphNormal) {\n\n          var pendingAccessor = target.NORMAL !== undefined\n            ? parser.getDependency('accessor', target.NORMAL)\n            : geometry.attributes.normal;\n\n          pendingNormalAccessors.push(pendingAccessor);\n\n        }\n\n      }\n\n      return Promise.all([\n        Promise.all(pendingPositionAccessors),\n        Promise.all(pendingNormalAccessors)\n      ]).then(function (accessors) {\n\n        var morphPositions = accessors[0];\n        var morphNormals = accessors[1];\n\n        // Clone morph target accessors before modifying them.\n\n        for (var i = 0, il = morphPositions.length; i < il; i++) {\n\n          if (geometry.attributes.position === morphPositions[i]) continue;\n\n          morphPositions[i] = cloneBufferAttribute(morphPositions[i]);\n\n        }\n\n        for (var i = 0, il = morphNormals.length; i < il; i++) {\n\n          if (geometry.attributes.normal === morphNormals[i]) continue;\n\n          morphNormals[i] = cloneBufferAttribute(morphNormals[i]);\n\n        }\n\n        for (var i = 0, il = targets.length; i < il; i++) {\n\n          var target = targets[i];\n          var attributeName = 'morphTarget' + i;\n\n          if (hasMorphPosition) {\n\n            // Three.js morph position is absolute value. The formula is\n            //   basePosition\n            //     + weight0 * ( morphPosition0 - basePosition )\n            //     + weight1 * ( morphPosition1 - basePosition )\n            //     ...\n            // while the glTF one is relative\n            //   basePosition\n            //     + weight0 * glTFmorphPosition0\n            //     + weight1 * glTFmorphPosition1\n            //     ...\n            // then we need to convert from relative to absolute here.\n\n            if (target.POSITION !== undefined) {\n\n              var positionAttribute = morphPositions[i];\n              positionAttribute.name = attributeName;\n\n              var position = geometry.attributes.position;\n\n              for (var j = 0, jl = positionAttribute.count; j < jl; j++) {\n\n                positionAttribute.setXYZ(\n                  j,\n                  positionAttribute.getX(j) + position.getX(j),\n                  positionAttribute.getY(j) + position.getY(j),\n                  positionAttribute.getZ(j) + position.getZ(j)\n                );\n\n              }\n\n            }\n\n          }\n\n          if (hasMorphNormal) {\n\n            // see target.POSITION's comment\n\n            if (target.NORMAL !== undefined) {\n\n              var normalAttribute = morphNormals[i];\n              normalAttribute.name = attributeName;\n\n              var normal = geometry.attributes.normal;\n\n              for (var j = 0, jl = normalAttribute.count; j < jl; j++) {\n\n                normalAttribute.setXYZ(\n                  j,\n                  normalAttribute.getX(j) + normal.getX(j),\n                  normalAttribute.getY(j) + normal.getY(j),\n                  normalAttribute.getZ(j) + normal.getZ(j)\n                );\n\n              }\n\n            }\n\n          }\n\n        }\n\n        if (hasMorphPosition) geometry.morphAttributes.position = morphPositions;\n        if (hasMorphNormal) geometry.morphAttributes.normal = morphNormals;\n\n        return geometry;\n\n      });\n\n    }\n\n    /**\n     * @param {THREE.Mesh} mesh\n     * @param {GLTF.Mesh} meshDef\n     */\n    function updateMorphTargets(mesh, meshDef) {\n\n      mesh.updateMorphTargets();\n\n      if (meshDef.weights !== undefined) {\n\n        for (var i = 0, il = meshDef.weights.length; i < il; i++) {\n\n          mesh.morphTargetInfluences[i] = meshDef.weights[i];\n\n        }\n\n      }\n\n      // .extras has user-defined data, so check that .extras.targetNames is an array.\n      if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n\n        var targetNames = meshDef.extras.targetNames;\n\n        if (mesh.morphTargetInfluences.length === targetNames.length) {\n\n          mesh.morphTargetDictionary = {};\n\n          for (var i = 0, il = targetNames.length; i < il; i++) {\n\n            mesh.morphTargetDictionary[targetNames[i]] = i;\n\n          }\n\n        } else {\n\n          console.warn('THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.');\n\n        }\n\n      }\n\n    }\n\n    function createPrimitiveKey(primitiveDef) {\n\n      var dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n      var geometryKey;\n\n      if (dracoExtension) {\n\n        geometryKey = 'draco:' + dracoExtension.bufferView\n          + ':' + dracoExtension.indices\n          + ':' + createAttributesKey(dracoExtension.attributes);\n\n      } else {\n\n        geometryKey = primitiveDef.indices + ':' + createAttributesKey(primitiveDef.attributes) + ':' + primitiveDef.mode;\n\n      }\n\n      return geometryKey;\n\n    }\n\n    function createAttributesKey(attributes) {\n\n      var attributesKey = '';\n\n      var keys = Object.keys(attributes).sort();\n\n      for (var i = 0, il = keys.length; i < il; i++) {\n\n        attributesKey += keys[i] + ':' + attributes[keys[i]] + ';';\n\n      }\n\n      return attributesKey;\n\n    }\n\n    function cloneBufferAttribute(attribute) {\n\n      if (attribute.isInterleavedBufferAttribute) {\n\n        var count = attribute.count;\n        var itemSize = attribute.itemSize;\n        var array = attribute.array.slice(0, count * itemSize);\n\n        for (var i = 0, j = 0; i < count; ++i) {\n\n          array[j++] = attribute.getX(i);\n          if (itemSize >= 2) array[j++] = attribute.getY(i);\n          if (itemSize >= 3) array[j++] = attribute.getZ(i);\n          if (itemSize >= 4) array[j++] = attribute.getW(i);\n\n        }\n\n        return new THREE.BufferAttribute(array, itemSize, attribute.normalized);\n\n      }\n\n      return attribute.clone();\n\n    }\n\n    /* GLTF PARSER */\n\n    function GLTFParser(json, extensions, options) {\n\n      this.json = json || {};\n      this.extensions = extensions || {};\n      this.options = options || {};\n\n      // loader object cache\n      this.cache = new GLTFRegistry();\n\n      // BufferGeometry caching\n      this.primitiveCache = {};\n\n      this.textureLoader = new THREE.TextureLoader(this.options.manager);\n      this.textureLoader.setCrossOrigin(this.options.crossOrigin);\n\n      this.fileLoader = new THREE.FileLoader(this.options.manager);\n      this.fileLoader.setResponseType('arraybuffer');\n\n      if (this.options.crossOrigin === 'use-credentials') {\n\n        this.fileLoader.setWithCredentials(true);\n\n      }\n\n    }\n\n    GLTFParser.prototype.parse = function (onLoad, onError) {\n\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n\n      // Clear the loader cache\n      this.cache.removeAll();\n\n      // Mark the special nodes/meshes in json for efficient parse\n      this.markDefs();\n\n      Promise.all([\n\n        this.getDependencies('scene'),\n        this.getDependencies('animation'),\n        this.getDependencies('camera'),\n\n      ]).then(function (dependencies) {\n\n        var result = {\n          scene: dependencies[0][json.scene || 0],\n          scenes: dependencies[0],\n          animations: dependencies[1],\n          cameras: dependencies[2],\n          asset: json.asset,\n          parser: parser,\n          userData: {}\n        };\n\n        addUnknownExtensionsToUserData(extensions, result, json);\n\n        assignExtrasToUserData(result, json);\n\n        onLoad(result);\n\n      }).catch(onError);\n\n    };\n\n    /**\n     * Marks the special nodes/meshes in json for efficient parse.\n     */\n    GLTFParser.prototype.markDefs = function () {\n\n      var nodeDefs = this.json.nodes || [];\n      var skinDefs = this.json.skins || [];\n      var meshDefs = this.json.meshes || [];\n\n      var meshReferences = {};\n      var meshUses = {};\n\n      // Nothing in the node definition indicates whether it is a Bone or an\n      // Object3D. Use the skins' joint references to mark bones.\n      for (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n\n        var joints = skinDefs[skinIndex].joints;\n\n        for (var i = 0, il = joints.length; i < il; i++) {\n\n          nodeDefs[joints[i]].isBone = true;\n\n        }\n\n      }\n\n      // Meshes can (and should) be reused by multiple nodes in a glTF asset. To\n      // avoid having more than one THREE.Mesh with the same name, count\n      // references and rename instances below.\n      //\n      // Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n      for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n\n        var nodeDef = nodeDefs[nodeIndex];\n\n        if (nodeDef.mesh !== undefined) {\n\n          if (meshReferences[nodeDef.mesh] === undefined) {\n\n            meshReferences[nodeDef.mesh] = meshUses[nodeDef.mesh] = 0;\n\n          }\n\n          meshReferences[nodeDef.mesh]++;\n\n          // Nothing in the mesh definition indicates whether it is\n          // a SkinnedMesh or Mesh. Use the node's mesh reference\n          // to mark SkinnedMesh if node has skin.\n          if (nodeDef.skin !== undefined) {\n\n            meshDefs[nodeDef.mesh].isSkinnedMesh = true;\n\n          }\n\n        }\n\n      }\n\n      this.json.meshReferences = meshReferences;\n      this.json.meshUses = meshUses;\n\n    };\n\n    /**\n     * Requests the specified dependency asynchronously, with caching.\n     * @param {string} type\n     * @param {number} index\n     * @return {Promise<THREE.Object3D|THREE.Material|THREE.Texture|THREE.AnimationClip|ArrayBuffer|Object>}\n     */\n    GLTFParser.prototype.getDependency = function (type, index) {\n\n      var cacheKey = type + ':' + index;\n      var dependency = this.cache.get(cacheKey);\n\n      if (!dependency) {\n\n        switch (type) {\n\n          case 'scene':\n            dependency = this.loadScene(index);\n            break;\n\n          case 'node':\n            dependency = this.loadNode(index);\n            break;\n\n          case 'mesh':\n            dependency = this.loadMesh(index);\n            break;\n\n          case 'accessor':\n            dependency = this.loadAccessor(index);\n            break;\n\n          case 'bufferView':\n            dependency = this.loadBufferView(index);\n            break;\n\n          case 'buffer':\n            dependency = this.loadBuffer(index);\n            break;\n\n          case 'material':\n            dependency = this.loadMaterial(index);\n            break;\n\n          case 'texture':\n            dependency = this.loadTexture(index);\n            break;\n\n          case 'skin':\n            dependency = this.loadSkin(index);\n            break;\n\n          case 'animation':\n            dependency = this.loadAnimation(index);\n            break;\n\n          case 'camera':\n            dependency = this.loadCamera(index);\n            break;\n\n          case 'light':\n            dependency = this.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].loadLight(index);\n            break;\n\n          default:\n            throw new Error('Unknown type: ' + type);\n\n        }\n\n        this.cache.add(cacheKey, dependency);\n\n      }\n\n      return dependency;\n\n    };\n\n    /**\n     * Requests all dependencies of the specified type asynchronously, with caching.\n     * @param {string} type\n     * @return {Promise<Array<Object>>}\n     */\n    GLTFParser.prototype.getDependencies = function (type) {\n\n      var dependencies = this.cache.get(type);\n\n      if (!dependencies) {\n\n        var parser = this;\n        var defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n\n        dependencies = Promise.all(defs.map(function (def, index) {\n\n          return parser.getDependency(type, index);\n\n        }));\n\n        this.cache.add(type, dependencies);\n\n      }\n\n      return dependencies;\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n    GLTFParser.prototype.loadBuffer = function (bufferIndex) {\n\n      var bufferDef = this.json.buffers[bufferIndex];\n      var loader = this.fileLoader;\n\n      if (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n\n        throw new Error('THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n\n      }\n\n      // If present, GLB container is required to be the first buffer.\n      if (bufferDef.uri === undefined && bufferIndex === 0) {\n\n        return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n\n      }\n\n      var options = this.options;\n\n      return new Promise(function (resolve, reject) {\n\n        loader.load(resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n\n          reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n\n        });\n\n      });\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferViewIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n    GLTFParser.prototype.loadBufferView = function (bufferViewIndex) {\n\n      var bufferViewDef = this.json.bufferViews[bufferViewIndex];\n\n      return this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n\n        var byteLength = bufferViewDef.byteLength || 0;\n        var byteOffset = bufferViewDef.byteOffset || 0;\n        return buffer.slice(byteOffset, byteOffset + byteLength);\n\n      });\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n     * @param {number} accessorIndex\n     * @return {Promise<THREE.BufferAttribute|THREE.InterleavedBufferAttribute>}\n     */\n    GLTFParser.prototype.loadAccessor = function (accessorIndex) {\n\n      var parser = this;\n      var json = this.json;\n\n      var accessorDef = this.json.accessors[accessorIndex];\n\n      if (accessorDef.bufferView === undefined && accessorDef.sparse === undefined) {\n\n        // Ignore empty accessors, which may be used to declare runtime\n        // information about attributes coming from another source (e.g. Draco\n        // compression extension).\n        return Promise.resolve(null);\n\n      }\n\n      var pendingBufferViews = [];\n\n      if (accessorDef.bufferView !== undefined) {\n\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n\n      } else {\n\n        pendingBufferViews.push(null);\n\n      }\n\n      if (accessorDef.sparse !== undefined) {\n\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.indices.bufferView));\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.values.bufferView));\n\n      }\n\n      return Promise.all(pendingBufferViews).then(function (bufferViews) {\n\n        var bufferView = bufferViews[0];\n\n        var itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n        var TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n\n        // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n        var elementBytes = TypedArray.BYTES_PER_ELEMENT;\n        var itemBytes = elementBytes * itemSize;\n        var byteOffset = accessorDef.byteOffset || 0;\n        var byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[accessorDef.bufferView].byteStride : undefined;\n        var normalized = accessorDef.normalized === true;\n        var array, bufferAttribute;\n\n        // The buffer is not interleaved if the stride is the item size in bytes.\n        if (byteStride && byteStride !== itemBytes) {\n\n          // Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n          // This makes sure that IBA.count reflects accessor.count properly\n          var ibSlice = Math.floor(byteOffset / byteStride);\n          var ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n          var ib = parser.cache.get(ibCacheKey);\n\n          if (!ib) {\n\n            array = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes);\n\n            // Integer parameters to IB/IBA are in array elements, not bytes.\n            ib = new THREE.InterleavedBuffer(array, byteStride / elementBytes);\n\n            parser.cache.add(ibCacheKey, ib);\n\n          }\n\n          bufferAttribute = new THREE.InterleavedBufferAttribute(ib, itemSize, (byteOffset % byteStride) / elementBytes, normalized);\n\n        } else {\n\n          if (bufferView === null) {\n\n            array = new TypedArray(accessorDef.count * itemSize);\n\n          } else {\n\n            array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n\n          }\n\n          bufferAttribute = new THREE.BufferAttribute(array, itemSize, normalized);\n\n        }\n\n        // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n        if (accessorDef.sparse !== undefined) {\n\n          var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n          var TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n\n          var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n          var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n          var sparseIndices = new TypedArrayIndices(bufferViews[1], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices);\n          var sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n\n          if (bufferView !== null) {\n\n            // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n            bufferAttribute = new THREE.BufferAttribute(bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized);\n\n          }\n\n          for (var i = 0, il = sparseIndices.length; i < il; i++) {\n\n            var index = sparseIndices[i];\n\n            bufferAttribute.setX(index, sparseValues[i * itemSize]);\n            if (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n            if (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n            if (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n            if (itemSize >= 5) throw new Error('THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n\n          }\n\n        }\n\n        return bufferAttribute;\n\n      });\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n     * @param {number} textureIndex\n     * @return {Promise<THREE.Texture>}\n     */\n    GLTFParser.prototype.loadTexture = function (textureIndex) {\n\n      var parser = this;\n      var json = this.json;\n      var options = this.options;\n      var textureLoader = this.textureLoader;\n\n      var URL = window.URL || window.webkitURL;\n\n      var textureDef = json.textures[textureIndex];\n\n      var textureExtensions = textureDef.extensions || {};\n\n      var source;\n\n      if (textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]) {\n\n        source = json.images[textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS].source];\n\n      } else {\n\n        source = json.images[textureDef.source];\n\n      }\n\n      var sourceURI = source.uri;\n      var isObjectURL = false;\n\n      if (source.bufferView !== undefined) {\n\n        // Load binary image data from bufferView, if provided.\n\n        sourceURI = parser.getDependency('bufferView', source.bufferView).then(function (bufferView) {\n\n          isObjectURL = true;\n          var blob = new Blob([bufferView], { type: source.mimeType });\n          sourceURI = URL.createObjectURL(blob);\n          return sourceURI;\n\n        });\n\n      }\n\n      return Promise.resolve(sourceURI).then(function (sourceURI) {\n\n        // Load Texture resource.\n\n        var loader = options.manager.getHandler(sourceURI);\n\n        if (!loader) {\n\n          loader = textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]\n            ? parser.extensions[EXTENSIONS.MSFT_TEXTURE_DDS].ddsLoader\n            : textureLoader;\n\n        }\n\n        return new Promise(function (resolve, reject) {\n\n          loader.load(resolveURL(sourceURI, options.path), resolve, undefined, reject);\n\n        });\n\n      }).then(function (texture) {\n\n        // Clean up resources and configure Texture.\n\n        if (isObjectURL === true) {\n\n          URL.revokeObjectURL(sourceURI);\n\n        }\n\n        texture.flipY = false;\n\n        if (textureDef.name !== undefined) texture.name = textureDef.name;\n\n        // Ignore unknown mime types, like DDS files.\n        if (source.mimeType in MIME_TYPE_FORMATS) {\n\n          texture.format = MIME_TYPE_FORMATS[source.mimeType];\n\n        }\n\n        var samplers = json.samplers || {};\n        var sampler = samplers[textureDef.sampler] || {};\n\n        texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || THREE.LinearFilter;\n        texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || THREE.LinearMipmapLinearFilter;\n        texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || THREE.RepeatWrapping;\n        texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || THREE.RepeatWrapping;\n\n        return texture;\n\n      });\n\n    };\n\n    /**\n     * Asynchronously assigns a texture to the given material parameters.\n     * @param {Object} materialParams\n     * @param {string} mapName\n     * @param {Object} mapDef\n     * @return {Promise}\n     */\n    GLTFParser.prototype.assignTexture = function (materialParams, mapName, mapDef) {\n\n      var parser = this;\n\n      return this.getDependency('texture', mapDef.index).then(function (texture) {\n\n        if (!texture.isCompressedTexture) {\n\n          switch (mapName) {\n\n            case 'aoMap':\n            case 'emissiveMap':\n            case 'metalnessMap':\n            case 'normalMap':\n            case 'roughnessMap':\n              texture.format = THREE.RGBFormat;\n              break;\n\n          }\n\n        }\n\n        if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n\n          var transform = mapDef.extensions !== undefined ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : undefined;\n\n          if (transform) {\n\n            texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\n\n          }\n\n        }\n\n        materialParams[mapName] = texture;\n\n      });\n\n    };\n\n    /**\n     * Assigns final material to a Mesh, Line, or Points instance. The instance\n     * already has a material (generated from the glTF material options alone)\n     * but reuse of the same glTF material may require multiple threejs materials\n     * to accomodate different primitive types, defines, etc. New materials will\n     * be created if necessary, and reused from a cache.\n     * @param  {THREE.Object3D} mesh Mesh, Line, or Points instance.\n     */\n    GLTFParser.prototype.assignFinalMaterial = function (mesh) {\n\n      var geometry = mesh.geometry;\n      var material = mesh.material;\n      var extensions = this.extensions;\n\n      var useVertexTangents = geometry.attributes.tangent !== undefined;\n      var useVertexColors = geometry.attributes.color !== undefined;\n      var useFlatShading = geometry.attributes.normal === undefined;\n      var useSkinning = mesh.isSkinnedMesh === true;\n      var useMorphTargets = Object.keys(geometry.morphAttributes).length > 0;\n      var useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n      if (mesh.isPoints) {\n\n        var cacheKey = 'PointsMaterial:' + material.uuid;\n\n        var pointsMaterial = this.cache.get(cacheKey);\n\n        if (!pointsMaterial) {\n\n          pointsMaterial = new THREE.PointsMaterial();\n          THREE.Material.prototype.copy.call(pointsMaterial, material);\n          pointsMaterial.color.copy(material.color);\n          pointsMaterial.map = material.map;\n          pointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n          this.cache.add(cacheKey, pointsMaterial);\n\n        }\n\n        material = pointsMaterial;\n\n      } else if (mesh.isLine) {\n\n        var cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n        var lineMaterial = this.cache.get(cacheKey);\n\n        if (!lineMaterial) {\n\n          lineMaterial = new THREE.LineBasicMaterial();\n          THREE.Material.prototype.copy.call(lineMaterial, material);\n          lineMaterial.color.copy(material.color);\n\n          this.cache.add(cacheKey, lineMaterial);\n\n        }\n\n        material = lineMaterial;\n\n      }\n\n      // Clone the material if it will be modified\n      if (useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets) {\n\n        var cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n        if (material.isGLTFSpecularGlossinessMaterial) cacheKey += 'specular-glossiness:';\n        if (useSkinning) cacheKey += 'skinning:';\n        if (useVertexTangents) cacheKey += 'vertex-tangents:';\n        if (useVertexColors) cacheKey += 'vertex-colors:';\n        if (useFlatShading) cacheKey += 'flat-shading:';\n        if (useMorphTargets) cacheKey += 'morph-targets:';\n        if (useMorphNormals) cacheKey += 'morph-normals:';\n\n        var cachedMaterial = this.cache.get(cacheKey);\n\n        if (!cachedMaterial) {\n\n          cachedMaterial = material.isGLTFSpecularGlossinessMaterial\n            ? extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(material)\n            : material.clone();\n\n          if (useSkinning) cachedMaterial.skinning = true;\n          if (useVertexTangents) cachedMaterial.vertexTangents = true;\n          if (useVertexColors) cachedMaterial.vertexColors = THREE.VertexColors;\n          if (useFlatShading) cachedMaterial.flatShading = true;\n          if (useMorphTargets) cachedMaterial.morphTargets = true;\n          if (useMorphNormals) cachedMaterial.morphNormals = true;\n\n          this.cache.add(cacheKey, cachedMaterial);\n\n        }\n\n        material = cachedMaterial;\n\n      }\n\n      // workarounds for mesh and geometry\n\n      if (material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined) {\n\n        // console.log('THREE.GLTFLoader: Duplicating UVs to support aoMap.');\n        geometry.addAttribute('uv2', new THREE.BufferAttribute(geometry.attributes.uv.array, 2));\n\n      }\n\n      if (material.isGLTFSpecularGlossinessMaterial) {\n\n        // for GLTFSpecularGlossinessMaterial(ShaderMaterial) uniforms runtime update\n        mesh.onBeforeRender = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms;\n\n      }\n\n      mesh.material = material;\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n     * @param {number} materialIndex\n     * @return {Promise<THREE.Material>}\n     */\n    GLTFParser.prototype.loadMaterial = function (materialIndex) {\n\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n      var materialDef = json.materials[materialIndex];\n\n      var materialType;\n      var materialParams = {};\n      var materialExtensions = materialDef.extensions || {};\n\n      var pending = [];\n\n      if (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n\n        var sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n        materialType = sgExtension.getMaterialType();\n        pending.push(sgExtension.extendParams(materialParams, materialDef, parser));\n\n      } else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n\n        var kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n        materialType = kmuExtension.getMaterialType();\n        pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n\n      } else {\n\n        // Specification:\n        // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n        materialType = THREE.MeshStandardMaterial;\n\n        var metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n        materialParams.color = new THREE.Color(1.0, 1.0, 1.0);\n        materialParams.opacity = 1.0;\n\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n\n          var array = metallicRoughness.baseColorFactor;\n\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n\n        }\n\n        materialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n        materialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n        if (metallicRoughness.metallicRoughnessTexture !== undefined) {\n\n          pending.push(parser.assignTexture(materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture));\n          pending.push(parser.assignTexture(materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture));\n\n        }\n\n      }\n\n      if (materialDef.doubleSided === true) {\n\n        materialParams.side = THREE.DoubleSide;\n\n      }\n\n      var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n      if (alphaMode === ALPHA_MODES.BLEND) {\n\n        materialParams.transparent = true;\n\n      } else {\n\n        materialParams.transparent = false;\n\n        if (alphaMode === ALPHA_MODES.MASK) {\n\n          materialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n        }\n\n      }\n\n      if (materialDef.normalTexture !== undefined && materialType !== THREE.MeshBasicMaterial) {\n\n        pending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture));\n\n        materialParams.normalScale = new THREE.Vector2(1, 1);\n\n        if (materialDef.normalTexture.scale !== undefined) {\n\n          materialParams.normalScale.set(materialDef.normalTexture.scale, materialDef.normalTexture.scale);\n\n        }\n\n      }\n\n      if (materialDef.occlusionTexture !== undefined && materialType !== THREE.MeshBasicMaterial) {\n\n        pending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture));\n\n        if (materialDef.occlusionTexture.strength !== undefined) {\n\n          materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n        }\n\n      }\n\n      if (materialDef.emissiveFactor !== undefined && materialType !== THREE.MeshBasicMaterial) {\n\n        materialParams.emissive = new THREE.Color().fromArray(materialDef.emissiveFactor);\n\n      }\n\n      if (materialDef.emissiveTexture !== undefined && materialType !== THREE.MeshBasicMaterial) {\n\n        pending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture));\n\n      }\n\n      return Promise.all(pending).then(function () {\n\n        var material;\n\n        if (materialType === THREE.ShaderMaterial) {\n\n          material = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(materialParams);\n\n        } else {\n\n          material = new materialType(materialParams);\n\n        }\n\n        if (materialDef.name !== undefined) material.name = materialDef.name;\n\n        // baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n        if (material.map) material.map.encoding = THREE.sRGBEncoding;\n        if (material.emissiveMap) material.emissiveMap.encoding = THREE.sRGBEncoding;\n        if (material.specularMap) material.specularMap.encoding = THREE.sRGBEncoding;\n\n        assignExtrasToUserData(material, materialDef);\n\n        if (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef);\n\n        return material;\n\n      });\n\n    };\n\n    /**\n     * @param {THREE.BufferGeometry} geometry\n     * @param {GLTF.Primitive} primitiveDef\n     * @param {GLTFParser} parser\n     * @return {Promise<THREE.BufferGeometry>}\n     */\n    function addPrimitiveAttributes(geometry, primitiveDef, parser) {\n\n      var attributes = primitiveDef.attributes;\n\n      var pending = [];\n\n      function assignAttributeAccessor(accessorIndex, attributeName) {\n\n        return parser.getDependency('accessor', accessorIndex)\n          .then(function (accessor) {\n\n            geometry.addAttribute(attributeName, accessor);\n\n          });\n\n      }\n\n      for (var gltfAttributeName in attributes) {\n\n        var threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase();\n\n        // Skip attributes already provided by e.g. Draco extension.\n        if (threeAttributeName in geometry.attributes) continue;\n\n        pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n\n      }\n\n      if (primitiveDef.indices !== undefined && !geometry.index) {\n\n        var accessor = parser.getDependency('accessor', primitiveDef.indices).then(function (accessor) {\n\n          geometry.setIndex(accessor);\n\n        });\n\n        pending.push(accessor);\n\n      }\n\n      assignExtrasToUserData(geometry, primitiveDef);\n\n      return Promise.all(pending).then(function () {\n\n        return primitiveDef.targets !== undefined\n          ? addMorphTargets(geometry, primitiveDef.targets, parser)\n          : geometry;\n\n      });\n\n    }\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n     *\n     * Creates BufferGeometries from primitives.\n     *\n     * @param {Array<GLTF.Primitive>} primitives\n     * @return {Promise<Array<THREE.BufferGeometry>>}\n     */\n    GLTFParser.prototype.loadGeometries = function (primitives) {\n\n      var parser = this;\n      var extensions = this.extensions;\n      var cache = this.primitiveCache;\n\n      function createDracoPrimitive(primitive) {\n\n        return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]\n          .decodePrimitive(primitive, parser)\n          .then(function (geometry) {\n\n            return addPrimitiveAttributes(geometry, primitive, parser);\n\n          });\n\n      }\n\n      var pending = [];\n\n      for (var i = 0, il = primitives.length; i < il; i++) {\n\n        var primitive = primitives[i];\n        var cacheKey = createPrimitiveKey(primitive);\n\n        // See if we've already created this geometry\n        var cached = cache[cacheKey];\n\n        if (cached) {\n\n          // Use the cached geometry if it exists\n          pending.push(cached.promise);\n\n        } else {\n\n          var geometryPromise;\n\n          if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n\n            // Use DRACO geometry if available\n            geometryPromise = createDracoPrimitive(primitive);\n\n          } else {\n\n            // Otherwise create a new geometry\n            geometryPromise = addPrimitiveAttributes(new THREE.BufferGeometry(), primitive, parser);\n\n          }\n\n          // Cache this geometry\n          cache[cacheKey] = { primitive: primitive, promise: geometryPromise };\n\n          pending.push(geometryPromise);\n\n        }\n\n      }\n\n      return Promise.all(pending);\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n     * @param {number} meshIndex\n     * @return {Promise<THREE.Group|THREE.Mesh|THREE.SkinnedMesh>}\n     */\n    GLTFParser.prototype.loadMesh = function (meshIndex) {\n\n      var parser = this;\n      var json = this.json;\n\n      var meshDef = json.meshes[meshIndex];\n      var primitives = meshDef.primitives;\n\n      var pending = [];\n\n      for (var i = 0, il = primitives.length; i < il; i++) {\n\n        var material = primitives[i].material === undefined\n          ? createDefaultMaterial()\n          : this.getDependency('material', primitives[i].material);\n\n        pending.push(material);\n\n      }\n\n      return Promise.all(pending).then(function (originalMaterials) {\n\n        return parser.loadGeometries(primitives).then(function (geometries) {\n\n          var meshes = [];\n\n          for (var i = 0, il = geometries.length; i < il; i++) {\n\n            var geometry = geometries[i];\n            var primitive = primitives[i];\n\n            // 1. create Mesh\n\n            var mesh;\n\n            var material = originalMaterials[i];\n\n            if (primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n              primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n              primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n              primitive.mode === undefined) {\n\n              // .isSkinnedMesh isn't in glTF spec. See .markDefs()\n              mesh = meshDef.isSkinnedMesh === true\n                ? new THREE.SkinnedMesh(geometry, material)\n                : new THREE.Mesh(geometry, material);\n\n              if (mesh.isSkinnedMesh === true && !mesh.geometry.attributes.skinWeight.normalized) {\n\n                // we normalize floating point skin weight array to fix malformed assets (see #15319)\n                // it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n                mesh.normalizeSkinWeights();\n\n              }\n\n              if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n\n                mesh.drawMode = THREE.TriangleStripDrawMode;\n\n              } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n\n                mesh.drawMode = THREE.TriangleFanDrawMode;\n\n              }\n\n            } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n\n              mesh = new THREE.LineSegments(geometry, material);\n\n            } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n\n              mesh = new THREE.Line(geometry, material);\n\n            } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n\n              mesh = new THREE.LineLoop(geometry, material);\n\n            } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n\n              mesh = new THREE.Points(geometry, material);\n\n            } else {\n\n              throw new Error('THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n\n            }\n\n            if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n\n              updateMorphTargets(mesh, meshDef);\n\n            }\n\n            mesh.name = meshDef.name || ('mesh_' + meshIndex);\n\n            if (geometries.length > 1) mesh.name += '_' + i;\n\n            assignExtrasToUserData(mesh, meshDef);\n\n            parser.assignFinalMaterial(mesh);\n\n            meshes.push(mesh);\n\n          }\n\n          if (meshes.length === 1) {\n\n            return meshes[0];\n\n          }\n\n          var group = new THREE.Group();\n\n          for (var i = 0, il = meshes.length; i < il; i++) {\n\n            group.add(meshes[i]);\n\n          }\n\n          return group;\n\n        });\n\n      });\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n     * @param {number} cameraIndex\n     * @return {Promise<THREE.Camera>}\n     */\n    GLTFParser.prototype.loadCamera = function (cameraIndex) {\n\n      var camera;\n      var cameraDef = this.json.cameras[cameraIndex];\n      var params = cameraDef[cameraDef.type];\n\n      if (!params) {\n\n        console.warn('THREE.GLTFLoader: Missing camera parameters.');\n        return;\n\n      }\n\n      if (cameraDef.type === 'perspective') {\n\n        camera = new THREE.PerspectiveCamera(THREE.Math.radToDeg(params.yfov), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6);\n\n      } else if (cameraDef.type === 'orthographic') {\n\n        camera = new THREE.OrthographicCamera(params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar);\n\n      }\n\n      if (cameraDef.name !== undefined) camera.name = cameraDef.name;\n\n      assignExtrasToUserData(camera, cameraDef);\n\n      return Promise.resolve(camera);\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n     * @param {number} skinIndex\n     * @return {Promise<Object>}\n     */\n    GLTFParser.prototype.loadSkin = function (skinIndex) {\n\n      var skinDef = this.json.skins[skinIndex];\n\n      var skinEntry = { joints: skinDef.joints };\n\n      if (skinDef.inverseBindMatrices === undefined) {\n\n        return Promise.resolve(skinEntry);\n\n      }\n\n      return this.getDependency('accessor', skinDef.inverseBindMatrices).then(function (accessor) {\n\n        skinEntry.inverseBindMatrices = accessor;\n\n        return skinEntry;\n\n      });\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n     * @param {number} animationIndex\n     * @return {Promise<THREE.AnimationClip>}\n     */\n    GLTFParser.prototype.loadAnimation = function (animationIndex) {\n\n      var json = this.json;\n\n      var animationDef = json.animations[animationIndex];\n\n      var pendingNodes = [];\n      var pendingInputAccessors = [];\n      var pendingOutputAccessors = [];\n      var pendingSamplers = [];\n      var pendingTargets = [];\n\n      for (var i = 0, il = animationDef.channels.length; i < il; i++) {\n\n        var channel = animationDef.channels[i];\n        var sampler = animationDef.samplers[channel.sampler];\n        var target = channel.target;\n        var name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n        var input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n        var output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n\n        pendingNodes.push(this.getDependency('node', name));\n        pendingInputAccessors.push(this.getDependency('accessor', input));\n        pendingOutputAccessors.push(this.getDependency('accessor', output));\n        pendingSamplers.push(sampler);\n        pendingTargets.push(target);\n\n      }\n\n      return Promise.all([\n\n        Promise.all(pendingNodes),\n        Promise.all(pendingInputAccessors),\n        Promise.all(pendingOutputAccessors),\n        Promise.all(pendingSamplers),\n        Promise.all(pendingTargets)\n\n      ]).then(function (dependencies) {\n\n        var nodes = dependencies[0];\n        var inputAccessors = dependencies[1];\n        var outputAccessors = dependencies[2];\n        var samplers = dependencies[3];\n        var targets = dependencies[4];\n\n        var tracks = [];\n\n        for (var i = 0, il = nodes.length; i < il; i++) {\n\n          var node = nodes[i];\n          var inputAccessor = inputAccessors[i];\n          var outputAccessor = outputAccessors[i];\n          var sampler = samplers[i];\n          var target = targets[i];\n\n          if (node === undefined) continue;\n\n          node.updateMatrix();\n          node.matrixAutoUpdate = true;\n\n          var TypedKeyframeTrack;\n\n          switch (PATH_PROPERTIES[target.path]) {\n\n            case PATH_PROPERTIES.weights:\n\n              TypedKeyframeTrack = THREE.NumberKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES.rotation:\n\n              TypedKeyframeTrack = THREE.QuaternionKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES.position:\n            case PATH_PROPERTIES.scale:\n            default:\n\n              TypedKeyframeTrack = THREE.VectorKeyframeTrack;\n              break;\n\n          }\n\n          var targetName = node.name ? node.name : node.uuid;\n\n          var interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : THREE.InterpolateLinear;\n\n          var targetNames = [];\n\n          if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n\n            // Node may be a THREE.Group (glTF mesh with several primitives) or a THREE.Mesh.\n            node.traverse(function (object) {\n\n              if (object.isMesh === true && object.morphTargetInfluences) {\n\n                targetNames.push(object.name ? object.name : object.uuid);\n\n              }\n\n            });\n\n          } else {\n\n            targetNames.push(targetName);\n\n          }\n\n          var outputArray = outputAccessor.array;\n\n          if (outputAccessor.normalized) {\n\n            var scale;\n\n            if (outputArray.constructor === Int8Array) {\n\n              scale = 1 / 127;\n\n            } else if (outputArray.constructor === Uint8Array) {\n\n              scale = 1 / 255;\n\n            } else if (outputArray.constructor == Int16Array) {\n\n              scale = 1 / 32767;\n\n            } else if (outputArray.constructor === Uint16Array) {\n\n              scale = 1 / 65535;\n\n            } else {\n\n              throw new Error('THREE.GLTFLoader: Unsupported output accessor component type.');\n\n            }\n\n            var scaled = new Float32Array(outputArray.length);\n\n            for (var j = 0, jl = outputArray.length; j < jl; j++) {\n\n              scaled[j] = outputArray[j] * scale;\n\n            }\n\n            outputArray = scaled;\n\n          }\n\n          for (var j = 0, jl = targetNames.length; j < jl; j++) {\n\n            var track = new TypedKeyframeTrack(\n              targetNames[j] + '.' + PATH_PROPERTIES[target.path],\n              inputAccessor.array,\n              outputArray,\n              interpolation\n            );\n\n            // Override interpolation with custom factory method.\n            if (sampler.interpolation === 'CUBICSPLINE') {\n\n              track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n\n                // A CUBICSPLINE keyframe in glTF has three output values for each input value,\n                // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n                // must be divided by three to get the interpolant's sampleSize argument.\n\n                return new GLTFCubicSplineInterpolant(this.times, this.values, this.getValueSize() / 3, result);\n\n              };\n\n              // Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n              track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n            }\n\n            tracks.push(track);\n\n          }\n\n        }\n\n        var name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;\n\n        return new THREE.AnimationClip(name, undefined, tracks);\n\n      });\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n     * @param {number} nodeIndex\n     * @return {Promise<THREE.Object3D>}\n     */\n    GLTFParser.prototype.loadNode = function (nodeIndex) {\n\n      var json = this.json;\n      var extensions = this.extensions;\n      var parser = this;\n\n      var meshReferences = json.meshReferences;\n      var meshUses = json.meshUses;\n\n      var nodeDef = json.nodes[nodeIndex];\n\n      return (function () {\n\n        var pending = [];\n\n        if (nodeDef.mesh !== undefined) {\n\n          pending.push(parser.getDependency('mesh', nodeDef.mesh).then(function (mesh) {\n\n            var node;\n\n            if (meshReferences[nodeDef.mesh] > 1) {\n\n              var instanceNum = meshUses[nodeDef.mesh]++;\n\n              node = mesh.clone();\n              node.name += '_instance_' + instanceNum;\n\n              // onBeforeRender copy for Specular-Glossiness\n              node.onBeforeRender = mesh.onBeforeRender;\n\n              for (var i = 0, il = node.children.length; i < il; i++) {\n\n                node.children[i].name += '_instance_' + instanceNum;\n                node.children[i].onBeforeRender = mesh.children[i].onBeforeRender;\n\n              }\n\n            } else {\n\n              node = mesh;\n\n            }\n\n            // if weights are provided on the node, override weights on the mesh.\n            if (nodeDef.weights !== undefined) {\n\n              node.traverse(function (o) {\n\n                if (!o.isMesh) return;\n\n                for (var i = 0, il = nodeDef.weights.length; i < il; i++) {\n\n                  o.morphTargetInfluences[i] = nodeDef.weights[i];\n\n                }\n\n              });\n\n            }\n\n            return node;\n\n          }));\n\n        }\n\n        if (nodeDef.camera !== undefined) {\n\n          pending.push(parser.getDependency('camera', nodeDef.camera));\n\n        }\n\n        if (nodeDef.extensions\n          && nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL]\n          && nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].light !== undefined) {\n\n          pending.push(parser.getDependency('light', nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].light));\n\n        }\n\n        return Promise.all(pending);\n\n      }()).then(function (objects) {\n\n        var node;\n\n        // .isBone isn't in glTF spec. See .markDefs\n        if (nodeDef.isBone === true) {\n\n          node = new THREE.Bone();\n\n        } else if (objects.length > 1) {\n\n          node = new THREE.Group();\n\n        } else if (objects.length === 1) {\n\n          node = objects[0];\n\n        } else {\n\n          node = new THREE.Object3D();\n\n        }\n\n        if (node !== objects[0]) {\n\n          for (var i = 0, il = objects.length; i < il; i++) {\n\n            node.add(objects[i]);\n\n          }\n\n        }\n\n        if (nodeDef.name !== undefined) {\n\n          node.userData.name = nodeDef.name;\n          node.name = THREE.PropertyBinding.sanitizeNodeName(nodeDef.name);\n\n        }\n\n        assignExtrasToUserData(node, nodeDef);\n\n        if (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef);\n\n        if (nodeDef.matrix !== undefined) {\n\n          var matrix = new THREE.Matrix4();\n          matrix.fromArray(nodeDef.matrix);\n          node.applyMatrix(matrix);\n\n        } else {\n\n          if (nodeDef.translation !== undefined) {\n\n            node.position.fromArray(nodeDef.translation);\n\n          }\n\n          if (nodeDef.rotation !== undefined) {\n\n            node.quaternion.fromArray(nodeDef.rotation);\n\n          }\n\n          if (nodeDef.scale !== undefined) {\n\n            node.scale.fromArray(nodeDef.scale);\n\n          }\n\n        }\n\n        return node;\n\n      });\n\n    };\n\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n     * @param {number} sceneIndex\n     * @return {Promise<THREE.Scene>}\n     */\n    GLTFParser.prototype.loadScene = function () {\n\n      // scene node hierachy builder\n\n      function buildNodeHierachy(nodeId, parentObject, json, parser) {\n\n        var nodeDef = json.nodes[nodeId];\n\n        return parser.getDependency('node', nodeId).then(function (node) {\n\n          if (nodeDef.skin === undefined) return node;\n\n          // build skeleton here as well\n\n          var skinEntry;\n\n          return parser.getDependency('skin', nodeDef.skin).then(function (skin) {\n\n            skinEntry = skin;\n\n            var pendingJoints = [];\n\n            for (var i = 0, il = skinEntry.joints.length; i < il; i++) {\n\n              pendingJoints.push(parser.getDependency('node', skinEntry.joints[i]));\n\n            }\n\n            return Promise.all(pendingJoints);\n\n          }).then(function (jointNodes) {\n\n            node.traverse(function (mesh) {\n\n              if (!mesh.isMesh) return;\n\n              var bones = [];\n              var boneInverses = [];\n\n              for (var j = 0, jl = jointNodes.length; j < jl; j++) {\n\n                var jointNode = jointNodes[j];\n\n                if (jointNode) {\n\n                  bones.push(jointNode);\n\n                  var mat = new THREE.Matrix4();\n\n                  if (skinEntry.inverseBindMatrices !== undefined) {\n\n                    mat.fromArray(skinEntry.inverseBindMatrices.array, j * 16);\n\n                  }\n\n                  boneInverses.push(mat);\n\n                } else {\n\n                  console.warn('THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[j]);\n\n                }\n\n              }\n\n              mesh.bind(new THREE.Skeleton(bones, boneInverses), mesh.matrixWorld);\n\n            });\n\n            return node;\n\n          });\n\n        }).then(function (node) {\n\n          // build node hierachy\n\n          parentObject.add(node);\n\n          var pending = [];\n\n          if (nodeDef.children) {\n\n            var children = nodeDef.children;\n\n            for (var i = 0, il = children.length; i < il; i++) {\n\n              var child = children[i];\n              pending.push(buildNodeHierachy(child, node, json, parser));\n\n            }\n\n          }\n\n          return Promise.all(pending);\n\n        });\n\n      }\n\n      return function loadScene(sceneIndex) {\n\n        var json = this.json;\n        var extensions = this.extensions;\n        var sceneDef = this.json.scenes[sceneIndex];\n        var parser = this;\n\n        var scene = new THREE.Scene();\n        if (sceneDef.name !== undefined) scene.name = sceneDef.name;\n\n        assignExtrasToUserData(scene, sceneDef);\n\n        if (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n\n        var nodeIds = sceneDef.nodes || [];\n\n        var pending = [];\n\n        for (var i = 0, il = nodeIds.length; i < il; i++) {\n\n          pending.push(buildNodeHierachy(nodeIds[i], scene, json, parser));\n\n        }\n\n        return Promise.all(pending).then(function () {\n\n          return scene;\n\n        });\n\n      };\n\n    }();\n\n    return GLTFLoader;\n\n  })();\n\n  /**\n   * @author mrdoob / http://mrdoob.com/\n   */\n\n  THREE.OBJLoader = (function () {\n\n    // o object_name | g group_name\n    var object_pattern = /^[og]\\s*(.+)?/;\n    // mtllib file_reference\n    var material_library_pattern = /^mtllib /;\n    // usemtl material_name\n    var material_use_pattern = /^usemtl /;\n\n    function ParserState() {\n\n      var state = {\n        objects: [],\n        object: {},\n\n        vertices: [],\n        normals: [],\n        colors: [],\n        uvs: [],\n\n        materialLibraries: [],\n\n        startObject: function (name, fromDeclaration) {\n\n          // If the current object (initial from reset) is not from a g/o declaration in the parsed\n          // file. We need to use it for the first parsed g/o to keep things in sync.\n          if (this.object && this.object.fromDeclaration === false) {\n\n            this.object.name = name;\n            this.object.fromDeclaration = (fromDeclaration !== false);\n            return;\n\n          }\n\n          var previousMaterial = (this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined);\n\n          if (this.object && typeof this.object._finalize === 'function') {\n\n            this.object._finalize(true);\n\n          }\n\n          this.object = {\n            name: name || '',\n            fromDeclaration: (fromDeclaration !== false),\n\n            geometry: {\n              vertices: [],\n              normals: [],\n              colors: [],\n              uvs: []\n            },\n            materials: [],\n            smooth: true,\n\n            startMaterial: function (name, libraries) {\n\n              var previous = this._finalize(false);\n\n              // New usemtl declaration overwrites an inherited material, except if faces were declared\n              // after the material, then it must be preserved for proper MultiMaterial continuation.\n              if (previous && (previous.inherited || previous.groupCount <= 0)) {\n\n                this.materials.splice(previous.index, 1);\n\n              }\n\n              var material = {\n                index: this.materials.length,\n                name: name || '',\n                mtllib: (Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : ''),\n                smooth: (previous !== undefined ? previous.smooth : this.smooth),\n                groupStart: (previous !== undefined ? previous.groupEnd : 0),\n                groupEnd: - 1,\n                groupCount: - 1,\n                inherited: false,\n\n                clone: function (index) {\n\n                  var cloned = {\n                    index: (typeof index === 'number' ? index : this.index),\n                    name: this.name,\n                    mtllib: this.mtllib,\n                    smooth: this.smooth,\n                    groupStart: 0,\n                    groupEnd: - 1,\n                    groupCount: - 1,\n                    inherited: false\n                  };\n                  cloned.clone = this.clone.bind(cloned);\n                  return cloned;\n\n                }\n              };\n\n              this.materials.push(material);\n\n              return material;\n\n            },\n\n            currentMaterial: function () {\n\n              if (this.materials.length > 0) {\n\n                return this.materials[this.materials.length - 1];\n\n              }\n\n              return undefined;\n\n            },\n\n            _finalize: function (end) {\n\n              var lastMultiMaterial = this.currentMaterial();\n              if (lastMultiMaterial && lastMultiMaterial.groupEnd === - 1) {\n\n                lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n                lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n                lastMultiMaterial.inherited = false;\n\n              }\n\n              // Ignore objects tail materials if no face declarations followed them before a new o/g started.\n              if (end && this.materials.length > 1) {\n\n                for (var mi = this.materials.length - 1; mi >= 0; mi--) {\n\n                  if (this.materials[mi].groupCount <= 0) {\n\n                    this.materials.splice(mi, 1);\n\n                  }\n\n                }\n\n              }\n\n              // Guarantee at least one empty material, this makes the creation later more straight forward.\n              if (end && this.materials.length === 0) {\n\n                this.materials.push({\n                  name: '',\n                  smooth: this.smooth\n                });\n\n              }\n\n              return lastMultiMaterial;\n\n            }\n          };\n\n          // Inherit previous objects material.\n          // Spec tells us that a declared material must be set to all objects until a new material is declared.\n          // If a usemtl declaration is encountered while this new object is being parsed, it will\n          // overwrite the inherited material. Exception being that there was already face declarations\n          // to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n          if (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function') {\n\n            var declared = previousMaterial.clone(0);\n            declared.inherited = true;\n            this.object.materials.push(declared);\n\n          }\n\n          this.objects.push(this.object);\n\n        },\n\n        finalize: function () {\n\n          if (this.object && typeof this.object._finalize === 'function') {\n\n            this.object._finalize(true);\n\n          }\n\n        },\n\n        parseVertexIndex: function (value, len) {\n\n          var index = parseInt(value, 10);\n          return (index >= 0 ? index - 1 : index + len / 3) * 3;\n\n        },\n\n        parseNormalIndex: function (value, len) {\n\n          var index = parseInt(value, 10);\n          return (index >= 0 ? index - 1 : index + len / 3) * 3;\n\n        },\n\n        parseUVIndex: function (value, len) {\n\n          var index = parseInt(value, 10);\n          return (index >= 0 ? index - 1 : index + len / 2) * 2;\n\n        },\n\n        addVertex: function (a, b, c) {\n\n          var src = this.vertices;\n          var dst = this.object.geometry.vertices;\n\n          dst.push(src[a + 0], src[a + 1], src[a + 2]);\n          dst.push(src[b + 0], src[b + 1], src[b + 2]);\n          dst.push(src[c + 0], src[c + 1], src[c + 2]);\n\n        },\n\n        addVertexPoint: function (a) {\n\n          var src = this.vertices;\n          var dst = this.object.geometry.vertices;\n\n          dst.push(src[a + 0], src[a + 1], src[a + 2]);\n\n        },\n\n        addVertexLine: function (a) {\n\n          var src = this.vertices;\n          var dst = this.object.geometry.vertices;\n\n          dst.push(src[a + 0], src[a + 1], src[a + 2]);\n\n        },\n\n        addNormal: function (a, b, c) {\n\n          var src = this.normals;\n          var dst = this.object.geometry.normals;\n\n          dst.push(src[a + 0], src[a + 1], src[a + 2]);\n          dst.push(src[b + 0], src[b + 1], src[b + 2]);\n          dst.push(src[c + 0], src[c + 1], src[c + 2]);\n\n        },\n\n        addColor: function (a, b, c) {\n\n          var src = this.colors;\n          var dst = this.object.geometry.colors;\n\n          dst.push(src[a + 0], src[a + 1], src[a + 2]);\n          dst.push(src[b + 0], src[b + 1], src[b + 2]);\n          dst.push(src[c + 0], src[c + 1], src[c + 2]);\n\n        },\n\n        addUV: function (a, b, c) {\n\n          var src = this.uvs;\n          var dst = this.object.geometry.uvs;\n\n          dst.push(src[a + 0], src[a + 1]);\n          dst.push(src[b + 0], src[b + 1]);\n          dst.push(src[c + 0], src[c + 1]);\n\n        },\n\n        addUVLine: function (a) {\n\n          var src = this.uvs;\n          var dst = this.object.geometry.uvs;\n\n          dst.push(src[a + 0], src[a + 1]);\n\n        },\n\n        addFace: function (a, b, c, ua, ub, uc, na, nb, nc) {\n\n          var vLen = this.vertices.length;\n\n          var ia = this.parseVertexIndex(a, vLen);\n          var ib = this.parseVertexIndex(b, vLen);\n          var ic = this.parseVertexIndex(c, vLen);\n\n          this.addVertex(ia, ib, ic);\n\n          if (this.colors.length > 0) {\n\n            this.addColor(ia, ib, ic);\n\n          }\n\n          if (ua !== undefined && ua !== '') {\n\n            var uvLen = this.uvs.length;\n            ia = this.parseUVIndex(ua, uvLen);\n            ib = this.parseUVIndex(ub, uvLen);\n            ic = this.parseUVIndex(uc, uvLen);\n            this.addUV(ia, ib, ic);\n\n          }\n\n          if (na !== undefined && na !== '') {\n\n            // Normals are many times the same. If so, skip function call and parseInt.\n            var nLen = this.normals.length;\n            ia = this.parseNormalIndex(na, nLen);\n\n            ib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n            ic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n\n            this.addNormal(ia, ib, ic);\n\n          }\n\n        },\n\n        addPointGeometry: function (vertices) {\n\n          this.object.geometry.type = 'Points';\n\n          var vLen = this.vertices.length;\n\n          for (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n            this.addVertexPoint(this.parseVertexIndex(vertices[vi], vLen));\n\n          }\n\n        },\n\n        addLineGeometry: function (vertices, uvs) {\n\n          this.object.geometry.type = 'Line';\n\n          var vLen = this.vertices.length;\n          var uvLen = this.uvs.length;\n\n          for (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n            this.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n\n          }\n\n          for (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n\n            this.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n\n          }\n\n        }\n\n      };\n\n      state.startObject('', false);\n\n      return state;\n\n    }\n\n    //\n\n    function OBJLoader(manager) {\n\n      THREE.Loader.call(this, manager);\n\n      this.materials = null;\n\n    }\n\n    OBJLoader.prototype = Object.assign(Object.create(THREE.Loader.prototype), {\n\n      constructor: OBJLoader,\n\n      load: function (url, onLoad, onProgress, onError) {\n\n        var scope = this;\n\n        var loader = new THREE.FileLoader(scope.manager);\n        loader.setPath(this.path);\n        loader.load(url, function (text) {\n\n          onLoad(scope.parse(text));\n\n        }, onProgress, onError);\n\n      },\n\n      setMaterials: function (materials) {\n\n        this.materials = materials;\n\n        return this;\n\n      },\n\n      parse: function (text) {\n\n        console.time('OBJLoader');\n\n        var state = new ParserState();\n\n        if (text.indexOf('\\r\\n') !== - 1) {\n\n          // This is faster than String.split with regex that splits on both\n          text = text.replace(/\\r\\n/g, '\\n');\n\n        }\n\n        if (text.indexOf('\\\\\\n') !== - 1) {\n\n          // join lines separated by a line continuation character (\\)\n          text = text.replace(/\\\\\\n/g, '');\n\n        }\n\n        var lines = text.split('\\n');\n        var line = '', lineFirstChar = '';\n        var lineLength = 0;\n        var result = [];\n\n        // Faster to just trim left side of the line. Use if available.\n        var trimLeft = (typeof ''.trimLeft === 'function');\n\n        for (var i = 0, l = lines.length; i < l; i++) {\n\n          line = lines[i];\n\n          line = trimLeft ? line.trimLeft() : line.trim();\n\n          lineLength = line.length;\n\n          if (lineLength === 0) continue;\n\n          lineFirstChar = line.charAt(0);\n\n          // @todo invoke passed in handler if any\n          if (lineFirstChar === '#') continue;\n\n          if (lineFirstChar === 'v') {\n\n            var data = line.split(/\\s+/);\n\n            switch (data[0]) {\n\n              case 'v':\n                state.vertices.push(\n                  parseFloat(data[1]),\n                  parseFloat(data[2]),\n                  parseFloat(data[3])\n                );\n                if (data.length >= 7) {\n\n                  state.colors.push(\n                    parseFloat(data[4]),\n                    parseFloat(data[5]),\n                    parseFloat(data[6])\n\n                  );\n\n                }\n                break;\n              case 'vn':\n                state.normals.push(\n                  parseFloat(data[1]),\n                  parseFloat(data[2]),\n                  parseFloat(data[3])\n                );\n                break;\n              case 'vt':\n                state.uvs.push(\n                  parseFloat(data[1]),\n                  parseFloat(data[2])\n                );\n                break;\n\n            }\n\n          } else if (lineFirstChar === 'f') {\n\n            var lineData = line.substr(1).trim();\n            var vertexData = lineData.split(/\\s+/);\n            var faceVertices = [];\n\n            // Parse the face vertex data into an easy to work with format\n\n            for (var j = 0, jl = vertexData.length; j < jl; j++) {\n\n              var vertex = vertexData[j];\n\n              if (vertex.length > 0) {\n\n                var vertexParts = vertex.split('/');\n                faceVertices.push(vertexParts);\n\n              }\n\n            }\n\n            // Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n            var v1 = faceVertices[0];\n\n            for (var j = 1, jl = faceVertices.length - 1; j < jl; j++) {\n\n              var v2 = faceVertices[j];\n              var v3 = faceVertices[j + 1];\n\n              state.addFace(\n                v1[0], v2[0], v3[0],\n                v1[1], v2[1], v3[1],\n                v1[2], v2[2], v3[2]\n              );\n\n            }\n\n          } else if (lineFirstChar === 'l') {\n\n            var lineParts = line.substring(1).trim().split(\" \");\n            var lineVertices = [], lineUVs = [];\n\n            if (line.indexOf(\"/\") === - 1) {\n\n              lineVertices = lineParts;\n\n            } else {\n\n              for (var li = 0, llen = lineParts.length; li < llen; li++) {\n\n                var parts = lineParts[li].split(\"/\");\n\n                if (parts[0] !== \"\") lineVertices.push(parts[0]);\n                if (parts[1] !== \"\") lineUVs.push(parts[1]);\n\n              }\n\n            }\n            state.addLineGeometry(lineVertices, lineUVs);\n\n          } else if (lineFirstChar === 'p') {\n\n            var lineData = line.substr(1).trim();\n            var pointData = lineData.split(\" \");\n\n            state.addPointGeometry(pointData);\n\n          } else if ((result = object_pattern.exec(line)) !== null) {\n\n            // o object_name\n            // or\n            // g group_name\n\n            // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            // var name = result[ 0 ].substr( 1 ).trim();\n            var name = (\" \" + result[0].substr(1).trim()).substr(1);\n\n            state.startObject(name);\n\n          } else if (material_use_pattern.test(line)) {\n\n            // material\n\n            state.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n\n          } else if (material_library_pattern.test(line)) {\n\n            // mtl file\n\n            state.materialLibraries.push(line.substring(7).trim());\n\n          } else if (lineFirstChar === 's') {\n\n            result = line.split(' ');\n\n            // smooth shading\n\n            // @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n            // but does not define a usemtl for each face set.\n            // This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n            // This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n            // where explicit usemtl defines geometry groups.\n            // Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n            /*\n             * http://paulbourke.net/dataformats/obj/\n             * or\n             * http://www.cs.utah.edu/~boulos/cs3505/obj_spec.pdf\n             *\n             * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n             * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n             * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n             * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n             * than 0.\"\n             */\n            if (result.length > 1) {\n\n              var value = result[1].trim().toLowerCase();\n              state.object.smooth = (value !== '0' && value !== 'off');\n\n            } else {\n\n              // ZBrush can produce \"s\" lines #11707\n              state.object.smooth = true;\n\n            }\n            var material = state.object.currentMaterial();\n            if (material) material.smooth = state.object.smooth;\n\n          } else {\n\n            // Handle null terminated files without exception\n            if (line === '\\0') continue;\n\n            throw new Error('THREE.OBJLoader: Unexpected line: \"' + line + '\"');\n\n          }\n\n        }\n\n        state.finalize();\n\n        var container = new THREE.Group();\n        container.materialLibraries = [].concat(state.materialLibraries);\n\n        for (var i = 0, l = state.objects.length; i < l; i++) {\n\n          var object = state.objects[i];\n          var geometry = object.geometry;\n          var materials = object.materials;\n          var isLine = (geometry.type === 'Line');\n          var isPoints = (geometry.type === 'Points');\n          var hasVertexColors = false;\n\n          // Skip o/g line declarations that did not follow with any faces\n          if (geometry.vertices.length === 0) continue;\n\n          var buffergeometry = new THREE.BufferGeometry();\n\n          buffergeometry.addAttribute('position', new THREE.Float32BufferAttribute(geometry.vertices, 3));\n\n          if (geometry.normals.length > 0) {\n\n            buffergeometry.addAttribute('normal', new THREE.Float32BufferAttribute(geometry.normals, 3));\n\n          } else {\n\n            buffergeometry.computeVertexNormals();\n\n          }\n\n          if (geometry.colors.length > 0) {\n\n            hasVertexColors = true;\n            buffergeometry.addAttribute('color', new THREE.Float32BufferAttribute(geometry.colors, 3));\n\n          }\n\n          if (geometry.uvs.length > 0) {\n\n            buffergeometry.addAttribute('uv', new THREE.Float32BufferAttribute(geometry.uvs, 2));\n\n          }\n\n          // Create materials\n\n          var createdMaterials = [];\n\n          for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n            var sourceMaterial = materials[mi];\n            var material = undefined;\n\n            if (this.materials !== null) {\n\n              material = this.materials.create(sourceMaterial.name);\n\n              // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n              if (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\n\n                var materialLine = new THREE.LineBasicMaterial();\n                THREE.Material.prototype.copy.call(materialLine, material);\n                materialLine.color.copy(material.color);\n                material = materialLine;\n\n              } else if (isPoints && material && !(material instanceof THREE.PointsMaterial)) {\n\n                var materialPoints = new THREE.PointsMaterial({ size: 10, sizeAttenuation: false });\n                THREE.Material.prototype.copy.call(materialPoints, material);\n                materialPoints.color.copy(material.color);\n                materialPoints.map = material.map;\n                material = materialPoints;\n\n              }\n\n            }\n\n            if (!material) {\n\n              if (isLine) {\n\n                material = new THREE.LineBasicMaterial();\n\n              } else if (isPoints) {\n\n                material = new THREE.PointsMaterial({ size: 1, sizeAttenuation: false });\n\n              } else {\n\n                material = new THREE.MeshPhongMaterial();\n\n              }\n\n              material.name = sourceMaterial.name;\n\n            }\n\n            material.flatShading = sourceMaterial.smooth ? false : true;\n            material.vertexColors = hasVertexColors ? THREE.VertexColors : THREE.NoColors;\n\n            createdMaterials.push(material);\n\n          }\n\n          // Create mesh\n\n          var mesh;\n\n          if (createdMaterials.length > 1) {\n\n            for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n              var sourceMaterial = materials[mi];\n              buffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n\n            }\n\n            if (isLine) {\n\n              mesh = new THREE.LineSegments(buffergeometry, createdMaterials);\n\n            } else if (isPoints) {\n\n              mesh = new THREE.Points(buffergeometry, createdMaterials);\n\n            } else {\n\n              mesh = new THREE.Mesh(buffergeometry, createdMaterials);\n\n            }\n\n          } else {\n\n            if (isLine) {\n\n              mesh = new THREE.LineSegments(buffergeometry, createdMaterials[0]);\n\n            } else if (isPoints) {\n\n              mesh = new THREE.Points(buffergeometry, createdMaterials[0]);\n\n            } else {\n\n              mesh = new THREE.Mesh(buffergeometry, createdMaterials[0]);\n\n            }\n\n          }\n\n          mesh.name = object.name;\n\n          container.add(mesh);\n\n        }\n\n        console.timeEnd('OBJLoader');\n\n        return container;\n\n      }\n\n    });\n\n    return OBJLoader;\n\n  })();\n\n  'use strict';\n  var\n    transferableMessage = self.webkitPostMessage || self.postMessage,\n\n    // enum\n    MESSAGE_TYPES = {\n      WORLDREPORT: 0,\n      COLLISIONREPORT: 1,\n      VEHICLEREPORT: 2,\n      CONSTRAINTREPORT: 3\n    },\n\n    // temp variables\n    _object,\n    _vector,\n    _transform,\n\n    // functions\n    public_functions = {},\n    getShapeFromCache,\n    setShapeCache,\n    createShape,\n    reportWorld,\n    reportVehicles,\n    reportCollisions,\n    reportConstraints,\n\n    // world variables\n    fixedTimeStep, // used when calling stepSimulation\n    rateLimit, // sets whether or not to sync the simulation rate with fixedTimeStep\n    last_simulation_time,\n    last_simulation_duration = 0,\n    world,\n    transform,\n    _vec3_1,\n    _vec3_2,\n    _vec3_3,\n    _quat,\n    // private cache\n    _objects = {},\n    _vehicles = {},\n    _constraints = {},\n    _materials = {},\n    _objects_ammo = {},\n    _num_objects = 0,\n    _num_wheels = 0,\n    _num_constraints = 0,\n    _object_shapes = {},\n\n    // The following objects are to track objects that ammo.js doesn't clean\n    // up. All are cleaned up when they're corresponding body is destroyed.\n    // Unfortunately, it's very difficult to get at these objects from the\n    // body, so we have to track them ourselves.\n    _motion_states = {},\n    // Don't need to worry about it for cached shapes.\n    _noncached_shapes = {},\n    // A body with a compound shape always has a regular shape as well, so we\n    // have track them separately.\n    _compound_shapes = {},\n\n    // object reporting\n    REPORT_CHUNKSIZE, // report array is increased in increments of this chunk size\n\n    WORLDREPORT_ITEMSIZE = 14, // how many float values each reported item needs\n    worldreport,\n\n    COLLISIONREPORT_ITEMSIZE = 5, // one float for each object id, and a Vec3 contact normal\n    collisionreport,\n\n    VEHICLEREPORT_ITEMSIZE = 9, // vehicle id, wheel index, 3 for position, 4 for rotation\n    vehiclereport,\n\n    CONSTRAINTREPORT_ITEMSIZE = 6, // constraint id, offset object, offset, applied impulse\n    constraintreport;\n\n  var ab = new ArrayBuffer(1);\n\n  transferableMessage(ab, [ab]);\n  var SUPPORT_TRANSFERABLE = (ab.byteLength === 0);\n\n  getShapeFromCache = function (cache_key) {\n    if (_object_shapes[cache_key] !== undefined) {\n      return _object_shapes[cache_key];\n    }\n    return null;\n  };\n\n  setShapeCache = function (cache_key, shape) {\n    _object_shapes[cache_key] = shape;\n  }\n\n  createShape = function (description) {\n    var cache_key, shape;\n\n    _transform.setIdentity();\n    switch (description.type) {\n      case 'plane':\n        cache_key = 'plane_' + description.normal.x + '_' + description.normal.y + '_' + description.normal.z;\n        if ((shape = getShapeFromCache(cache_key)) === null) {\n          _vec3_1.setX(description.normal.x);\n          _vec3_1.setY(description.normal.y);\n          _vec3_1.setZ(description.normal.z);\n          shape = new Ammo.btStaticPlaneShape(_vec3_1, 0);\n          setShapeCache(cache_key, shape);\n        }\n        break;\n\n      case 'box':\n        cache_key = 'box_' + description.width + '_' + description.height + '_' + description.depth;\n        if ((shape = getShapeFromCache(cache_key)) === null) {\n          _vec3_1.setX(description.width / 2);\n          _vec3_1.setY(description.height / 2);\n          _vec3_1.setZ(description.depth / 2);\n          shape = new Ammo.btBoxShape(_vec3_1);\n          setShapeCache(cache_key, shape);\n        }\n        break;\n\n      case 'sphere':\n        cache_key = 'sphere_' + description.radius;\n        if ((shape = getShapeFromCache(cache_key)) === null) {\n          shape = new Ammo.btSphereShape(description.radius);\n          setShapeCache(cache_key, shape);\n        }\n        break;\n\n      case 'cylinder':\n        cache_key = 'cylinder_' + description.width + '_' + description.height + '_' + description.depth;\n        if ((shape = getShapeFromCache(cache_key)) === null) {\n          _vec3_1.setX(description.width / 2);\n          _vec3_1.setY(description.height / 2);\n          _vec3_1.setZ(description.depth / 2);\n          shape = new Ammo.btCylinderShape(_vec3_1);\n          setShapeCache(cache_key, shape);\n        }\n        break;\n\n      case 'capsule':\n        cache_key = 'capsule_' + description.radius + '_' + description.height;\n        if ((shape = getShapeFromCache(cache_key)) === null) {\n          // In Bullet, capsule height excludes the end spheres\n          shape = new Ammo.btCapsuleShape(description.radius, description.height - 2 * description.radius);\n          setShapeCache(cache_key, shape);\n        }\n        break;\n\n      case 'cone':\n        cache_key = 'cone_' + description.radius + '_' + description.height;\n        if ((shape = getShapeFromCache(cache_key)) === null) {\n          shape = new Ammo.btConeShape(description.radius, description.height);\n          setShapeCache(cache_key, shape);\n        }\n        break;\n\n      case 'concave':\n        var i, triangle, triangle_mesh = new Ammo.btTriangleMesh;\n        if (!description.triangles.length) return false\n\n        for (i = 0; i < description.triangles.length; i++) {\n          triangle = description.triangles[i];\n\n          _vec3_1.setX(triangle[0].x);\n          _vec3_1.setY(triangle[0].y);\n          _vec3_1.setZ(triangle[0].z);\n\n          _vec3_2.setX(triangle[1].x);\n          _vec3_2.setY(triangle[1].y);\n          _vec3_2.setZ(triangle[1].z);\n\n          _vec3_3.setX(triangle[2].x);\n          _vec3_3.setY(triangle[2].y);\n          _vec3_3.setZ(triangle[2].z);\n\n          triangle_mesh.addTriangle(\n            _vec3_1,\n            _vec3_2,\n            _vec3_3,\n            true\n          );\n        }\n\n        shape = new Ammo.btBvhTriangleMeshShape(\n          triangle_mesh,\n          true,\n          true\n        );\n        _noncached_shapes[description.id] = shape;\n        break;\n\n      case 'convex':\n        var i, point, shape = new Ammo.btConvexHullShape;\n        for (i = 0; i < description.points.length; i++) {\n          point = description.points[i];\n\n          _vec3_1.setX(point.x);\n          _vec3_1.setY(point.y);\n          _vec3_1.setZ(point.z);\n\n          shape.addPoint(_vec3_1);\n\n        }\n        _noncached_shapes[description.id] = shape;\n        break;\n\n      case 'heightfield':\n\n        var ptr = Ammo.allocate(4 * description.xpts * description.ypts, \"float\", Ammo.ALLOC_NORMAL);\n\n        for (var f = 0; f < description.points.length; f++) {\n          Ammo.setValue(ptr + f, description.points[f], 'float');\n        }\n\n        shape = new Ammo.btHeightfieldTerrainShape(\n          description.xpts,\n          description.ypts,\n          ptr,\n          1,\n          -description.absMaxHeight,\n          description.absMaxHeight,\n          2,\n          0,\n          false\n        );\n\n        _vec3_1.setX(description.xsize / (description.xpts - 1));\n        _vec3_1.setY(description.ysize / (description.ypts - 1));\n        _vec3_1.setZ(1);\n\n        shape.setLocalScaling(_vec3_1);\n        _noncached_shapes[description.id] = shape;\n        break;\n\n      default:\n        // Not recognized\n        return;\n        break;\n    }\n\n    return shape;\n  };\n\n  public_functions.init = function (params) {\n    importScripts(params.ammo);\n\n    _transform = new Ammo.btTransform;\n    _vec3_1 = new Ammo.btVector3(0, 0, 0);\n    _vec3_2 = new Ammo.btVector3(0, 0, 0);\n    _vec3_3 = new Ammo.btVector3(0, 0, 0);\n    _quat = new Ammo.btQuaternion(0, 0, 0, 0);\n\n    REPORT_CHUNKSIZE = params.reportsize || 50;\n    if (SUPPORT_TRANSFERABLE) {\n      // Transferable messages are supported, take advantage of them with TypedArrays\n      worldreport = new Float32Array(2 + REPORT_CHUNKSIZE * WORLDREPORT_ITEMSIZE); // message id + # of objects to report + chunk size * # of values per object\n      collisionreport = new Float32Array(2 + REPORT_CHUNKSIZE * COLLISIONREPORT_ITEMSIZE); // message id + # of collisions to report + chunk size * # of values per object\n      vehiclereport = new Float32Array(2 + REPORT_CHUNKSIZE * VEHICLEREPORT_ITEMSIZE); // message id + # of vehicles to report + chunk size * # of values per object\n      constraintreport = new Float32Array(2 + REPORT_CHUNKSIZE * CONSTRAINTREPORT_ITEMSIZE); // message id + # of constraints to report + chunk size * # of values per object\n    } else {\n      // Transferable messages are not supported, send data as normal arrays\n      worldreport = [];\n      collisionreport = [];\n      vehiclereport = [];\n      constraintreport = [];\n    }\n    worldreport[0] = MESSAGE_TYPES.WORLDREPORT;\n    collisionreport[0] = MESSAGE_TYPES.COLLISIONREPORT;\n    vehiclereport[0] = MESSAGE_TYPES.VEHICLEREPORT;\n    constraintreport[0] = MESSAGE_TYPES.CONSTRAINTREPORT;\n\n    var collisionConfiguration = new Ammo.btDefaultCollisionConfiguration,\n      dispatcher = new Ammo.btCollisionDispatcher(collisionConfiguration),\n      solver = new Ammo.btSequentialImpulseConstraintSolver,\n      broadphase;\n\n    if (!params.broadphase) params.broadphase = { type: 'dynamic' };\n    switch (params.broadphase.type) {\n      case 'sweepprune':\n\n        _vec3_1.setX(params.broadphase.aabbmin.x);\n        _vec3_1.setY(params.broadphase.aabbmin.y);\n        _vec3_1.setZ(params.broadphase.aabbmin.z);\n\n        _vec3_2.setX(params.broadphase.aabbmax.x);\n        _vec3_2.setY(params.broadphase.aabbmax.y);\n        _vec3_2.setZ(params.broadphase.aabbmax.z);\n\n        broadphase = new Ammo.btAxisSweep3(\n          _vec3_1,\n          _vec3_2\n        );\n\n        break;\n\n      case 'dynamic':\n      default:\n        broadphase = new Ammo.btDbvtBroadphase;\n        break;\n    }\n\n    world = new Ammo.btDiscreteDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration);\n\n    fixedTimeStep = params.fixedTimeStep;\n    rateLimit = params.rateLimit;\n\n    transferableMessage({ cmd: 'worldReady' });\n  };\n\n  public_functions.registerMaterial = function (description) {\n    _materials[description.id] = description;\n  };\n\n  public_functions.unRegisterMaterial = function (description) {\n    delete _materials[description.id];\n  };\n\n  public_functions.setFixedTimeStep = function (description) {\n    fixedTimeStep = description;\n  };\n\n  public_functions.setGravity = function (description) {\n    _vec3_1.setX(description.x);\n    _vec3_1.setY(description.y);\n    _vec3_1.setZ(description.z);\n    world.setGravity(_vec3_1);\n  };\n\n  public_functions.addObject = function (description) {\n\n    var i,\n      localInertia, shape, motionState, rbInfo, body;\n\n    shape = createShape(description);\n    if (!shape) return\n    // If there are children then this is a compound shape\n    if (description.children) {\n      var compound_shape = new Ammo.btCompoundShape, _child;\n      compound_shape.addChildShape(_transform, shape);\n\n      for (i = 0; i < description.children.length; i++) {\n        _child = description.children[i];\n\n        var trans = new Ammo.btTransform;\n        trans.setIdentity();\n\n        _vec3_1.setX(_child.position_offset.x);\n        _vec3_1.setY(_child.position_offset.y);\n        _vec3_1.setZ(_child.position_offset.z);\n        trans.setOrigin(_vec3_1);\n\n        _quat.setX(_child.rotation.x);\n        _quat.setY(_child.rotation.y);\n        _quat.setZ(_child.rotation.z);\n        _quat.setW(_child.rotation.w);\n        trans.setRotation(_quat);\n\n        shape = createShape(description.children[i]);\n        compound_shape.addChildShape(trans, shape);\n        Ammo.destroy(trans);\n      }\n\n      shape = compound_shape;\n      _compound_shapes[description.id] = shape;\n    }\n    _vec3_1.setX(0);\n    _vec3_1.setY(0);\n    _vec3_1.setZ(0);\n    shape.calculateLocalInertia(description.mass, _vec3_1);\n\n    _transform.setIdentity();\n\n    _vec3_2.setX(description.position.x);\n    _vec3_2.setY(description.position.y);\n    _vec3_2.setZ(description.position.z);\n    _transform.setOrigin(_vec3_2);\n\n    _quat.setX(description.rotation.x);\n    _quat.setY(description.rotation.y);\n    _quat.setZ(description.rotation.z);\n    _quat.setW(description.rotation.w);\n    _transform.setRotation(_quat);\n\n    motionState = new Ammo.btDefaultMotionState(_transform); // #TODO: btDefaultMotionState supports center of mass offset as second argument - implement\n    rbInfo = new Ammo.btRigidBodyConstructionInfo(description.mass, motionState, shape, _vec3_1);\n\n    if (description.materialId !== undefined) {\n      rbInfo.set_m_friction(_materials[description.materialId].friction);\n      rbInfo.set_m_restitution(_materials[description.materialId].restitution);\n    }\n\n    body = new Ammo.btRigidBody(rbInfo);\n    Ammo.destroy(rbInfo);\n\n    if (typeof description.collision_flags !== 'undefined') {\n      body.setCollisionFlags(description.collision_flags);\n    }\n\n    world.addRigidBody(body);\n\n    body.id = description.id;\n    _objects[body.id] = body;\n    _motion_states[body.id] = motionState;\n\n    var ptr = body.a != undefined ? body.a : body.ptr;\n    _objects_ammo[ptr] = body.id;\n    _num_objects++;\n\n    transferableMessage({ cmd: 'objectReady', params: body.id });\n  };\n\n  public_functions.addVehicle = function (description) {\n    var vehicle_tuning = new Ammo.btVehicleTuning(),\n      vehicle;\n\n    vehicle_tuning.set_m_suspensionStiffness(description.suspension_stiffness);\n    vehicle_tuning.set_m_suspensionCompression(description.suspension_compression);\n    vehicle_tuning.set_m_suspensionDamping(description.suspension_damping);\n    vehicle_tuning.set_m_maxSuspensionTravelCm(description.max_suspension_travel);\n    vehicle_tuning.set_m_maxSuspensionForce(description.max_suspension_force);\n\n    vehicle = new Ammo.btRaycastVehicle(vehicle_tuning, _objects[description.rigidBody], new Ammo.btDefaultVehicleRaycaster(world));\n    vehicle.tuning = vehicle_tuning;\n\n    _objects[description.rigidBody].setActivationState(4);\n    vehicle.setCoordinateSystem(0, 1, 2);\n\n    world.addVehicle(vehicle);\n    _vehicles[description.id] = vehicle;\n  };\n  public_functions.removeVehicle = function (description) {\n    delete _vehicles[description.id];\n  };\n\n  public_functions.addWheel = function (description) {\n    if (_vehicles[description.id] !== undefined) {\n      var tuning = _vehicles[description.id].tuning;\n      if (description.tuning !== undefined) {\n        tuning = new Ammo.btVehicleTuning();\n        tuning.set_m_suspensionStiffness(description.tuning.suspension_stiffness);\n        tuning.set_m_suspensionCompression(description.tuning.suspension_compression);\n        tuning.set_m_suspensionDamping(description.tuning.suspension_damping);\n        tuning.set_m_maxSuspensionTravelCm(description.tuning.max_suspension_travel);\n        tuning.set_m_maxSuspensionForce(description.tuning.max_suspension_force);\n      }\n\n      _vec3_1.setX(description.connection_point.x);\n      _vec3_1.setY(description.connection_point.y);\n      _vec3_1.setZ(description.connection_point.z);\n\n      _vec3_2.setX(description.wheel_direction.x);\n      _vec3_2.setY(description.wheel_direction.y);\n      _vec3_2.setZ(description.wheel_direction.z);\n\n      _vec3_3.setX(description.wheel_axle.x);\n      _vec3_3.setY(description.wheel_axle.y);\n      _vec3_3.setZ(description.wheel_axle.z);\n\n      _vehicles[description.id].addWheel(\n        _vec3_1,\n        _vec3_2,\n        _vec3_3,\n        description.suspension_rest_length,\n        description.wheel_radius,\n        tuning,\n        description.is_front_wheel\n      );\n    }\n\n    _num_wheels++;\n\n    if (SUPPORT_TRANSFERABLE) {\n      vehiclereport = new Float32Array(1 + _num_wheels * VEHICLEREPORT_ITEMSIZE); // message id & ( # of objects to report * # of values per object )\n      vehiclereport[0] = MESSAGE_TYPES.VEHICLEREPORT;\n    } else {\n      vehiclereport = [MESSAGE_TYPES.VEHICLEREPORT];\n    }\n  };\n\n  public_functions.setSteering = function (details) {\n    if (_vehicles[details.id] !== undefined) {\n      _vehicles[details.id].setSteeringValue(details.steering, details.wheel);\n    }\n  };\n  public_functions.setBrake = function (details) {\n    if (_vehicles[details.id] !== undefined) {\n      _vehicles[details.id].setBrake(details.brake, details.wheel);\n    }\n  };\n  public_functions.applyEngineForce = function (details) {\n    if (_vehicles[details.id] !== undefined) {\n      _vehicles[details.id].applyEngineForce(details.force, details.wheel);\n    }\n  };\n\n  public_functions.removeObject = function (details) {\n    world.removeRigidBody(_objects[details.id]);\n    Ammo.destroy(_objects[details.id]);\n    Ammo.destroy(_motion_states[details.id]);\n    if (_compound_shapes[details.id]) Ammo.destroy(_compound_shapes[details.id]);\n    if (_noncached_shapes[details.id]) Ammo.destroy(_noncached_shapes[details.id]);\n    var ptr = _objects[details.id].a != undefined ? _objects[details.id].a : _objects[details.id].ptr;\n    delete _objects_ammo[ptr];\n    delete _objects[details.id];\n    delete _motion_states[details.id];\n    if (_compound_shapes[details.id]) delete _compound_shapes[details.id];\n    if (_noncached_shapes[details.id]) delete _noncached_shapes[details.id];\n    _num_objects--;\n  };\n\n  public_functions.updateTransform = function (details) {\n    _object = _objects[details.id];\n    _object.getMotionState().getWorldTransform(_transform);\n\n    if (details.pos) {\n      _vec3_1.setX(details.pos.x);\n      _vec3_1.setY(details.pos.y);\n      _vec3_1.setZ(details.pos.z);\n      _transform.setOrigin(_vec3_1);\n    }\n\n    if (details.quat) {\n      _quat.setX(details.quat.x);\n      _quat.setY(details.quat.y);\n      _quat.setZ(details.quat.z);\n      _quat.setW(details.quat.w);\n      _transform.setRotation(_quat);\n    }\n\n    _object.setWorldTransform(_transform);\n    _object.activate();\n  };\n\n  public_functions.updateMass = function (details) {\n    // #TODO: changing a static object into dynamic is buggy\n    _object = _objects[details.id];\n\n    // Per http://www.bulletphysics.org/Bullet/phpBB3/viewtopic.php?p=&f=9&t=3663#p13816\n    world.removeRigidBody(_object);\n\n    _vec3_1.setX(0);\n    _vec3_1.setY(0);\n    _vec3_1.setZ(0);\n\n    _object.setMassProps(details.mass, _vec3_1);\n    world.addRigidBody(_object);\n    _object.activate();\n  };\n\n  public_functions.applyCentralImpulse = function (details) {\n\n    _vec3_1.setX(details.x);\n    _vec3_1.setY(details.y);\n    _vec3_1.setZ(details.z);\n\n    _objects[details.id].applyCentralImpulse(_vec3_1);\n    _objects[details.id].activate();\n  };\n\n  public_functions.applyImpulse = function (details) {\n\n    _vec3_1.setX(details.impulse_x);\n    _vec3_1.setY(details.impulse_y);\n    _vec3_1.setZ(details.impulse_z);\n\n    _vec3_2.setX(details.x);\n    _vec3_2.setY(details.y);\n    _vec3_2.setZ(details.z);\n\n    _objects[details.id].applyImpulse(\n      _vec3_1,\n      _vec3_2\n    );\n    _objects[details.id].activate();\n  };\n\n  public_functions.applyTorque = function (details) {\n\n    _vec3_1.setX(details.torque_x);\n    _vec3_1.setY(details.torque_y);\n    _vec3_1.setZ(details.torque_z);\n\n    _objects[details.id].applyTorque(\n      _vec3_1\n    );\n    _objects[details.id].activate();\n  };\n\n  public_functions.applyCentralForce = function (details) {\n\n    _vec3_1.setX(details.x);\n    _vec3_1.setY(details.y);\n    _vec3_1.setZ(details.z);\n\n    _objects[details.id].applyCentralForce(_vec3_1);\n    _objects[details.id].activate();\n  };\n\n  public_functions.applyForce = function (details) {\n\n    _vec3_1.setX(details.force_x);\n    _vec3_1.setY(details.force_y);\n    _vec3_1.setZ(details.force_z);\n\n    _vec3_2.setX(details.x);\n    _vec3_2.setY(details.y);\n    _vec3_2.setZ(details.z);\n\n    _objects[details.id].applyForce(\n      _vec3_1,\n      _vec3_2\n    );\n    _objects[details.id].activate();\n  };\n\n  public_functions.onSimulationResume = function (params) {\n    last_simulation_time = Date.now();\n  };\n\n  public_functions.setAngularVelocity = function (details) {\n\n    _vec3_1.setX(details.x);\n    _vec3_1.setY(details.y);\n    _vec3_1.setZ(details.z);\n\n    _objects[details.id].setAngularVelocity(\n      _vec3_1\n    );\n    _objects[details.id].activate();\n  };\n\n  public_functions.setLinearVelocity = function (details) {\n\n    _vec3_1.setX(details.x);\n    _vec3_1.setY(details.y);\n    _vec3_1.setZ(details.z);\n\n    _objects[details.id].setLinearVelocity(\n      _vec3_1\n    );\n    _objects[details.id].activate();\n  };\n\n  public_functions.setAngularFactor = function (details) {\n\n    _vec3_1.setX(details.x);\n    _vec3_1.setY(details.y);\n    _vec3_1.setZ(details.z);\n\n    _objects[details.id].setAngularFactor(\n      _vec3_1\n    );\n  };\n\n  public_functions.setLinearFactor = function (details) {\n\n    _vec3_1.setX(details.x);\n    _vec3_1.setY(details.y);\n    _vec3_1.setZ(details.z);\n\n    _objects[details.id].setLinearFactor(\n      _vec3_1\n    );\n  };\n\n  public_functions.setDamping = function (details) {\n    _objects[details.id].setDamping(details.linear, details.angular);\n  };\n\n  public_functions.setCcdMotionThreshold = function (details) {\n    _objects[details.id].setCcdMotionThreshold(details.threshold);\n  };\n\n  public_functions.setCcdSweptSphereRadius = function (details) {\n    _objects[details.id].setCcdSweptSphereRadius(details.radius);\n  };\n\n  public_functions.addConstraint = function (details) {\n    var constraint;\n\n    switch (details.type) {\n\n      case 'point':\n        if (details.objectb === undefined) {\n\n          _vec3_1.setX(details.positiona.x);\n          _vec3_1.setY(details.positiona.y);\n          _vec3_1.setZ(details.positiona.z);\n\n          constraint = new Ammo.btPoint2PointConstraint(\n            _objects[details.objecta],\n            _vec3_1\n          );\n        } else {\n\n          _vec3_1.setX(details.positiona.x);\n          _vec3_1.setY(details.positiona.y);\n          _vec3_1.setZ(details.positiona.z);\n\n          _vec3_2.setX(details.positionb.x);\n          _vec3_2.setY(details.positionb.y);\n          _vec3_2.setZ(details.positionb.z);\n\n          constraint = new Ammo.btPoint2PointConstraint(\n            _objects[details.objecta],\n            _objects[details.objectb],\n            _vec3_1,\n            _vec3_2\n          );\n        }\n        break;\n\n      case 'hinge':\n        if (details.objectb === undefined) {\n\n          _vec3_1.setX(details.positiona.x);\n          _vec3_1.setY(details.positiona.y);\n          _vec3_1.setZ(details.positiona.z);\n\n          _vec3_2.setX(details.axis.x);\n          _vec3_2.setY(details.axis.y);\n          _vec3_2.setZ(details.axis.z);\n\n          constraint = new Ammo.btHingeConstraint(\n            _objects[details.objecta],\n            _vec3_1,\n            _vec3_2\n          );\n        } else {\n\n          _vec3_1.setX(details.positiona.x);\n          _vec3_1.setY(details.positiona.y);\n          _vec3_1.setZ(details.positiona.z);\n\n          _vec3_2.setX(details.positionb.x);\n          _vec3_2.setY(details.positionb.y);\n          _vec3_2.setZ(details.positionb.z);\n\n          _vec3_3.setX(details.axis.x);\n          _vec3_3.setY(details.axis.y);\n          _vec3_3.setZ(details.axis.z);\n\n          constraint = new Ammo.btHingeConstraint(\n            _objects[details.objecta],\n            _objects[details.objectb],\n            _vec3_1,\n            _vec3_2,\n            _vec3_3,\n            _vec3_3\n          );\n        }\n        break;\n\n      case 'slider':\n        var transforma, transformb, rotation;\n\n        transforma = new Ammo.btTransform();\n\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        transforma.setOrigin(_vec3_1);\n\n        var rotation = transforma.getRotation();\n        rotation.setEuler(details.axis.x, details.axis.y, details.axis.z);\n        transforma.setRotation(rotation);\n\n        if (details.objectb) {\n          transformb = new Ammo.btTransform();\n\n          _vec3_2.setX(details.positionb.x);\n          _vec3_2.setY(details.positionb.y);\n          _vec3_2.setZ(details.positionb.z);\n\n          transformb.setOrigin(_vec3_2);\n\n          rotation = transformb.getRotation();\n          rotation.setEuler(details.axis.x, details.axis.y, details.axis.z);\n          transformb.setRotation(rotation);\n\n          constraint = new Ammo.btSliderConstraint(\n            _objects[details.objecta],\n            _objects[details.objectb],\n            transforma,\n            transformb,\n            true\n          );\n        } else {\n          constraint = new Ammo.btSliderConstraint(\n            _objects[details.objecta],\n            transforma,\n            true\n          );\n        }\n\n        Ammo.destroy(transforma);\n        if (transformb != undefined) {\n          Ammo.destroy(transformb);\n        }\n        break;\n\n      case 'conetwist':\n        var transforma, transformb;\n\n        transforma = new Ammo.btTransform();\n        transforma.setIdentity();\n\n        transformb = new Ammo.btTransform();\n        transformb.setIdentity();\n\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        _vec3_2.setX(details.positionb.x);\n        _vec3_2.setY(details.positionb.y);\n        _vec3_2.setZ(details.positionb.z);\n\n        transforma.setOrigin(_vec3_1);\n        transformb.setOrigin(_vec3_2);\n\n        var rotation = transforma.getRotation();\n        rotation.setEulerZYX(-details.axisa.z, -details.axisa.y, -details.axisa.x);\n        transforma.setRotation(rotation);\n\n        rotation = transformb.getRotation();\n        rotation.setEulerZYX(-details.axisb.z, -details.axisb.y, -details.axisb.x);\n        transformb.setRotation(rotation);\n\n        constraint = new Ammo.btConeTwistConstraint(\n          _objects[details.objecta],\n          _objects[details.objectb],\n          transforma,\n          transformb\n        );\n\n        constraint.setLimit(Math.PI, 0, Math.PI);\n\n        Ammo.destroy(transforma);\n        Ammo.destroy(transformb);\n\n        break;\n\n      case 'dof':\n        var transforma, transformb, rotation;\n\n        transforma = new Ammo.btTransform();\n        transforma.setIdentity();\n\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        transforma.setOrigin(_vec3_1);\n\n        rotation = transforma.getRotation();\n        rotation.setEulerZYX(-details.axisa.z, -details.axisa.y, -details.axisa.x);\n        transforma.setRotation(rotation);\n\n        if (details.objectb) {\n          transformb = new Ammo.btTransform();\n          transformb.setIdentity();\n\n          _vec3_2.setX(details.positionb.x);\n          _vec3_2.setY(details.positionb.y);\n          _vec3_2.setZ(details.positionb.z);\n\n          transformb.setOrigin(_vec3_2);\n\n          rotation = transformb.getRotation();\n          rotation.setEulerZYX(-details.axisb.z, -details.axisb.y, -details.axisb.x);\n          transformb.setRotation(rotation);\n\n          constraint = new Ammo.btGeneric6DofConstraint(\n            _objects[details.objecta],\n            _objects[details.objectb],\n            transforma,\n            transformb\n          );\n        } else {\n          constraint = new Ammo.btGeneric6DofConstraint(\n            _objects[details.objecta],\n            transforma\n          );\n        }\n        Ammo.destroy(transforma);\n        if (transformb != undefined) {\n          Ammo.destroy(transformb);\n        }\n        break;\n\n      default:\n        return;\n\n    };\n\n    world.addConstraint(constraint);\n\n    constraint.enableFeedback();\n    _constraints[details.id] = constraint;\n    _num_constraints++;\n\n    if (SUPPORT_TRANSFERABLE) {\n      constraintreport = new Float32Array(1 + _num_constraints * CONSTRAINTREPORT_ITEMSIZE); // message id & ( # of objects to report * # of values per object )\n      constraintreport[0] = MESSAGE_TYPES.CONSTRAINTREPORT;\n    } else {\n      constraintreport = [MESSAGE_TYPES.CONSTRAINTREPORT];\n    }\n  };\n\n  public_functions.removeConstraint = function (details) {\n    var constraint = _constraints[details.id];\n    if (constraint !== undefined) {\n      world.removeConstraint(constraint);\n      delete _constraints[details.id];\n      _num_constraints--;\n    }\n  };\n\n  public_functions.constraint_setBreakingImpulseThreshold = function (details) {\n    var constraint = _constraints[details.id];\n    if (constraint !== undefind) {\n      constraint.setBreakingImpulseThreshold(details.threshold);\n    }\n  };\n\n  public_functions.simulate = function simulate(params) {\n    if (world) {\n      params = params || {};\n\n      if (!params.timeStep) {\n        if (last_simulation_time) {\n          params.timeStep = 0;\n          while (params.timeStep + last_simulation_duration <= fixedTimeStep) {\n            params.timeStep = (Date.now() - last_simulation_time) / 1000; // time since last simulation\n          }\n        } else {\n          params.timeStep = fixedTimeStep; // handle first frame\n        }\n      } else {\n        if (params.timeStep < fixedTimeStep) {\n          params.timeStep = fixedTimeStep;\n        }\n      }\n\n      params.maxSubSteps = params.maxSubSteps || Math.ceil(params.timeStep / fixedTimeStep); // If maxSubSteps is not defined, keep the simulation fully up to date\n\n      last_simulation_duration = Date.now();\n      world.stepSimulation(params.timeStep, params.maxSubSteps, fixedTimeStep);\n\n      reportVehicles();\n      reportCollisions();\n      reportConstraints();\n      reportWorld();\n\n      last_simulation_duration = (Date.now() - last_simulation_duration) / 1000;\n      last_simulation_time = Date.now();\n    }\n  };\n\n\n  // Constraint functions\n  public_functions.hinge_setLimits = function (params) {\n    _constraints[params.constraint].setLimit(params.low, params.high, 0, params.bias_factor, params.relaxation_factor);\n  };\n  public_functions.hinge_enableAngularMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.enableAngularMotor(true, params.velocity, params.acceleration);\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.hinge_disableMotor = function (params) {\n    _constraints[params.constraint].enableMotor(false);\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n\n  public_functions.slider_setLimits = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.setLowerLinLimit(params.lin_lower || 0);\n    constraint.setUpperLinLimit(params.lin_upper || 0);\n\n    constraint.setLowerAngLimit(params.ang_lower || 0);\n    constraint.setUpperAngLimit(params.ang_upper || 0);\n  };\n  public_functions.slider_setRestitution = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.setSoftnessLimLin(params.linear || 0);\n    constraint.setSoftnessLimAng(params.angular || 0);\n  };\n  public_functions.slider_enableLinearMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.setTargetLinMotorVelocity(params.velocity);\n    constraint.setMaxLinMotorForce(params.acceleration);\n    constraint.setPoweredLinMotor(true);\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.slider_disableLinearMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.setPoweredLinMotor(false);\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.slider_enableAngularMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.setTargetAngMotorVelocity(params.velocity);\n    constraint.setMaxAngMotorForce(params.acceleration);\n    constraint.setPoweredAngMotor(true);\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.slider_disableAngularMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.setPoweredAngMotor(false);\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n\n  public_functions.conetwist_setLimit = function (params) {\n    _constraints[params.constraint].setLimit(params.z, params.y, params.x); // ZYX order\n  };\n  public_functions.conetwist_enableMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.enableMotor(true);\n    constraint.getRigidBodyA().activate();\n    constraint.getRigidBodyB().activate();\n  };\n  public_functions.conetwist_setMaxMotorImpulse = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.setMaxMotorImpulse(params.max_impulse);\n    constraint.getRigidBodyA().activate();\n    constraint.getRigidBodyB().activate();\n  };\n  public_functions.conetwist_setMotorTarget = function (params) {\n    var constraint = _constraints[params.constraint];\n\n    _quat.setX(params.x);\n    _quat.setY(params.y);\n    _quat.setZ(params.z);\n    _quat.setW(params.w);\n\n    constraint.setMotorTarget(_quat);\n\n    constraint.getRigidBodyA().activate();\n    constraint.getRigidBodyB().activate();\n  };\n  public_functions.conetwist_disableMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n    constraint.enableMotor(false);\n    constraint.getRigidBodyA().activate();\n    constraint.getRigidBodyB().activate();\n  };\n\n  public_functions.dof_setLinearLowerLimit = function (params) {\n    var constraint = _constraints[params.constraint];\n\n    _vec3_1.setX(params.x);\n    _vec3_1.setY(params.y);\n    _vec3_1.setZ(params.z);\n\n    constraint.setLinearLowerLimit(_vec3_1);\n\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.dof_setLinearUpperLimit = function (params) {\n    var constraint = _constraints[params.constraint];\n\n    _vec3_1.setX(params.x);\n    _vec3_1.setY(params.y);\n    _vec3_1.setZ(params.z);\n\n    constraint.setLinearUpperLimit(_vec3_1);\n\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.dof_setAngularLowerLimit = function (params) {\n    var constraint = _constraints[params.constraint];\n\n    _vec3_1.setX(params.x);\n    _vec3_1.setY(params.y);\n    _vec3_1.setZ(params.z);\n\n    constraint.setAngularLowerLimit(_vec3_1);\n\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.dof_setAngularUpperLimit = function (params) {\n    var constraint = _constraints[params.constraint];\n\n    _vec3_1.setX(params.x);\n    _vec3_1.setY(params.y);\n    _vec3_1.setZ(params.z);\n\n    constraint.setAngularUpperLimit(_vec3_1);\n\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.dof_enableAngularMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n\n    var motor = constraint.getRotationalLimitMotor(params.which);\n    motor.set_m_enableMotor(true);\n\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.dof_configureAngularMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n\n    var motor = constraint.getRotationalLimitMotor(params.which);\n\n    motor.set_m_loLimit(params.low_angle);\n    motor.set_m_hiLimit(params.high_angle);\n    motor.set_m_targetVelocity(params.velocity);\n    motor.set_m_maxMotorForce(params.max_force);\n\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n  public_functions.dof_disableAngularMotor = function (params) {\n    var constraint = _constraints[params.constraint];\n\n    var motor = constraint.getRotationalLimitMotor(params.which);\n    motor.set_m_enableMotor(false);\n\n    constraint.getRigidBodyA().activate();\n    if (constraint.getRigidBodyB()) {\n      constraint.getRigidBodyB().activate();\n    }\n  };\n\n  reportWorld = function () {\n    var index, object,\n      transform, origin, rotation,\n      offset = 0,\n      i = 0;\n\n    if (SUPPORT_TRANSFERABLE) {\n      if (worldreport.length < 2 + _num_objects * WORLDREPORT_ITEMSIZE) {\n        worldreport = new Float32Array(\n          2 + // message id & # objects in report\n          (Math.ceil(_num_objects / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * WORLDREPORT_ITEMSIZE // # of values needed * item size\n        );\n        worldreport[0] = MESSAGE_TYPES.WORLDREPORT;\n      }\n    }\n\n    worldreport[1] = _num_objects; // record how many objects we're reporting on\n\n    //for ( i = 0; i < worldreport[1]; i++ ) {\n    for (index in _objects) {\n      if (_objects.hasOwnProperty(index)) {\n        object = _objects[index];\n\n        // #TODO: we can't use center of mass transform when center of mass can change,\n        //        but getMotionState().getWorldTransform() screws up on objects that have been moved\n        //object.getMotionState().getWorldTransform( transform );\n        transform = object.getCenterOfMassTransform();\n\n        origin = transform.getOrigin();\n        rotation = transform.getRotation();\n\n        // add values to report\n        offset = 2 + (i++) * WORLDREPORT_ITEMSIZE;\n\n        worldreport[offset] = object.id;\n\n        worldreport[offset + 1] = origin.x();\n        worldreport[offset + 2] = origin.y();\n        worldreport[offset + 3] = origin.z();\n\n        worldreport[offset + 4] = rotation.x();\n        worldreport[offset + 5] = rotation.y();\n        worldreport[offset + 6] = rotation.z();\n        worldreport[offset + 7] = rotation.w();\n\n        _vector = object.getLinearVelocity();\n        worldreport[offset + 8] = _vector.x();\n        worldreport[offset + 9] = _vector.y();\n        worldreport[offset + 10] = _vector.z();\n\n        _vector = object.getAngularVelocity();\n        worldreport[offset + 11] = _vector.x();\n        worldreport[offset + 12] = _vector.y();\n        worldreport[offset + 13] = _vector.z();\n      }\n    }\n\n\n    if (SUPPORT_TRANSFERABLE) {\n      transferableMessage(worldreport.buffer, [worldreport.buffer]);\n    } else {\n      transferableMessage(worldreport);\n    }\n\n  };\n\n  reportCollisions = function () {\n    var i, offset,\n      dp = world.getDispatcher(),\n      num = dp.getNumManifolds(),\n      manifold, num_contacts, j, pt,\n      _collided = false;\n\n    if (SUPPORT_TRANSFERABLE) {\n      if (collisionreport.length < 2 + num * COLLISIONREPORT_ITEMSIZE) {\n        collisionreport = new Float32Array(\n          2 + // message id & # objects in report\n          (Math.ceil(_num_objects / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * COLLISIONREPORT_ITEMSIZE // # of values needed * item size\n        );\n        collisionreport[0] = MESSAGE_TYPES.COLLISIONREPORT;\n      }\n    }\n\n    collisionreport[1] = 0; // how many collisions we're reporting on\n\n    for (i = 0; i < num; i++) {\n      manifold = dp.getManifoldByIndexInternal(i);\n\n      num_contacts = manifold.getNumContacts();\n      if (num_contacts === 0) {\n        continue;\n      }\n\n      for (j = 0; j < num_contacts; j++) {\n        pt = manifold.getContactPoint(j);\n        //if ( pt.getDistance() < 0 ) {\n        offset = 2 + (collisionreport[1]++) * COLLISIONREPORT_ITEMSIZE;\n        collisionreport[offset] = _objects_ammo[manifold.getBody0()];\n        collisionreport[offset + 1] = _objects_ammo[manifold.getBody1()];\n\n        _vector = pt.get_m_normalWorldOnB();\n        collisionreport[offset + 2] = _vector.x();\n        collisionreport[offset + 3] = _vector.y();\n        collisionreport[offset + 4] = _vector.z();\n        break;\n        //}\n\n        transferableMessage(_objects_ammo);\n\n      }\n    }\n\n\n    if (SUPPORT_TRANSFERABLE) {\n      transferableMessage(collisionreport.buffer, [collisionreport.buffer]);\n    } else {\n      transferableMessage(collisionreport);\n    }\n  };\n\n  reportVehicles = function () {\n    var index, vehicle,\n      transform, origin, rotation,\n      offset = 0,\n      i = 0, j = 0;\n\n    if (SUPPORT_TRANSFERABLE) {\n      if (vehiclereport.length < 2 + _num_wheels * VEHICLEREPORT_ITEMSIZE) {\n        vehiclereport = new Float32Array(\n          2 + // message id & # objects in report\n          (Math.ceil(_num_wheels / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * VEHICLEREPORT_ITEMSIZE // # of values needed * item size\n        );\n        vehiclereport[0] = MESSAGE_TYPES.VEHICLEREPORT;\n      }\n    }\n\n    for (index in _vehicles) {\n      if (_vehicles.hasOwnProperty(index)) {\n        vehicle = _vehicles[index];\n\n        for (j = 0; j < vehicle.getNumWheels(); j++) {\n\n          //vehicle.updateWheelTransform( j, true );\n\n          //transform = vehicle.getWheelTransformWS( j );\n          transform = vehicle.getWheelInfo(j).get_m_worldTransform();\n\n          origin = transform.getOrigin();\n          rotation = transform.getRotation();\n\n          // add values to report\n          offset = 1 + (i++) * VEHICLEREPORT_ITEMSIZE;\n\n          vehiclereport[offset] = index;\n          vehiclereport[offset + 1] = j;\n\n          vehiclereport[offset + 2] = origin.x();\n          vehiclereport[offset + 3] = origin.y();\n          vehiclereport[offset + 4] = origin.z();\n\n          vehiclereport[offset + 5] = rotation.x();\n          vehiclereport[offset + 6] = rotation.y();\n          vehiclereport[offset + 7] = rotation.z();\n          vehiclereport[offset + 8] = rotation.w();\n\n        }\n\n      }\n    }\n\n    if (j !== 0) {\n      if (SUPPORT_TRANSFERABLE) {\n        transferableMessage(vehiclereport.buffer, [vehiclereport.buffer]);\n      } else {\n        transferableMessage(vehiclereport);\n      }\n    }\n  };\n\n  reportConstraints = function () {\n    var index, constraint,\n      offset_body,\n      transform, origin,\n      offset = 0,\n      i = 0;\n\n    if (SUPPORT_TRANSFERABLE) {\n      if (constraintreport.length < 2 + _num_constraints * CONSTRAINTREPORT_ITEMSIZE) {\n        constraintreport = new Float32Array(\n          2 + // message id & # objects in report\n          (Math.ceil(_num_constraints / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * CONSTRAINTREPORT_ITEMSIZE // # of values needed * item size\n        );\n        constraintreport[0] = MESSAGE_TYPES.CONSTRAINTREPORT;\n      }\n    }\n\n    for (index in _constraints) {\n      if (_constraints.hasOwnProperty(index)) {\n        constraint = _constraints[index];\n        offset_body = constraint.getRigidBodyA();\n        transform = constraint.getFrameOffsetA();\n        origin = transform.getOrigin();\n\n        // add values to report\n        offset = 1 + (i++) * CONSTRAINTREPORT_ITEMSIZE;\n\n        constraintreport[offset] = index;\n        constraintreport[offset + 1] = offset_body.id;\n        constraintreport[offset + 2] = origin.getX();\n        constraintreport[offset + 3] = origin.getY();\n        constraintreport[offset + 4] = origin.getZ();\n        constraintreport[offset + 5] = constraint.getAppliedImpulse();\n      }\n    }\n\n\n    if (i !== 0) {\n      if (SUPPORT_TRANSFERABLE) {\n        transferableMessage(constraintreport.buffer, [constraintreport.buffer]);\n      } else {\n        transferableMessage(constraintreport);\n      }\n    }\n\n  };\n\n  self.onmessage = function (event) {\n\n    if (event.data instanceof Float32Array) {\n      // transferable object\n\n      switch (event.data[0]) {\n        case MESSAGE_TYPES.WORLDREPORT:\n          worldreport = new Float32Array(event.data);\n          break;\n\n        case MESSAGE_TYPES.COLLISIONREPORT:\n          collisionreport = new Float32Array(event.data);\n          break;\n\n        case MESSAGE_TYPES.VEHICLEREPORT:\n          vehiclereport = new Float32Array(event.data);\n          break;\n\n        case MESSAGE_TYPES.CONSTRAINTREPORT:\n          constraintreport = new Float32Array(event.data);\n          break;\n      }\n\n      return;\n    }\n\n    if (event.data.cmd && public_functions[event.data.cmd]) {\n      //if ( event.data.params.id !== undefined && _objects[event.data.params.id] === undefined && event.data.cmd !== 'addObject' && event.data.cmd !== 'registerMaterial' ) return;\n      public_functions[event.data.cmd](event.data.params);\n    }\n\n  };\n\n  window.Physijs = (function () {\n    'use strict';\n\n    var SUPPORT_TRANSFERABLE,\n      _is_simulating = false,\n      _Physijs = Physijs, // used for noConflict method\n      Physijs = {}, // object assigned to window.Physijs\n      Eventable, // class to provide simple event methods\n      getObjectId, // returns a unique ID for a Physijs mesh object\n      getEulerXYZFromQuaternion, getQuatertionFromEuler,\n      convertWorldPositionToObject, // Converts a world-space position to object-space\n      addObjectChildren,\n\n      _temp1, _temp2,\n      _temp_vector3_1 = new THREE.Vector3,\n      _temp_vector3_2 = new THREE.Vector3,\n      _temp_matrix4_1 = new THREE.Matrix4,\n      _quaternion_1 = new THREE.Quaternion,\n\n      // constants\n      MESSAGE_TYPES = {\n        WORLDREPORT: 0,\n        COLLISIONREPORT: 1,\n        VEHICLEREPORT: 2,\n        CONSTRAINTREPORT: 3\n      },\n      REPORT_ITEMSIZE = 14,\n      COLLISIONREPORT_ITEMSIZE = 5,\n      VEHICLEREPORT_ITEMSIZE = 9,\n      CONSTRAINTREPORT_ITEMSIZE = 6;\n\n    Physijs.scripts = {};\n\n    Eventable = function () {\n      this._eventListeners = {};\n    };\n    Eventable.prototype.addEventListener = function (event_name, callback) {\n      if (!this._eventListeners.hasOwnProperty(event_name)) {\n        this._eventListeners[event_name] = [];\n      }\n      this._eventListeners[event_name].push(callback);\n    };\n    Eventable.prototype.removeEventListener = function (event_name, callback) {\n      var index;\n\n      if (!this._eventListeners.hasOwnProperty(event_name)) return false;\n\n      if ((index = this._eventListeners[event_name].indexOf(callback)) >= 0) {\n        this._eventListeners[event_name].splice(index, 1);\n        return true;\n      }\n\n      return false;\n    };\n    Eventable.prototype.dispatchEvent = function (event_name) {\n      var i,\n        parameters = Array.prototype.splice.call(arguments, 1);\n\n      if (this._eventListeners.hasOwnProperty(event_name)) {\n        for (i = 0; i < this._eventListeners[event_name].length; i++) {\n          this._eventListeners[event_name][i].apply(this, parameters);\n        }\n      }\n    };\n    Eventable.make = function (obj) {\n      obj.prototype.addEventListener = Eventable.prototype.addEventListener;\n      obj.prototype.removeEventListener = Eventable.prototype.removeEventListener;\n      obj.prototype.dispatchEvent = Eventable.prototype.dispatchEvent;\n    };\n\n    getObjectId = (function () {\n      var _id = 1;\n      return function () {\n        return _id++;\n      };\n    })();\n\n    getEulerXYZFromQuaternion = function (x, y, z, w) {\n      return new THREE.Vector3(\n        Math.atan2(2 * (x * w - y * z), (w * w - x * x - y * y + z * z)),\n        Math.asin(2 * (x * z + y * w)),\n        Math.atan2(2 * (z * w - x * y), (w * w + x * x - y * y - z * z))\n      );\n    };\n\n    getQuatertionFromEuler = function (x, y, z) {\n      var c1, s1, c2, s2, c3, s3, c1c2, s1s2;\n      c1 = Math.cos(y);\n      s1 = Math.sin(y);\n      c2 = Math.cos(-z);\n      s2 = Math.sin(-z);\n      c3 = Math.cos(x);\n      s3 = Math.sin(x);\n\n      c1c2 = c1 * c2;\n      s1s2 = s1 * s2;\n\n      return {\n        w: c1c2 * c3 - s1s2 * s3,\n        x: c1c2 * s3 + s1s2 * c3,\n        y: s1 * c2 * c3 + c1 * s2 * s3,\n        z: c1 * s2 * c3 - s1 * c2 * s3\n      };\n    };\n\n    convertWorldPositionToObject = function (position, object) {\n      _temp_matrix4_1.identity(); // reset temp matrix\n\n      // Set the temp matrix's rotation to the object's rotation\n      _temp_matrix4_1.identity().makeRotationFromQuaternion(object.quaternion);\n\n      // Invert rotation matrix in order to \"unrotate\" a point back to object space\n      _temp_matrix4_1.getInverse(_temp_matrix4_1);\n\n      // Yay! Temp vars!\n      _temp_vector3_1.copy(position);\n      _temp_vector3_2.copy(object.position);\n\n      // Apply the rotation\n\n      return _temp_vector3_1.sub(_temp_vector3_2).applyMatrix4(_temp_matrix4_1);\n    };\n\n\n\n    // Physijs.noConflict\n    Physijs.noConflict = function () {\n      window.Physijs = _Physijs;\n      return Physijs;\n    };\n\n\n    // Physijs.createMaterial\n    Physijs.createMaterial = function (material, friction, restitution) {\n      var physijs_material = function () { };\n      physijs_material.prototype = material;\n      physijs_material = new physijs_material;\n\n      physijs_material._physijs = {\n        id: material.id,\n        friction: friction === undefined ? .8 : friction,\n        restitution: restitution === undefined ? .2 : restitution\n      };\n\n      return physijs_material;\n    };\n\n\n    // Constraints\n    Physijs.PointConstraint = function (objecta, objectb, position) {\n      if (position === undefined) {\n        position = objectb;\n        objectb = undefined;\n      }\n\n      this.type = 'point';\n      this.appliedImpulse = 0;\n      this.id = getObjectId();\n      this.objecta = objecta._physijs.id;\n      this.positiona = convertWorldPositionToObject(position, objecta).clone();\n\n      if (objectb) {\n        this.objectb = objectb._physijs.id;\n        this.positionb = convertWorldPositionToObject(position, objectb).clone();\n      }\n    };\n    Physijs.PointConstraint.prototype.getDefinition = function () {\n      return {\n        type: this.type,\n        id: this.id,\n        objecta: this.objecta,\n        objectb: this.objectb,\n        positiona: this.positiona,\n        positionb: this.positionb\n      };\n    };\n\n    Physijs.HingeConstraint = function (objecta, objectb, position, axis) {\n      if (axis === undefined) {\n        axis = position;\n        position = objectb;\n        objectb = undefined;\n      }\n\n      this.type = 'hinge';\n      this.appliedImpulse = 0;\n      this.id = getObjectId();\n      this.scene = objecta.parent;\n      this.objecta = objecta._physijs.id;\n      this.positiona = convertWorldPositionToObject(position, objecta).clone();\n      this.position = position.clone();\n      this.axis = axis;\n\n      if (objectb) {\n        this.objectb = objectb._physijs.id;\n        this.positionb = convertWorldPositionToObject(position, objectb).clone();\n      }\n    };\n    Physijs.HingeConstraint.prototype.getDefinition = function () {\n      return {\n        type: this.type,\n        id: this.id,\n        objecta: this.objecta,\n        objectb: this.objectb,\n        positiona: this.positiona,\n        positionb: this.positionb,\n        axis: this.axis\n      };\n    };\n    /*\n     * low = minimum angle in radians\n     * high = maximum angle in radians\n     * bias_factor = applied as a factor to constraint error\n     * relaxation_factor = controls bounce (0.0 == no bounce)\n     */\n    Physijs.HingeConstraint.prototype.setLimits = function (low, high, bias_factor, relaxation_factor) {\n      this.scene.execute('hinge_setLimits', { constraint: this.id, low: low, high: high, bias_factor: bias_factor, relaxation_factor: relaxation_factor });\n    };\n    Physijs.HingeConstraint.prototype.enableAngularMotor = function (velocity, acceleration) {\n      this.scene.execute('hinge_enableAngularMotor', { constraint: this.id, velocity: velocity, acceleration: acceleration });\n    };\n    Physijs.HingeConstraint.prototype.disableMotor = function (velocity, acceleration) {\n      this.scene.execute('hinge_disableMotor', { constraint: this.id });\n    };\n\n    Physijs.SliderConstraint = function (objecta, objectb, position, axis) {\n      if (axis === undefined) {\n        axis = position;\n        position = objectb;\n        objectb = undefined;\n      }\n\n      this.type = 'slider';\n      this.appliedImpulse = 0;\n      this.id = getObjectId();\n      this.scene = objecta.parent;\n      this.objecta = objecta._physijs.id;\n      this.positiona = convertWorldPositionToObject(position, objecta).clone();\n      this.axis = axis;\n\n      if (objectb) {\n        this.objectb = objectb._physijs.id;\n        this.positionb = convertWorldPositionToObject(position, objectb).clone();\n      }\n    };\n    Physijs.SliderConstraint.prototype.getDefinition = function () {\n      return {\n        type: this.type,\n        id: this.id,\n        objecta: this.objecta,\n        objectb: this.objectb,\n        positiona: this.positiona,\n        positionb: this.positionb,\n        axis: this.axis\n      };\n    };\n    Physijs.SliderConstraint.prototype.setLimits = function (lin_lower, lin_upper, ang_lower, ang_upper) {\n      this.scene.execute('slider_setLimits', { constraint: this.id, lin_lower: lin_lower, lin_upper: lin_upper, ang_lower: ang_lower, ang_upper: ang_upper });\n    };\n    Physijs.SliderConstraint.prototype.setRestitution = function (linear, angular) {\n      this.scene.execute(\n        'slider_setRestitution',\n        {\n          constraint: this.id,\n          linear: linear,\n          angular: angular\n        }\n      );\n    };\n    Physijs.SliderConstraint.prototype.enableLinearMotor = function (velocity, acceleration) {\n      this.scene.execute('slider_enableLinearMotor', { constraint: this.id, velocity: velocity, acceleration: acceleration });\n    };\n    Physijs.SliderConstraint.prototype.disableLinearMotor = function () {\n      this.scene.execute('slider_disableLinearMotor', { constraint: this.id });\n    };\n    Physijs.SliderConstraint.prototype.enableAngularMotor = function (velocity, acceleration) {\n      this.scene.execute('slider_enableAngularMotor', { constraint: this.id, velocity: velocity, acceleration: acceleration });\n    };\n    Physijs.SliderConstraint.prototype.disableAngularMotor = function () {\n      this.scene.execute('slider_disableAngularMotor', { constraint: this.id });\n    };\n\n    Physijs.ConeTwistConstraint = function (objecta, objectb, position) {\n      if (position === undefined) {\n        throw 'Both objects must be defined in a ConeTwistConstraint.';\n      }\n      this.type = 'conetwist';\n      this.appliedImpulse = 0;\n      this.id = getObjectId();\n      this.scene = objecta.parent;\n      this.objecta = objecta._physijs.id;\n      this.positiona = convertWorldPositionToObject(position, objecta).clone();\n      this.objectb = objectb._physijs.id;\n      this.positionb = convertWorldPositionToObject(position, objectb).clone();\n      this.axisa = { x: objecta.rotation.x, y: objecta.rotation.y, z: objecta.rotation.z };\n      this.axisb = { x: objectb.rotation.x, y: objectb.rotation.y, z: objectb.rotation.z };\n    };\n    Physijs.ConeTwistConstraint.prototype.getDefinition = function () {\n      return {\n        type: this.type,\n        id: this.id,\n        objecta: this.objecta,\n        objectb: this.objectb,\n        positiona: this.positiona,\n        positionb: this.positionb,\n        axisa: this.axisa,\n        axisb: this.axisb\n      };\n    };\n    Physijs.ConeTwistConstraint.prototype.setLimit = function (x, y, z) {\n      this.scene.execute('conetwist_setLimit', { constraint: this.id, x: x, y: y, z: z });\n    };\n    Physijs.ConeTwistConstraint.prototype.enableMotor = function () {\n      this.scene.execute('conetwist_enableMotor', { constraint: this.id });\n    };\n    Physijs.ConeTwistConstraint.prototype.setMaxMotorImpulse = function (max_impulse) {\n      this.scene.execute('conetwist_setMaxMotorImpulse', { constraint: this.id, max_impulse: max_impulse });\n    };\n    Physijs.ConeTwistConstraint.prototype.setMotorTarget = function (target) {\n      if (target instanceof THREE.Vector3) {\n        target = new THREE.Quaternion().setFromEuler(new THREE.Euler(target.x, target.y, target.z));\n      } else if (target instanceof THREE.Euler) {\n        target = new THREE.Quaternion().setFromEuler(target);\n      } else if (target instanceof THREE.Matrix4) {\n        target = new THREE.Quaternion().setFromRotationMatrix(target);\n      }\n      this.scene.execute('conetwist_setMotorTarget', { constraint: this.id, x: target.x, y: target.y, z: target.z, w: target.w });\n    };\n    Physijs.ConeTwistConstraint.prototype.disableMotor = function () {\n      this.scene.execute('conetwist_disableMotor', { constraint: this.id });\n    };\n\n    Physijs.DOFConstraint = function (objecta, objectb, position) {\n      if (position === undefined) {\n        position = objectb;\n        objectb = undefined;\n      }\n      this.type = 'dof';\n      this.appliedImpulse = 0;\n      this.id = getObjectId();\n      this.scene = objecta.parent;\n      this.objecta = objecta._physijs.id;\n      this.positiona = convertWorldPositionToObject(position, objecta).clone();\n      this.axisa = { x: objecta.rotation.x, y: objecta.rotation.y, z: objecta.rotation.z };\n\n      if (objectb) {\n        this.objectb = objectb._physijs.id;\n        this.positionb = convertWorldPositionToObject(position, objectb).clone();\n        this.axisb = { x: objectb.rotation.x, y: objectb.rotation.y, z: objectb.rotation.z };\n      }\n    };\n    Physijs.DOFConstraint.prototype.getDefinition = function () {\n      return {\n        type: this.type,\n        id: this.id,\n        objecta: this.objecta,\n        objectb: this.objectb,\n        positiona: this.positiona,\n        positionb: this.positionb,\n        axisa: this.axisa,\n        axisb: this.axisb\n      };\n    };\n    Physijs.DOFConstraint.prototype.setLinearLowerLimit = function (limit) {\n      this.scene.execute('dof_setLinearLowerLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z });\n    };\n    Physijs.DOFConstraint.prototype.setLinearUpperLimit = function (limit) {\n      this.scene.execute('dof_setLinearUpperLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z });\n    };\n    Physijs.DOFConstraint.prototype.setAngularLowerLimit = function (limit) {\n      this.scene.execute('dof_setAngularLowerLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z });\n    };\n    Physijs.DOFConstraint.prototype.setAngularUpperLimit = function (limit) {\n      this.scene.execute('dof_setAngularUpperLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z });\n    };\n    Physijs.DOFConstraint.prototype.enableAngularMotor = function (which) {\n      this.scene.execute('dof_enableAngularMotor', { constraint: this.id, which: which });\n    };\n    Physijs.DOFConstraint.prototype.configureAngularMotor = function (which, low_angle, high_angle, velocity, max_force) {\n      this.scene.execute('dof_configureAngularMotor', { constraint: this.id, which: which, low_angle: low_angle, high_angle: high_angle, velocity: velocity, max_force: max_force });\n    };\n    Physijs.DOFConstraint.prototype.disableAngularMotor = function (which) {\n      this.scene.execute('dof_disableAngularMotor', { constraint: this.id, which: which });\n    };\n\n    // Physijs.Scene\n    Physijs.Scene = function (params) {\n      var self = this;\n\n      Eventable.call(this);\n      THREE.Scene.call(this);\n\n      this._worker = new Worker(Physijs.scripts.worker || 'physijs_worker.js');\n      this._worker.transferableMessage = this._worker.webkitPostMessage || this._worker.postMessage;\n      this._materials_ref_counts = {};\n      this._objects = {};\n      this._vehicles = {};\n      this._constraints = {};\n\n      var ab = new ArrayBuffer(1);\n      this._worker.transferableMessage(ab, [ab]);\n      SUPPORT_TRANSFERABLE = (ab.byteLength === 0);\n\n      this._worker.onmessage = function (event) {\n        var _temp,\n          data = event.data;\n\n        if (data instanceof ArrayBuffer && data.byteLength !== 1) { // byteLength === 1 is the worker making a SUPPORT_TRANSFERABLE test\n          data = new Float32Array(data);\n        }\n\n        if (data instanceof Float32Array) {\n\n          // transferable object\n          switch (data[0]) {\n            case MESSAGE_TYPES.WORLDREPORT:\n              self._updateScene(data);\n              break;\n\n            case MESSAGE_TYPES.COLLISIONREPORT:\n              self._updateCollisions(data);\n              break;\n\n            case MESSAGE_TYPES.VEHICLEREPORT:\n              self._updateVehicles(data);\n              break;\n\n            case MESSAGE_TYPES.CONSTRAINTREPORT:\n              self._updateConstraints(data);\n              break;\n          }\n\n        } else {\n\n          if (data.cmd) {\n\n            // non-transferable object\n            switch (data.cmd) {\n              case 'objectReady':\n                _temp = data.params;\n                if (self._objects[_temp]) {\n                  self._objects[_temp].dispatchEvent('ready');\n                }\n                break;\n\n              case 'worldReady':\n                self.dispatchEvent('ready');\n                break;\n\n              case 'vehicle':\n                window.test = data;\n                break;\n\n              default:\n                // Do nothing, just show the message\n                console.debug('Received: ' + data.cmd);\n                console.dir(data.params);\n                break;\n            }\n\n          } else {\n\n            switch (data[0]) {\n              case MESSAGE_TYPES.WORLDREPORT:\n                self._updateScene(data);\n                break;\n\n              case MESSAGE_TYPES.COLLISIONREPORT:\n                self._updateCollisions(data);\n                break;\n\n              case MESSAGE_TYPES.VEHICLEREPORT:\n                self._updateVehicles(data);\n                break;\n\n              case MESSAGE_TYPES.CONSTRAINTREPORT:\n                self._updateConstraints(data);\n                break;\n            }\n\n          }\n\n        }\n      };\n\n\n      params = params || {};\n      params.ammo = Physijs.scripts.ammo || 'ammo.js';\n      params.fixedTimeStep = params.fixedTimeStep || 1 / 60;\n      params.rateLimit = params.rateLimit || true;\n      this.execute('init', params);\n    };\n    Physijs.Scene.prototype = new THREE.Scene;\n    Physijs.Scene.prototype.constructor = Physijs.Scene;\n    Eventable.make(Physijs.Scene);\n\n    Physijs.Scene.prototype._updateScene = function (data) {\n      var num_objects = data[1],\n        object,\n        i, offset;\n\n      for (i = 0; i < num_objects; i++) {\n        offset = 2 + i * REPORT_ITEMSIZE;\n        object = this._objects[data[offset]];\n\n        if (object === undefined) {\n          continue;\n        }\n\n        if (object.__dirtyPosition === false) {\n          object.position.set(\n            data[offset + 1],\n            data[offset + 2],\n            data[offset + 3]\n          );\n        }\n\n        if (object.__dirtyRotation === false) {\n          object.quaternion.set(\n            data[offset + 4],\n            data[offset + 5],\n            data[offset + 6],\n            data[offset + 7]\n          );\n        }\n\n        object._physijs.linearVelocity.set(\n          data[offset + 8],\n          data[offset + 9],\n          data[offset + 10]\n        );\n\n        object._physijs.angularVelocity.set(\n          data[offset + 11],\n          data[offset + 12],\n          data[offset + 13]\n        );\n\n      }\n\n      if (SUPPORT_TRANSFERABLE) {\n        // Give the typed array back to the worker\n        this._worker.transferableMessage(data.buffer, [data.buffer]);\n      }\n\n      _is_simulating = false;\n      this.dispatchEvent('update');\n    };\n\n    Physijs.Scene.prototype._updateVehicles = function (data) {\n      var vehicle, wheel,\n        i, offset;\n\n      for (i = 0; i < (data.length - 1) / VEHICLEREPORT_ITEMSIZE; i++) {\n        offset = 1 + i * VEHICLEREPORT_ITEMSIZE;\n        vehicle = this._vehicles[data[offset]];\n\n        if (vehicle === undefined) {\n          continue;\n        }\n\n        wheel = vehicle.wheels[data[offset + 1]];\n\n        wheel.position.set(\n          data[offset + 2],\n          data[offset + 3],\n          data[offset + 4]\n        );\n\n        wheel.quaternion.set(\n          data[offset + 5],\n          data[offset + 6],\n          data[offset + 7],\n          data[offset + 8]\n        );\n      }\n\n      if (SUPPORT_TRANSFERABLE) {\n        // Give the typed array back to the worker\n        this._worker.transferableMessage(data.buffer, [data.buffer]);\n      }\n    };\n\n    Physijs.Scene.prototype._updateConstraints = function (data) {\n      var constraint, object,\n        i, offset;\n\n      for (i = 0; i < (data.length - 1) / CONSTRAINTREPORT_ITEMSIZE; i++) {\n        offset = 1 + i * CONSTRAINTREPORT_ITEMSIZE;\n        constraint = this._constraints[data[offset]];\n        object = this._objects[data[offset + 1]];\n\n        if (constraint === undefined || object === undefined) {\n          continue;\n        }\n\n        _temp_vector3_1.set(\n          data[offset + 2],\n          data[offset + 3],\n          data[offset + 4]\n        );\n        _temp_matrix4_1.extractRotation(object.matrix);\n        _temp_vector3_1.applyMatrix4(_temp_matrix4_1);\n\n        constraint.positiona.addVectors(object.position, _temp_vector3_1);\n        constraint.appliedImpulse = data[offset + 5];\n      }\n\n      if (SUPPORT_TRANSFERABLE) {\n        // Give the typed array back to the worker\n        this._worker.transferableMessage(data.buffer, [data.buffer]);\n      }\n    };\n\n    Physijs.Scene.prototype._updateCollisions = function (data) {\n      /**\n       * #TODO\n       * This is probably the worst way ever to handle collisions. The inherent evilness is a residual\n       * effect from the previous version's evilness which mutated when switching to transferable objects.\n       *\n       * If you feel inclined to make this better, please do so.\n       */\n\n      var i, j, offset, object, object2, id1, id2,\n        collisions = {}, normal_offsets = {};\n\n      // Build collision manifest\n      for (i = 0; i < data[1]; i++) {\n        offset = 2 + i * COLLISIONREPORT_ITEMSIZE;\n        object = data[offset];\n        object2 = data[offset + 1];\n\n        normal_offsets[object + '-' + object2] = offset + 2;\n        normal_offsets[object2 + '-' + object] = -1 * (offset + 2);\n\n        // Register collisions for both the object colliding and the object being collided with\n        if (!collisions[object]) collisions[object] = [];\n        collisions[object].push(object2);\n\n        if (!collisions[object2]) collisions[object2] = [];\n        collisions[object2].push(object);\n      }\n\n      // Deal with collisions\n      for (id1 in this._objects) {\n        if (!this._objects.hasOwnProperty(id1)) continue;\n        object = this._objects[id1];\n\n        // If object touches anything, ...\n        if (collisions[id1]) {\n\n          // Clean up touches array\n          for (j = 0; j < object._physijs.touches.length; j++) {\n            if (collisions[id1].indexOf(object._physijs.touches[j]) === -1) {\n              object._physijs.touches.splice(j--, 1);\n            }\n          }\n\n          // Handle each colliding object\n          for (j = 0; j < collisions[id1].length; j++) {\n            id2 = collisions[id1][j];\n            object2 = this._objects[id2];\n\n            if (object2) {\n              // If object was not already touching object2, notify object\n              if (object._physijs.touches.indexOf(id2) === -1) {\n                object._physijs.touches.push(id2);\n\n                _temp_vector3_1.subVectors(object.getLinearVelocity(), object2.getLinearVelocity());\n                _temp1 = _temp_vector3_1.clone();\n\n                _temp_vector3_1.subVectors(object.getAngularVelocity(), object2.getAngularVelocity());\n                _temp2 = _temp_vector3_1.clone();\n\n                var normal_offset = normal_offsets[object._physijs.id + '-' + object2._physijs.id];\n                if (normal_offset > 0) {\n                  _temp_vector3_1.set(\n                    -data[normal_offset],\n                    -data[normal_offset + 1],\n                    -data[normal_offset + 2]\n                  );\n                } else {\n                  normal_offset *= -1;\n                  _temp_vector3_1.set(\n                    data[normal_offset],\n                    data[normal_offset + 1],\n                    data[normal_offset + 2]\n                  );\n                }\n\n                object.dispatchEvent('collision', object2, _temp1, _temp2, _temp_vector3_1);\n              }\n            }\n          }\n\n        } else {\n\n          // not touching other objects\n          object._physijs.touches.length = 0;\n\n        }\n\n      }\n\n      this.collisions = collisions;\n\n      if (SUPPORT_TRANSFERABLE) {\n        // Give the typed array back to the worker\n        this._worker.transferableMessage(data.buffer, [data.buffer]);\n      }\n    };\n\n    Physijs.Scene.prototype.addConstraint = function (constraint, show_marker) {\n      this._constraints[constraint.id] = constraint;\n      this.execute('addConstraint', constraint.getDefinition());\n\n      if (show_marker) {\n        var marker;\n\n        switch (constraint.type) {\n          case 'point':\n            marker = new THREE.Mesh(\n              new THREE.SphereGeometry(1.5),\n              new THREE.MeshNormalMaterial\n            );\n            marker.position.copy(constraint.positiona);\n            this._objects[constraint.objecta].add(marker);\n            break;\n\n          case 'hinge':\n            marker = new THREE.Mesh(\n              new THREE.SphereGeometry(1.5),\n              new THREE.MeshNormalMaterial\n            );\n            marker.position.copy(constraint.positiona);\n            this._objects[constraint.objecta].add(marker);\n            break;\n\n          case 'slider':\n            marker = new THREE.Mesh(\n              new THREE.BoxGeometry(10, 1, 1),\n              new THREE.MeshNormalMaterial\n            );\n            marker.position.copy(constraint.positiona);\n            // This rotation isn't right if all three axis are non-0 values\n            // TODO: change marker's rotation order to ZYX\n            marker.rotation.set(\n              constraint.axis.y, // yes, y and\n              constraint.axis.x, // x axis are swapped\n              constraint.axis.z\n            );\n            this._objects[constraint.objecta].add(marker);\n            break;\n\n          case 'conetwist':\n            marker = new THREE.Mesh(\n              new THREE.SphereGeometry(1.5),\n              new THREE.MeshNormalMaterial\n            );\n            marker.position.copy(constraint.positiona);\n            this._objects[constraint.objecta].add(marker);\n            break;\n\n          case 'dof':\n            marker = new THREE.Mesh(\n              new THREE.SphereGeometry(1.5),\n              new THREE.MeshNormalMaterial\n            );\n            marker.position.copy(constraint.positiona);\n            this._objects[constraint.objecta].add(marker);\n            break;\n        }\n      }\n\n      return constraint;\n    };\n\n    Physijs.Scene.prototype.onSimulationResume = function () {\n      this.execute('onSimulationResume', {});\n    };\n\n    Physijs.Scene.prototype.removeConstraint = function (constraint) {\n      if (this._constraints[constraint.id] !== undefined) {\n        this.execute('removeConstraint', { id: constraint.id });\n        delete this._constraints[constraint.id];\n      }\n    };\n\n    Physijs.Scene.prototype.execute = function (cmd, params) {\n      this._worker.postMessage({ cmd: cmd, params: params });\n    };\n\n    addObjectChildren = function (parent, object) {\n      var i;\n\n      for (i = 0; i < object.children.length; i++) {\n        if (object.children[i]._physijs) {\n          object.children[i].updateMatrix();\n          object.children[i].updateMatrixWorld();\n\n          _temp_vector3_1.setFromMatrixPosition(object.children[i].matrixWorld);\n          _quaternion_1.setFromRotationMatrix(object.children[i].matrixWorld);\n\n          object.children[i]._physijs.position_offset = {\n            x: _temp_vector3_1.x,\n            y: _temp_vector3_1.y,\n            z: _temp_vector3_1.z\n          };\n\n          object.children[i]._physijs.rotation = {\n            x: _quaternion_1.x,\n            y: _quaternion_1.y,\n            z: _quaternion_1.z,\n            w: _quaternion_1.w\n          };\n\n          parent._physijs.children.push(object.children[i]._physijs);\n        }\n\n        addObjectChildren(parent, object.children[i]);\n      }\n    };\n\n    Physijs.Scene.prototype.add = function (object) {\n      THREE.Mesh.prototype.add.call(this, object);\n\n      if (object._physijs) {\n\n        object.world = this;\n\n        if (object instanceof Physijs.Vehicle) {\n\n          this.add(object.mesh);\n          this._vehicles[object._physijs.id] = object;\n          this.execute('addVehicle', object._physijs);\n\n        } else {\n\n          object.__dirtyPosition = false;\n          object.__dirtyRotation = false;\n          this._objects[object._physijs.id] = object;\n\n          if (object.children.length) {\n            object._physijs.children = [];\n            addObjectChildren(object, object);\n          }\n\n          if (object.material._physijs) {\n            if (!this._materials_ref_counts.hasOwnProperty(object.material._physijs.id)) {\n              this.execute('registerMaterial', object.material._physijs);\n              object._physijs.materialId = object.material._physijs.id;\n              this._materials_ref_counts[object.material._physijs.id] = 1;\n            } else {\n              this._materials_ref_counts[object.material._physijs.id]++;\n            }\n          }\n\n          // Object starting position + rotation\n          object._physijs.position = { x: object.position.x, y: object.position.y, z: object.position.z };\n          object._physijs.rotation = { x: object.quaternion.x, y: object.quaternion.y, z: object.quaternion.z, w: object.quaternion.w };\n\n          // Check for scaling\n          var mass_scaling = new THREE.Vector3(1, 1, 1);\n          if (object._physijs.width) {\n            object._physijs.width *= object.scale.x;\n          }\n          if (object._physijs.height) {\n            object._physijs.height *= object.scale.y;\n          }\n          if (object._physijs.depth) {\n            object._physijs.depth *= object.scale.z;\n          }\n\n          this.execute('addObject', object._physijs);\n\n        }\n      }\n    };\n\n    Physijs.Scene.prototype.remove = function (object) {\n      if (object instanceof Physijs.Vehicle) {\n        this.execute('removeVehicle', { id: object._physijs.id });\n        while (object.wheels.length) {\n          this.remove(object.wheels.pop());\n        }\n        this.remove(object.mesh);\n        delete this._vehicles[object._physijs.id];\n      } else {\n        THREE.Mesh.prototype.remove.call(this, object);\n        if (object._physijs) {\n          delete this._objects[object._physijs.id];\n          this.execute('removeObject', { id: object._physijs.id });\n        }\n      }\n      if (object.material && object.material._physijs && this._materials_ref_counts.hasOwnProperty(object.material._physijs.id)) {\n        this._materials_ref_counts[object.material._physijs.id]--;\n        if (this._materials_ref_counts[object.material._physijs.id] == 0) {\n          this.execute('unRegisterMaterial', object.material._physijs);\n          delete this._materials_ref_counts[object.material._physijs.id];\n        }\n      }\n    };\n\n    Physijs.Scene.prototype.setFixedTimeStep = function (fixedTimeStep) {\n      if (fixedTimeStep) {\n        this.execute('setFixedTimeStep', fixedTimeStep);\n      }\n    };\n\n    Physijs.Scene.prototype.setGravity = function (gravity) {\n      if (gravity) {\n        this.execute('setGravity', gravity);\n      }\n    };\n\n    Physijs.Scene.prototype.simulate = function (timeStep, maxSubSteps) {\n      var object_id, object, update;\n\n      if (_is_simulating) {\n        return false;\n      }\n\n      _is_simulating = true;\n\n      for (object_id in this._objects) {\n        if (!this._objects.hasOwnProperty(object_id)) continue;\n\n        object = this._objects[object_id];\n\n        if (object.__dirtyPosition || object.__dirtyRotation) {\n          update = { id: object._physijs.id };\n\n          if (object.__dirtyPosition) {\n            update.pos = { x: object.position.x, y: object.position.y, z: object.position.z };\n            object.__dirtyPosition = false;\n          }\n\n          if (object.__dirtyRotation) {\n            update.quat = { x: object.quaternion.x, y: object.quaternion.y, z: object.quaternion.z, w: object.quaternion.w };\n            object.__dirtyRotation = false;\n          }\n\n          this.execute('updateTransform', update);\n        }\n      }\n\n      this.execute('simulate', { timeStep: timeStep, maxSubSteps: maxSubSteps });\n\n      return true;\n    };\n\n\n    // Phsijs.Mesh\n    Physijs.Mesh = function (geometry, material, mass) {\n      var index;\n\n      if (!geometry) {\n        return;\n      }\n\n      Eventable.call(this);\n      THREE.Mesh.call(this, geometry, material);\n\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      this._physijs = {\n        type: null,\n        id: getObjectId(),\n        mass: mass || 0,\n        touches: [],\n        linearVelocity: new THREE.Vector3,\n        angularVelocity: new THREE.Vector3\n      };\n    };\n    Physijs.Mesh.prototype = new THREE.Mesh;\n    Physijs.Mesh.prototype.constructor = Physijs.Mesh;\n    Eventable.make(Physijs.Mesh);\n\n    // Physijs.Mesh.mass\n    Physijs.Mesh.prototype.__defineGetter__('mass', function () {\n      return this._physijs.mass;\n    });\n    Physijs.Mesh.prototype.__defineSetter__('mass', function (mass) {\n      this._physijs.mass = mass;\n      if (this.world) {\n        this.world.execute('updateMass', { id: this._physijs.id, mass: mass });\n      }\n    });\n\n    // Physijs.Mesh.applyCentralImpulse\n    Physijs.Mesh.prototype.applyCentralImpulse = function (force) {\n      if (this.world) {\n        this.world.execute('applyCentralImpulse', { id: this._physijs.id, x: force.x, y: force.y, z: force.z });\n      }\n    };\n\n    // Physijs.Mesh.applyImpulse\n    Physijs.Mesh.prototype.applyImpulse = function (force, offset) {\n      if (this.world) {\n        this.world.execute('applyImpulse', { id: this._physijs.id, impulse_x: force.x, impulse_y: force.y, impulse_z: force.z, x: offset.x, y: offset.y, z: offset.z });\n      }\n    };\n\n    // Physijs.Mesh.applyTorque\n    Physijs.Mesh.prototype.applyTorque = function (force) {\n      if (this.world) {\n        this.world.execute('applyTorque', { id: this._physijs.id, torque_x: force.x, torque_y: force.y, torque_z: force.z });\n      }\n    };\n\n    // Physijs.Mesh.applyCentralForce\n    Physijs.Mesh.prototype.applyCentralForce = function (force) {\n      if (this.world) {\n        this.world.execute('applyCentralForce', { id: this._physijs.id, x: force.x, y: force.y, z: force.z });\n      }\n    };\n\n    // Physijs.Mesh.applyForce\n    Physijs.Mesh.prototype.applyForce = function (force, offset) {\n      if (this.world) {\n        this.world.execute('applyForce', { id: this._physijs.id, force_x: force.x, force_y: force.y, force_z: force.z, x: offset.x, y: offset.y, z: offset.z });\n      }\n    };\n\n    // Physijs.Mesh.getAngularVelocity\n    Physijs.Mesh.prototype.getAngularVelocity = function () {\n      return this._physijs.angularVelocity;\n    };\n\n    // Physijs.Mesh.setAngularVelocity\n    Physijs.Mesh.prototype.setAngularVelocity = function (velocity) {\n      if (this.world) {\n        this.world.execute('setAngularVelocity', { id: this._physijs.id, x: velocity.x, y: velocity.y, z: velocity.z });\n      }\n    };\n\n    // Physijs.Mesh.getLinearVelocity\n    Physijs.Mesh.prototype.getLinearVelocity = function () {\n      return this._physijs.linearVelocity;\n    };\n\n    // Physijs.Mesh.setLinearVelocity\n    Physijs.Mesh.prototype.setLinearVelocity = function (velocity) {\n      if (this.world) {\n        this.world.execute('setLinearVelocity', { id: this._physijs.id, x: velocity.x, y: velocity.y, z: velocity.z });\n      }\n    };\n\n    // Physijs.Mesh.setAngularFactor\n    Physijs.Mesh.prototype.setAngularFactor = function (factor) {\n      if (this.world) {\n        this.world.execute('setAngularFactor', { id: this._physijs.id, x: factor.x, y: factor.y, z: factor.z });\n      }\n    };\n\n    // Physijs.Mesh.setLinearFactor\n    Physijs.Mesh.prototype.setLinearFactor = function (factor) {\n      if (this.world) {\n        this.world.execute('setLinearFactor', { id: this._physijs.id, x: factor.x, y: factor.y, z: factor.z });\n      }\n    };\n\n    // Physijs.Mesh.setDamping\n    Physijs.Mesh.prototype.setDamping = function (linear, angular) {\n      if (this.world) {\n        this.world.execute('setDamping', { id: this._physijs.id, linear: linear, angular: angular });\n      }\n    };\n\n    // Physijs.Mesh.setCcdMotionThreshold\n    Physijs.Mesh.prototype.setCcdMotionThreshold = function (threshold) {\n      if (this.world) {\n        this.world.execute('setCcdMotionThreshold', { id: this._physijs.id, threshold: threshold });\n      }\n    };\n\n    // Physijs.Mesh.setCcdSweptSphereRadius\n    Physijs.Mesh.prototype.setCcdSweptSphereRadius = function (radius) {\n      if (this.world) {\n        this.world.execute('setCcdSweptSphereRadius', { id: this._physijs.id, radius: radius });\n      }\n    };\n\n\n    // Physijs.PlaneMesh\n    Physijs.PlaneMesh = function (geometry, material, mass) {\n      var width, height;\n\n      Physijs.Mesh.call(this, geometry, material, mass);\n\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n\n      this._physijs.type = 'plane';\n      this._physijs.normal = geometry.faces[0].normal.clone();\n      this._physijs.mass = (typeof mass === 'undefined') ? width * height : mass;\n    };\n    Physijs.PlaneMesh.prototype = new Physijs.Mesh;\n    Physijs.PlaneMesh.prototype.constructor = Physijs.PlaneMesh;\n\n    // Physijs.HeightfieldMesh\n    Physijs.HeightfieldMesh = function (geometry, material, mass, xdiv, ydiv) {\n      Physijs.Mesh.call(this, geometry, material, mass);\n\n      this._physijs.type = 'heightfield';\n      this._physijs.xsize = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      this._physijs.ysize = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      this._physijs.xpts = (typeof xdiv === 'undefined') ? Math.sqrt(geometry.vertices.length) : xdiv + 1;\n      this._physijs.ypts = (typeof ydiv === 'undefined') ? Math.sqrt(geometry.vertices.length) : ydiv + 1;\n      // note - this assumes our plane geometry is square, unless we pass in specific xdiv and ydiv\n      this._physijs.absMaxHeight = Math.max(geometry.boundingBox.max.z, Math.abs(geometry.boundingBox.min.z));\n\n      var points = [];\n\n      var a, b;\n      for (var i = 0; i < geometry.vertices.length; i++) {\n\n        a = i % this._physijs.xpts;\n        b = Math.round((i / this._physijs.xpts) - ((i % this._physijs.xpts) / this._physijs.xpts));\n        points[i] = geometry.vertices[a + ((this._physijs.ypts - b - 1) * this._physijs.ypts)].z;\n\n        //points[i] = geometry.vertices[i];\n      }\n\n      this._physijs.points = points;\n    };\n    Physijs.HeightfieldMesh.prototype = new Physijs.Mesh;\n    Physijs.HeightfieldMesh.prototype.constructor = Physijs.HeightfieldMesh;\n\n    // Physijs.BoxMesh\n    Physijs.BoxMesh = function (geometry, material, mass) {\n      var width, height, depth;\n\n      Physijs.Mesh.call(this, geometry, material, mass);\n\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n      this._physijs.type = 'box';\n      this._physijs.width = width;\n      this._physijs.height = height;\n      this._physijs.depth = depth;\n      this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n    };\n    Physijs.BoxMesh.prototype = new Physijs.Mesh;\n    Physijs.BoxMesh.prototype.constructor = Physijs.BoxMesh;\n\n\n    // Physijs.SphereMesh\n    Physijs.SphereMesh = function (geometry, material, mass) {\n      Physijs.Mesh.call(this, geometry, material, mass);\n\n      if (!geometry.boundingSphere) {\n        geometry.computeBoundingSphere();\n      }\n\n      this._physijs.type = 'sphere';\n      this._physijs.radius = geometry.boundingSphere.radius;\n      this._physijs.mass = (typeof mass === 'undefined') ? (4 / 3) * Math.PI * Math.pow(this._physijs.radius, 3) : mass;\n    };\n    Physijs.SphereMesh.prototype = new Physijs.Mesh;\n    Physijs.SphereMesh.prototype.constructor = Physijs.SphereMesh;\n\n\n    // Physijs.CylinderMesh\n    Physijs.CylinderMesh = function (geometry, material, mass) {\n      var width, height, depth;\n\n      Physijs.Mesh.call(this, geometry, material, mass);\n\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n      this._physijs.type = 'cylinder';\n      this._physijs.width = width;\n      this._physijs.height = height;\n      this._physijs.depth = depth;\n      this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n    };\n    Physijs.CylinderMesh.prototype = new Physijs.Mesh;\n    Physijs.CylinderMesh.prototype.constructor = Physijs.CylinderMesh;\n\n\n    // Physijs.CapsuleMesh\n    Physijs.CapsuleMesh = function (geometry, material, mass) {\n      var width, height, depth;\n\n      Physijs.Mesh.call(this, geometry, material, mass);\n\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n      this._physijs.type = 'capsule';\n      this._physijs.radius = Math.max(width / 2, depth / 2);\n      this._physijs.height = height;\n      this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n    };\n    Physijs.CapsuleMesh.prototype = new Physijs.Mesh;\n    Physijs.CapsuleMesh.prototype.constructor = Physijs.CapsuleMesh;\n\n\n    // Physijs.ConeMesh\n    Physijs.ConeMesh = function (geometry, material, mass) {\n      var width, height, depth;\n\n      Physijs.Mesh.call(this, geometry, material, mass);\n\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n\n      this._physijs.type = 'cone';\n      this._physijs.radius = width / 2;\n      this._physijs.height = height;\n      this._physijs.mass = (typeof mass === 'undefined') ? width * height : mass;\n    };\n    Physijs.ConeMesh.prototype = new Physijs.Mesh;\n    Physijs.ConeMesh.prototype.constructor = Physijs.ConeMesh;\n\n\n    // Physijs.ConcaveMesh\n    Physijs.ConcaveMesh = function (geometry, material, mass) {\n      var i,\n        width, height, depth,\n        vertices, face, triangles = [];\n\n      Physijs.Mesh.call(this, geometry, material, mass);\n\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      vertices = geometry.vertices;\n\n      for (i = 0; i < geometry.faces.length; i++) {\n        face = geometry.faces[i];\n        if (face instanceof THREE.Face3) {\n\n          triangles.push([\n            { x: vertices[face.a].x, y: vertices[face.a].y, z: vertices[face.a].z },\n            { x: vertices[face.b].x, y: vertices[face.b].y, z: vertices[face.b].z },\n            { x: vertices[face.c].x, y: vertices[face.c].y, z: vertices[face.c].z }\n          ]);\n\n        } else if (face instanceof THREE.Face4) {\n\n          triangles.push([\n            { x: vertices[face.a].x, y: vertices[face.a].y, z: vertices[face.a].z },\n            { x: vertices[face.b].x, y: vertices[face.b].y, z: vertices[face.b].z },\n            { x: vertices[face.d].x, y: vertices[face.d].y, z: vertices[face.d].z }\n          ]);\n          triangles.push([\n            { x: vertices[face.b].x, y: vertices[face.b].y, z: vertices[face.b].z },\n            { x: vertices[face.c].x, y: vertices[face.c].y, z: vertices[face.c].z },\n            { x: vertices[face.d].x, y: vertices[face.d].y, z: vertices[face.d].z }\n          ]);\n\n        }\n      }\n\n      width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n      this._physijs.type = 'concave';\n      this._physijs.triangles = triangles;\n      this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n    };\n    Physijs.ConcaveMesh.prototype = new Physijs.Mesh;\n    Physijs.ConcaveMesh.prototype.constructor = Physijs.ConcaveMesh;\n\n\n    // Physijs.ConvexMesh\n    Physijs.ConvexMesh = function (geometry, material, mass) {\n      var i,\n        width, height, depth,\n        points = [];\n\n      Physijs.Mesh.call(this, geometry, material, mass);\n\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      for (i = 0; i < geometry.vertices.length; i++) {\n        points.push({\n          x: geometry.vertices[i].x,\n          y: geometry.vertices[i].y,\n          z: geometry.vertices[i].z\n        });\n      }\n\n\n      width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      height = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n      this._physijs.type = 'convex';\n      this._physijs.points = points;\n      this._physijs.mass = (typeof mass === 'undefined') ? width * height * depth : mass;\n    };\n    Physijs.ConvexMesh.prototype = new Physijs.Mesh;\n    Physijs.ConvexMesh.prototype.constructor = Physijs.ConvexMesh;\n\n\n    // Physijs.Vehicle\n    Physijs.Vehicle = function (mesh, tuning) {\n      tuning = tuning || new Physijs.VehicleTuning;\n      this.mesh = mesh;\n      this.wheels = [];\n      this._physijs = {\n        id: getObjectId(),\n        rigidBody: mesh._physijs.id,\n        suspension_stiffness: tuning.suspension_stiffness,\n        suspension_compression: tuning.suspension_compression,\n        suspension_damping: tuning.suspension_damping,\n        max_suspension_travel: tuning.max_suspension_travel,\n        friction_slip: tuning.friction_slip,\n        max_suspension_force: tuning.max_suspension_force\n      };\n    };\n    Physijs.Vehicle.prototype.addWheel = function (wheel_geometry, wheel_material, connection_point, wheel_direction, wheel_axle, suspension_rest_length, wheel_radius, is_front_wheel, tuning) {\n      var wheel = new THREE.Mesh(wheel_geometry, wheel_material);\n      wheel.castShadow = wheel.receiveShadow = true;\n      wheel.position.copy(wheel_direction).multiplyScalar(suspension_rest_length / 100).add(connection_point);\n      this.world.add(wheel);\n      this.wheels.push(wheel);\n\n      this.world.execute('addWheel', {\n        id: this._physijs.id,\n        connection_point: { x: connection_point.x, y: connection_point.y, z: connection_point.z },\n        wheel_direction: { x: wheel_direction.x, y: wheel_direction.y, z: wheel_direction.z },\n        wheel_axle: { x: wheel_axle.x, y: wheel_axle.y, z: wheel_axle.z },\n        suspension_rest_length: suspension_rest_length,\n        wheel_radius: wheel_radius,\n        is_front_wheel: is_front_wheel,\n        tuning: tuning\n      });\n    };\n    Physijs.Vehicle.prototype.setSteering = function (amount, wheel) {\n      if (wheel !== undefined && this.wheels[wheel] !== undefined) {\n        this.world.execute('setSteering', { id: this._physijs.id, wheel: wheel, steering: amount });\n      } else if (this.wheels.length > 0) {\n        for (var i = 0; i < this.wheels.length; i++) {\n          this.world.execute('setSteering', { id: this._physijs.id, wheel: i, steering: amount });\n        }\n      }\n    };\n    Physijs.Vehicle.prototype.setBrake = function (amount, wheel) {\n      if (wheel !== undefined && this.wheels[wheel] !== undefined) {\n        this.world.execute('setBrake', { id: this._physijs.id, wheel: wheel, brake: amount });\n      } else if (this.wheels.length > 0) {\n        for (var i = 0; i < this.wheels.length; i++) {\n          this.world.execute('setBrake', { id: this._physijs.id, wheel: i, brake: amount });\n        }\n      }\n    };\n    Physijs.Vehicle.prototype.applyEngineForce = function (amount, wheel) {\n      if (wheel !== undefined && this.wheels[wheel] !== undefined) {\n        this.world.execute('applyEngineForce', { id: this._physijs.id, wheel: wheel, force: amount });\n      } else if (this.wheels.length > 0) {\n        for (var i = 0; i < this.wheels.length; i++) {\n          this.world.execute('applyEngineForce', { id: this._physijs.id, wheel: i, force: amount });\n        }\n      }\n    };\n\n    // Physijs.VehicleTuning\n    Physijs.VehicleTuning = function (suspension_stiffness, suspension_compression, suspension_damping, max_suspension_travel, friction_slip, max_suspension_force) {\n      this.suspension_stiffness = suspension_stiffness !== undefined ? suspension_stiffness : 5.88;\n      this.suspension_compression = suspension_compression !== undefined ? suspension_compression : 0.83;\n      this.suspension_damping = suspension_damping !== undefined ? suspension_damping : 0.88;\n      this.max_suspension_travel = max_suspension_travel !== undefined ? max_suspension_travel : 500;\n      this.friction_slip = friction_slip !== undefined ? friction_slip : 10.5;\n      this.max_suspension_force = max_suspension_force !== undefined ? max_suspension_force : 6000;\n    };\n\n    return Physijs;\n  })();\n\n  //!bullets.js\n  function Bullets() {\n    self = this;\n  }\n\n  //PLAYER1\n  Bullets.prototype.fire = (playerSpeed) => {\n\n\n    let bulletsLBlockGeometry = new THREE.SphereGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n    let bulletsLBlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n    bulletsLBlock = new Physijs.BoxMesh(bulletsLBlockGeometry, bulletsLBlockMaterial); //MESH POINTS MAT TO GEOMETRY\n    // console.log((player.rotation.y/ Math.PI) * 2);\n\n    let wpVector2 = new THREE.Vector3();\n    bulletsLBlock.name = 'bullet'\n    bulletsLBlock.position.set(player.position.x + -8 * player.getWorldDirection(wpVector2).x, player.position.y, player.position.z - 8 * player.getWorldDirection(wpVector2).z);\n    // bulletsLBlock.rotation.set(-rotateAngle);\n\n    bulletsLBlock.createdAt = clock.getElapsedTime();\n    // debugger\n\n    scene.add(bulletsLBlock)\n\n    bulletsLBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n      if (other_object.name === 'ground' || other_object.name === 'floorBlock' || other_object.name === 'target' || other_object.name === 'player2') {\n        let selectedObject = scene.getObjectByName('bullet');\n        if (selectedObject) {\n          console.log(other_object.name)\n\n          scene.remove(selectedObject);\n        }\n\n        if (other_object.name === 'player2') {\n          winner = document.getElementById('winner');\n          if (other_object.hp > 0) {\n            other_object.hp -= 1;\n          }\n          opponent = document.getElementById('opponent')\n          opponent.innerHTML = `Opponent HP: ${other_object.hp}`;\n          if (other_object.hp <= 0) {\n            winner.innerHTML = 'You win!'\n          }\n        }\n      }\n      // env3Block.visible = false; // make any mesh disappear on collision...\n    });\n\n  }\n\n  //Player 2 fire\n  Bullets.prototype.p2fire = (playerSpeed) => {\n\n    //PLAYER2\n    let p2BulletsBlockGeometry = new THREE.SphereGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n    let p2BulletsBlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n    p2BulletsBlock = new Physijs.BoxMesh(p2BulletsBlockGeometry, p2BulletsBlockMaterial); //MESH POINTS MAT TO GEOMETRY\n    // console.log((player.rotation.y/ Math.PI) * 2);\n\n\n    let wpVector = new THREE.Vector3();\n    p2BulletsBlock.name = 'bullet'\n    p2BulletsBlock.position.set(player2.position.x + -8 * player2.getWorldDirection(wpVector).x, player2.position.y, player2.position.z - 8 * player2.getWorldDirection(wpVector).z);\n    // p2BulletsBlock.rotation.set(-rotateAngle);\n\n    p2BulletsBlock.createdAt = clock.getElapsedTime();\n    // debugger\n\n    scene.add(p2BulletsBlock)\n\n\n    p2BulletsBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n      // console.log(other_object)\n      // console.log(linear_velocity)\n      // console.log(angular_velocity)\n      // env3Block.material.wireframe = true\n      if (other_object.name === 'ground' || other_object.name === 'floorBlock' || other_object.name === 'target' || other_object.name === 'player2') {\n        let selectedObject = scene.getObjectByName('bullet');\n        if (selectedObject) {\n          console.log(other_object.name)\n\n          scene.remove(selectedObject);\n        }\n\n        if (other_object.name === 'player1') {\n          winner = document.getElementById('winner');\n          if (other_object.hp > 0) {\n            other_object.hp -= 1;\n          }\n          opponent = document.getElementById('opponent')\n          opponent.innerHTML = `Opponent HP: ${other_object.hp}`;\n          if (other_object.hp <= 0) {\n            winner.innerHTML = 'You win!'\n          }\n        }\n      }\n      // env3Block.visible = false; // make any mesh disappear on collision...\n    });\n\n  }\n  //!bullets.js\n\n  //!input.js\n  function Input() {\n    self = this;\n\n    //Set initial state of Input class\n    self.isLeftPressed = false;\n    self.isRightPressed = false;\n    self.isFwdPressed = false;\n    self.isBwdPressed = false;\n    self.isShiftPressed = false;\n    self.isRLPressed = false;\n    self.isRRPressed = false;\n    //how do we add gravity?\n    self.isSpacePressed = false;\n    //bullets?\n    self.isFirePressed = false;\n    self.isXPressed = false;\n\n    //Handle key events (setting value according to event listener)\n    const handleKeyEvent = (e, isKeyDown) => {\n      if (e.keyCode === 65) {\n        self.isLeftPressed = isKeyDown;\n      }\n      if (e.keyCode === 68) {\n        self.isRightPressed = isKeyDown;\n      }\n      if (e.keyCode === 32) {\n        self.isSpacePressed = isKeyDown;\n      }\n      if (e.keyCode === 87) {\n        self.isFwdPressed = isKeyDown;\n      }\n      if (e.keyCode === 83) {\n        self.isBwdPressed = isKeyDown;\n      }\n      if (e.keyCode === 16) {\n        self.isShiftPressed = isKeyDown;\n      }\n      if (e.keyCode === 81) {\n        self.isRLPressed = isKeyDown;\n      }\n      if (e.keyCode === 69) {\n        self.isRRPressed = isKeyDown;\n      }\n      if (e.keyCode === 74) {\n        self.isFirePressed = isKeyDown;\n      }\n      if (e.keyCode === 75) {\n        self.isXPressed = isKeyDown;\n      }\n    }\n\n    //Event listeners for key input, pass event and bool to handle event\n    document.addEventListener(\"keydown\", (e) => { handleKeyEvent(e, true) })\n    document.addEventListener(\"keyup\", (e) => { handleKeyEvent(e, false) })\n  }\n  //!input.js\n\n  //!environment.js\n  function Environment() {\n\n    //TERRAIN TEXTURES\n    var Tmaterial = new THREE.MeshPhongMaterial({\n      map: THREE.ImageUtils.loadTexture('../assets/jotunheimen-texture.jpg')\n    });\n\n    //TERRAIN\n    var terrainLoader = new THREE.TerrainLoader();\n    terrainLoader.load('../assets/jotunheimen.bin', function (data) {\n      var geometry = new THREE.PlaneGeometry(60, 60, 199, 199);\n      for (var i = 0, l = geometry.vertices.length; i < l; i++) {\n        geometry.vertices[i].z = data[i] / 65535 * 10;\n      }\n      // var material = new THREE.MeshPhongMaterial({\n      //   color: 0xdddddd,\n      // wireframe: true\n      // });\n      var plane = new Physijs.PlaneMesh(geometry, Tmaterial, 0, 0);\n      plane.rotation.x = -Math.PI / 2;\n      plane.position.y = -120;\n      plane.scale.set(12, 12, 12)\n      scene.add(plane);\n    });\n\n    //CubeMap\n    // var loader = new THREE.CubeTextureLoader();\n    // loader.setPath('textures/cube/pisa/');\n\n    // var textureCube = loader.load([\n    //   'px.png', 'nx.png',\n    //   'py.png', 'ny.png',\n    //   'pz.png', 'nz.png'\n    // ]);\n\n    // var material = new THREE.MeshBasicMaterial({ color: 0xffffff, envMap: textureCube });\n    // let sceneCube = new THREE.Mesh(new THREE.BoxGeometry(100, 100, 100), material);\n    // scene.add(sceneCube);\n\n\n\n    // const loader = new THREE.CubeTextureLoader();\n    // const texture2 = loader.load([\n    //   'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-x.jpg',\n    //   'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-x.jpg',\n    //   'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-y.jpg',\n    //   'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-y.jpg',\n    //   'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-z.jpg',\n    //   'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-z.jpg',\n    // ]);\n    // scene.background = texture2;\n\n    const loader = new THREE.CubeTextureLoader();\n    const texture2 = loader.load([\n      './textures/c2/px.png',\n      './textures/c2/nx.png',\n      './textures/c2/py.png',\n      './textures/c2/ny.png',\n      './textures/c2/pz.png',\n      './textures/c2/nz.png',\n    ]);\n    scene.background = texture2;\n\n\n\n    //Texture loader\n\n    const textureLoader = new THREE.TextureLoader();\n\n    const texture = textureLoader.load('textures/dirt.png');\n\n    texture.encoding = THREE.sRGBEncoding;\n\n    texture.anisotropy = 16;\n\n    texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n    texture.offset.set(0, 0);\n    texture.repeat.set(200, 200);\n\n    // debugger\n    const materialMap = new THREE.MeshStandardMaterial({\n      map: texture,\n    });\n\n    //TARGET TEXTURE\n\n    const Targettexture = textureLoader.load('textures/tron1.jpg');\n\n    Targettexture.encoding = THREE.sRGBEncoding;\n\n    Targettexture.anisotropy = 16;\n\n    Targettexture.wrapS = Targettexture.wrapT = THREE.RepeatWrapping;\n    Targettexture.offset.set(0, 0);\n    Targettexture.repeat.set(200, 200);\n\n    // debugger\n    const TargetMaterialMap = new THREE.MeshStandardMaterial({\n      map: Targettexture,\n    });\n\n    //GROUND\n    let groundGeometry = new THREE.PlaneGeometry(1000, 1000, 0); //PRIMITIVE SHAPE AND SIZE\n    let groundMaterial = new THREE.MeshBasicMaterial({ color: 'black', visible: false }); //COLOR OF MESH\n    // let ground = new THREE.Mesh(groundGeometry, groundMaterial); //MESH POINTS MAT TO GEOMETRY\n\n\n    var friction = 0.8; // high friction\n    var restitution = 0.3; // low restitution\n\n    // var material = Physijs.createMaterial(\n    //   new THREE.MeshBasicMaterial({ color: 0x888888 }),\n    //   friction,\n    //   restitution,\n    // );\n\n    let ground = new Physijs.PlaneMesh(groundGeometry, groundMaterial, 0, 0); //MESH POINTS MAT TO GEOMETRY\n    ground.rotation.x = -0.5 * Math.PI;\n    ground.name = 'ground'\n    ground.receiveShadow = true;\n    scene.add(ground); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n\n    // // 07c\n    // // ELEMENT ONE (**LOOK UP MATERIAL OPTIONS**)\n    // for (let i = 0; i < 100; i++) {\n    //   let env2BlockGeometry = new THREE.BoxBufferGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n    //   let env2BlockMaterial = new THREE.MeshLambertMaterial({ color: 0x22CAC2 }); //COLOR OF MESH\n    //   let env2Block = new THREE.Mesh(env2BlockGeometry, env2BlockMaterial); //MESH POINTS MAT TO GEOMETRY\n    //   env2Block.position.x = (Math.random() - 0.5) * 400;\n    //   env2Block.position.y = (Math.random() - 0.5) * 400;\n    //   env2Block.position.z = (Math.random() - 0.5) * 300;\n    //   // scene.add(env2Block); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n    // }\n\n    _vector = new THREE.Vector3(0, 0, 0)\n    for (let i = 0; i < 200; i++) {\n      let env3BlockGeometry = new THREE.BoxBufferGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n      let env3BlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n      let env3Block = new Physijs.BoxMesh(env3BlockGeometry, env3BlockMaterial); //MESH POINTS MAT TO GEOMETRY\n      env3Block.position.x = (Math.random() - 0.5) * 300;\n      env3Block.position.y = 1\n      env3Block.position.z = (Math.random() - 0.5) * 300;\n      // debugger//\n      env3Block.scale.set(2, 2, 2)\n      env3Block.name = 'floorBlock'\n      // scene.add(env3Block); //DROP ELEMENST INTO VIRTUAL ENVIRONMENT\n\n      env3Block.setAngularFactor(_vector);\n      env3Block.setAngularVelocity(_vector);\n\n      env3Block.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n        if (other_object.name === 'bullet') {\n          // player.points += 1;\n          // let pointEle = document.getElementById('points')\n          // pointEle.innerHTML = `Score: ${player.points}`\n          env3Block.visible = false;\n        }\n      });\n    }\n\n    _vector = new THREE.Vector3(0, 0, 0)\n    for (let i = 0; i < 100; i++) {\n\n      let color;\n      if (i % 2 === 0) {\n        color = 0xfffff;\n        rot = Math.PI / 2\n        point = 100;\n        scale = 1;\n      } else {\n        color = 0xb52626;\n        rot = 0;\n        point = 1000\n        scale = .5;\n      }\n\n      let TargetBlockGeometry = new THREE.CylinderBufferGeometry(scale, scale, 1, 100); //PRIMITIVE SHAPE AND SIZE\n      // let TargetBlockMaterial = new THREE.MeshLambertMaterial({ color: color }); //COLOR OF MESH\n      let TargetBlockMaterial = new THREE.MeshLambertMaterial({ color: 0xffffff, envMap: scene.background }); //COLOR OF MESH\n\n      let TargetBlock = new Physijs.BoxMesh(TargetBlockGeometry, TargetBlockMaterial, 0, 0); //MESH POINTS MAT TO GEOMETRY\n      TargetBlock.position.x = (Math.random() - 0.5) * 300;\n      TargetBlock.position.y = (Math.random() - 0.5) * 300 + 200;\n      TargetBlock.position.z = (Math.random() - 0.5) * 300;\n      TargetBlock.rotation.x = Math.PI / 2;\n      TargetBlock.rotation.z = rot;\n      // debugger//\n      TargetBlock.scale.set(10, 1, 10)\n      TargetBlock.name = 'target'\n      TargetBlock.points = point;\n      scene.add(TargetBlock); //DROP ELEMENST INTO VIRTUAL ENVIRONMENT\n\n      TargetBlock.setAngularFactor(_vector);\n      TargetBlock.setAngularVelocity(_vector);\n\n      TargetBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n        if (other_object.name === 'bullet') {\n          // player.points += this.points;\n          let pointEle = document.getElementById('points')\n          // pointEle.innerHTML = `Score: ${player.points}`\n          // TargetBlock.visible = false;\n          scene.remove(this);\n        }\n      });\n    }\n\n    for (let i = 0; i < 200; i++) {\n      // let BIGheight = (Math.random() - 0.5) * 10;\n      let BIGheight = 1;\n      let Trunkheight = 2.125\n      let env1BIGBlockGeometry = new THREE.BoxBufferGeometry(1, BIGheight, 1); //PRIMITIVE SHAPE AND SIZE\n      let env1BIGBlockMaterial = new THREE.MeshLambertMaterial({ color: 0x6bff42 }); //COLOR OF MESH\n      let env1BIGBlock = new Physijs.BoxMesh(env1BIGBlockGeometry, env1BIGBlockMaterial, 0); //MESH POINTS MAT TO GEOMETRY\n      let env1TrunkBlockGeometry = new THREE.BoxBufferGeometry(.25, Trunkheight, .25, 1); //PRIMITIVE SHAPE AND SIZE\n      let env1TrunkBlockMaterial = new THREE.MeshLambertMaterial({ color: 0xffffff }); //COLOR OF MESH\n      let env1TrunkBlock = new Physijs.BoxMesh(env1TrunkBlockGeometry, env1TrunkBlockMaterial, 0); //MESH POINTS MAT TO GEOMETRY\n\n      env1TrunkBlock.position.x = env1BIGBlock.position.x;\n      env1TrunkBlock.position.y = 1\n      env1TrunkBlock.position.z = env1BIGBlock.position.z;\n\n      env1BIGBlock.add(env1TrunkBlock)\n      env1BIGBlock.hp = 100;\n      env1BIGBlock.rotation.x = Math.PI\n\n      env1BIGBlock.position.x = (Math.random() - 0.5) * 600;\n      env1BIGBlock.position.y = 40\n      env1BIGBlock.position.z = (Math.random() - 0.5) * 600;\n\n\n      // debugger\n      env1BIGBlock.scale.set(20, 20, 20)\n      env1BIGBlock.name = 'floorBlock'\n      env1TrunkBlock.name = 'floorBlock'\n\n      // scene.add(env1BIGBlock); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n      // scene.add(env1TrunkBlock); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n\n      env1BIGBlock.setAngularFactor(_vector);\n      env1BIGBlock.setAngularVelocity(_vector);\n\n      env1BIGBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n        if (other_object.name === 'bullet') {\n          env1BIGBlock.hp -= 1;\n          if (env1BIGBlock.hp === 0) {\n            // player.points += 100;\n            let pointEle = document.getElementById('points')\n            pointEle.innerHTML = `Score: ${player.points}`\n            scene.remove(this)\n            // env1BIGBlock.visible = false;\n          }\n        }\n      });\n\n      env1TrunkBlock.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n        if (other_object.name === 'bullet') {\n          env1BIGBlock.hp -= 1;\n          if (env1BIGBlock.hp === 0) {\n            // player.points += 10;\n            let pointEle = document.getElementById('points')\n            pointEle.innerHTML = `Score: ${player.points}`\n            env1BIGBlock.visible = false;\n          }\n        }\n      });\n    }\n\n    const towerRow = (height, width, zPos) => {\n      for (let i = 0; i < width; i++) {\n        let env4BlockGeometry = new THREE.BoxBufferGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n        var env4BlockMaterial = Physijs.createMaterial(new THREE.MeshLambertMaterial({ color: 0xff00C2 }), 0, .1)\n        // let env4BlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n        let env4Block = new Physijs.BoxMesh(env4BlockGeometry, env4BlockMaterial); //MESH POINTS MAT TO GEOMETRY\n\n        env4Block.position.x = i * 2.1 + 6;\n        env4Block.position.y = height;\n        env4Block.position.z = zPos;\n        // debugger\n        env4Block.scale.set(2, 2, 2)\n        env4Block.name = 'floorBlock'\n        scene.add(env4Block); //DROP ELEMENT INTO VIRTUAL ENVIRONMENT\n\n        env4Block.setAngularFactor(_vector);\n        env4Block.setAngularVelocity(_vector);\n\n        env4Block.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n          if (other_object.name === 'bullet') {\n            // player.points += 1;\n            let pointEle = document.getElementById('points')\n            pointEle.innerHTML = `Score: ${player.points}`\n            // env4Block.visible = false;\n            scene.remove(this)\n          }\n        });\n      }\n    }\n\n\n    const towerBuilder = (numRows) => {\n      zPos = (Math.random() - 0.5) * 300;\n      width = 1;\n      for (let i = 0; i < numRows; i++) {\n        towerRow((i * 2 + 1), width, zPos)\n      }\n    }\n\n    for (let i = 0; i < 0; i++) {\n      towerBuilder(20)\n    }\n\n  }\n\n  //!environment.js\n\n  //!fileUploader.js\n  let MechLoader = new THREE.OBJLoader();\n  MechLoader.load(\n    'assets/mech.obj',\n    function (object) {\n      mechMesh = object.children[0]\n      mechMesh.position.set(0, -4, 0);\n      mechMesh.rotation.y = Math.PI;\n\n      let materials = mechMesh.material\n      for (let i = 0; i < materials.length; i++) {\n        if (i % 2 === 0) {\n          // mechMesh.material[i].color.set(0x2f523e);\n          mechMesh.material[i].envMap = scene.background\n        } else {\n          mechMesh.material[i].color.set(0xf5d742);\n        }\n      }\n      player.points2 = 0;\n      player.position.set(0, 10, 0);\n      // player.material.wireframe = true;\n\n      player.add(mechMesh)\n      player.position.set(1, 4, 0)\n\n      let mechMesh2 = mechMesh.clone();\n      player2.add(mechMesh2)\n      player2.name = 'player2';\n\n      let lightPlayer = new THREE.DirectionalLight(0xFFFFFF, 1);\n      lightPlayer.position.set(0, 200, 0)\n      lightPlayer.target = player;\n      player.hp = 20;\n      scene.add(lightPlayer)\n      scene.add(lightPlayer.target);\n\n      scene.add(player)\n      scene.add(player2)\n\n      //RADAR\n      let radarGeometry = new THREE.SphereGeometry(2, 20, 20);\n      let radarMaterial = new THREE.MeshLambertMaterial({\n        color: 0x22CAC2,\n        opacity: 0.5,\n        transparent: true,\n        wireframe: true,\n      })\n\n      radar = new THREE.Mesh(radarGeometry, radarMaterial); //MESH POINTS MAT TO GEOMETRY\n      radar.position.set(7, 8, 0);\n      player.add(radar);\n\n      //P1 RADAR\n      // let p1radarGeometry = new THREE.SphereGeometry(.2, 1, 1);\n      let p1radarGeometry = new THREE.ConeBufferGeometry(.1, .5, 4);\n      let p1radarMaterial = new THREE.MeshLambertMaterial({\n        color: 0x00ff6a,\n        opacity: 0.5,\n        transparent: true,\n      })\n      p1radarGeometry.rotateX(-Math.PI / 2)\n\n      p1radar = new THREE.Mesh(p1radarGeometry, p1radarMaterial); //MESH POINTS MAT TO GEOMETRY\n      p1radar.position.set(7, 8, 0);\n      player.add(p1radar);\n\n      //P2 RADAR\n      // let p2radarGeometry = new THREE.SphereGeometry(.2, 1, 1);\n      let p2radarGeometry = new THREE.ConeBufferGeometry(.1, .5, 4);\n      let p2radarMaterial = new THREE.MeshLambertMaterial({\n        color: 0xff2a00,\n        opacity: 0.5,\n        transparent: true,\n      })\n      p2radarGeometry.rotateX(-Math.PI / 2)\n\n\n      p2radar = new THREE.Mesh(p2radarGeometry, p2radarMaterial); //MESH POINTS MAT TO GEOMETRY\n      p2radar.position.set(7, 8, 0);\n      player.add(p2radar);\n\n      // //HP TEXT\n      // var loader = new THREE.FontLoader();\n\n      // let hpTxt;\n      // loader.load('assets/text/helvetiker_regular.typeface.json', function (font) {\n\n      //   var hpgeometry = new THREE.TextGeometry('H P', {\n      //     font: font,\n      //     size: 40,\n      //     height: 5,\n      //     curveSegments: 12,\n      //     bevelEnabled: true,\n      //     bevelThickness: 10,\n      //     bevelSize: 2,\n      //     bevelOffset: 0,\n      //     bevelSegments: 5\n      //   });\n\n      //   let hpBarMaterial = new THREE.MeshLambertMaterial({\n      //     color: 0x00ff6a,\n      //     opacity: 0.75,\n      //     transparent: true,\n      //   })\n\n      //   hpTxt = new THREE.Mesh(hpgeometry, hpBarMaterial)\n      //   // debugger\n      //   hpTxt.scale.set(.01, .01, .01)\n      //   hpTxt.position.set(-9, 9.5, 0)\n      //   hpTxt.rotation.y = Math.PI / 2 * .5\n      //   hpTxt.rotation.x = Math.PI / 2 * .25\n      //   player.add(hpTxt)\n\n      //   // scene.add(hpTxt);\n      // });\n\n      //P1 Health Bar\n      let hpBarGeometry = new THREE.BoxGeometry(5, .5, .5);\n      let hpBarMaterial = new THREE.MeshLambertMaterial({\n        color: 0x00ff6a,\n        opacity: 0.75,\n        transparent: true,\n      })\n\n      hpBar = new THREE.Mesh(hpBarGeometry, hpBarMaterial); //MESH POINTS MAT TO GEOMETRY\n      hpBar.position.set(-8, 9, 0);\n      // let ResizeWidthRatio = - 8 / 626;\n      // hpBar.position.x = ResizeWidthRatio * window.innerWidth\n      // console.log(`X position: ${hpBar.position.x}`)\n      hpBar.rotation.y = Math.PI / 2 * .5\n      hpBar.rotation.x = Math.PI / 2 * .25\n      player.add(hpBar);\n\n      // //HP2 TEXT\n      // var loader = new THREE.FontLoader();\n\n      // let hp2Txt;\n      // loader.load('assets/text/helvetiker_regular.typeface.json', function (font) {\n\n      //   var hp2geometry = new THREE.TextGeometry('O P P O N E N T  H P :', {\n      //     font: font,\n      //     size: 40,\n      //     height: 5,\n      //     curveSegments: 12,\n      //     bevelEnabled: true,\n      //     bevelThickness: 10,\n      //     bevelSize: 2,\n      //     bevelOffset: 0,\n      //     bevelSegments: 5\n      //   });\n\n      //   let hp2BarMaterial = new THREE.MeshLambertMaterial({\n      //     color: 0xff2e2e,\n      //     opacity: 0.75,\n      //     transparent: true,\n      //   })\n\n      //   hp2Txt = new THREE.Mesh(hp2geometry, hp2BarMaterial)\n      //   // debugger\n      //   hp2Txt.scale.set(.01, .01, .01)\n      //   hp2Txt.position.set(-9, 6, 0)\n      //   hp2Txt.rotation.y = Math.PI / 2 * .5\n      //   hp2Txt.rotation.x = Math.PI / 2 * .25\n      //   player.add(hp2Txt)\n\n      //   // scene.add(hpTxt);\n      // });\n\n      //P2 Health Bar\n      let hp2BarGeometry = new THREE.BoxGeometry(5, .5, .5);\n      let hp2BarMaterial = new THREE.MeshLambertMaterial({\n        color: 0xff2e2e,\n        opacity: 0.75,\n        transparent: true,\n      })\n\n      hp2Bar = new THREE.Mesh(hp2BarGeometry, hp2BarMaterial); //MESH POINTS MAT TO GEOMETRY\n      hp2Bar.position.set(-8, 6, 0);\n      // let ResizeWidthRatio = - 8 / 626;\n      // hp2Bar.position.x = ResizeWidthRatio * window.innerWidth\n      // console.log(`X position: ${hp2Bar.position.x}`)\n      hp2Bar.rotation.y = Math.PI / 2 * .5\n      hp2Bar.rotation.x = Math.PI / 2 * .25\n      player.add(hp2Bar);\n\n\n\n\n\n    }\n  );\n\n  let TreeLoader = new THREE.OBJLoader();\n  for (let i = 0; i < 0; i++) {\n    TreeLoader.load(\n      'assets/tree.obj',\n      function (object) {\n        treeMesh = object.children[5]\n        treeMesh.material.color.set(0x60a62e)\n        treeMesh.scale.set(3, 3, 3)\n\n        let treeGeometry = new THREE.BoxBufferGeometry(2, 60, 2); //PRIMITIVE SHAPE AND SIZE\n        var treeMaterial = Physijs.createMaterial(new THREE.MeshLambertMaterial({ color: 0xffffff }), 0, 0)\n        // let treeMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n        let tree = new Physijs.BoxMesh(treeGeometry, treeMaterial, 0); //MESH POINTS MAT TO GEOMETRY\n        tree.name = 'tree';\n        tree.visible = false;\n        // tree.position.set(-53.5, 0, -25.5)\n        tree.position.set(-161.5, 0, -77)\n\n        tree.add(treeMesh)\n        // treeMesh.add(tree);\n        // tree.add(treeMesh)\n\n        treeMesh.position.set(0, -718 * 1.5, 0);\n        // treeMesh.rotation.y = Math.PI/Math.random();\n        // debugger\n        let randX = (Math.random() - 0.5) * 600;;\n        let randZ = (Math.random() - 0.5) * 600;\n\n        // treeMesh.add(tree)\n        // treeMesh.position.x = (Math.random() - 0.5) * 600;\n        // treeMesh.position.y = -718 * 1.5\n        // treeMesh.position.z = (Math.random() - 0.5) * 600;\n        // scene.add(tree)\n\n        treeMesh.position.x += randX\n        tree.position.x += randX\n        treeMesh.position.z += randZ\n        tree.position.z += randZ\n\n        scene.add(treeMesh)\n        scene.add(tree)\n\n        tree.addEventListener('collision', function (other_object, linear_velocity, angular_velocity) {\n          if (other_object.name === 'bullet') {\n            // player.points += 1;\n            // let pointEle = document.getElementById('points')\n            // pointEle.innerHTML = `Score: ${player.points}`\n            // tree.visible = false;\n            // scene.remove(this)\n          }\n        });\n\n      }\n    );\n  }\n\n// //A huge city w/o colliders or physics \n// let cityLoader = new THREE.OBJLoader();\n// cityLoader.load(\n//   'assets/City.obj',\n//   function (object) {\n\n//     for (let i = 0; i < object.children.length; i++) {\n//       cityMesh = object.children[i]\n//       if (i % 2 === 0) {\n//         debugger\n//         cityMesh.material.color.set(0xa39f98);\n//       } else {\n//         cityMesh.material.color.set(0xc4b9a7);\n//       }\n\n\n//       cityMesh.position.set(0, 0, 400);\n//       scene.add(cityMesh)\n//     }\n// }\n// );\n\n// //TEXT LOADING\n// var loader = new THREE.FontLoader();\n\n// loader.load('assets/text/helvetiker_regular.typeface.json', function (font) {\n\n//   var hpgeometry = new THREE.TextGeometry('HP', {\n//     font: font,\n//     size: 80,\n//     height: 5,\n//     curveSegments: 12,\n//     bevelEnabled: true,\n//     bevelThickness: 10,\n//     bevelSize: 8,\n//     bevelOffset: 0,\n//     bevelSegments: 5\n//   });\n\n//   let hpBarMaterial = new THREE.MeshLambertMaterial({\n//     color: 0x00ff6a,\n//     opacity: 0.75,\n//     transparent: true,\n//   })\n\n//   hpTxt = new THREE.Mesh(hpgeometry, hpBarMaterial)\n//   // hpTxt.scale.set(.01, .01, .01)\n//   hpTxt.position.set(0,3,0)\n\n//   scene.add(hpTxt);\n// });\n  //!fileUploader.js\n\n\n  //!MAIN.JS\n  let camera, sceneHUD, cameraHUD, rotateAngle, renderer, scene, player, bullets, bulletsBlock, input, environment, clock, lastTimeStamp;\n  let player2 = { id: null, x: 0, y: 0, z: 0, ph: 0 };\n  let serverPackage = [];\n  let player2Data = { id: null, x: 0, y: 0, z: 0, ph: 0 };\n  let bulletCount = 0;\n  let j = 0;\n  let radar;\n  let p1radar;\n  p1radar = { position: { x: 0, y: 0, z: 0 } };\n  let p2radar;\n  p2radar = { position: { x: 0, y: 0, z: 0 } };\n  let hpBar, hpTxt = { position: { x: 0, y: 0, z: 0 } };;\n  let hpBar2, hp2Txt = { position: { x: 0, y: 0, z: 0 } };;\n\n  let RELOAD = 1000;\n\n  var stats = new Stats();\n  stats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\n  // document.body.appendChild(stats.dom);\n\n  function reset() {\n\n    setTimeout(() => {\n      player.hp = 20;\n      player2.hp = 20;\n      let pointEle = document.getElementById('points')\n      player.points2 += 1;\n      pointEle.innerHTML = `Score: ${player.points2}`\n      // player.position.set(0, 20, 0);\n      // player2.position.set(0, 20, 0);\n      // location.reload()\n      // animate().reset();\n    }, 0);\n    // animate();\n    // requestAnimationFrame(animate);\n  }\n\n  function init() {\n    //Crosshair\n    crosshair = document.createElement('h1');\n    crosshair.id = 'cross'\n    crosshair.style.cssText = `\n  position: absolute;\n  left: 49.75%;\n  font-size: 10px;\n  font-family: fantasy;\n  top: 40%;\n  `;\n    document.body.appendChild(crosshair);\n    crosshair.innerHTML = 'X'\n\n\n    // 201 \n    Physijs.scripts.worker = './lib/physijs_worker.js';\n    Physijs.scripts.ammo = './lib/ammo.js';\n\n    // 02\n    //RENDERER INPUT, SCENE (virtual environment)/CAMERA \n    // let scene = new THREE.Scene();\n    scene = new Physijs.Scene;\n\n    // let scene = new Physijs.Scene({ reportsize: 50, fixedTimeStep: 1 / 20 }); //Slow down scene to fix rotation bug\n    scene.setGravity(new THREE.Vector3(0, -15, 0));\n    {\n      const color = 'black';  // white\n      const near = 90;\n      const far = 300;\n      scene.fog = new THREE.Fog(color, near, far);\n    }\n    scene.background = new THREE.Color('skyblue');\n\n    createCamera();\n    createLights();\n    createMeshes();\n    createRenderer();\n\n\n    //202\n    //Bullets\n    bullets = new Bullets();\n    // let bulletsBlockGeometry = new THREE.SphereGeometry(1, 1, 1); //PRIMITIVE SHAPE AND SIZE\n    // let bulletsBlockMaterial = new THREE.MeshLambertMaterial({ color: 0xff00C2 }); //COLOR OF MESH\n    // bulletsBlock = new Physijs.BoxMesh(bulletsBlockGeometry, bulletsBlockMaterial); //MESH POINTS MAT TO GEOMETRY\n\n    // 101\n    //INPUT OBJECT\n    input = new Input();\n\n    // 001\n    // Environment\n    environment = new Environment();\n\n\n\n    // 05\n    //MAKE WINDOW RESPONSIVE ON RESIZE\n    window.addEventListener('resize', () => {\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      camera.aspect = window.innerWidth / window.innerHeight;\n\n      camera.updateProjectionMatrix();\n    })\n\n    // 06\n    //RAYCASTER => VECTOR 'RAY'... RAY === Array? (like vector array?)\n    let raycaster = new THREE.Raycaster();\n    let mouse = new THREE.Vector2();\n\n\n    // 09\n    //RENDER LOOP\n    // 102\n    //Normalize animation loop\n    lastTimeStamp = 0;\n\n    clock = new THREE.Clock();\n    _vector = new THREE.Vector3(0, 0, 0)\n\n\n    // debugger\n    socket.emit('init', {\n      id: socket.id,\n      x: player.position.x,\n      y: player.position.y,\n      z: player.position.z,\n      h: player.rotation.y,\n      pb: player.rotation.y\n    });\n\n\n  }\n\n  function createCamera() {\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      300\n    );\n    // debugger\n\n    camera.position.set(0, 6, 10);\n    camera.rotation.x = -.2\n  }\n\n  function createLights() {\n    // 08\n    //LIGHT ONE\n    let light1 = new THREE.DirectionalLight(0xFFFFFF, 2);\n    light1.position.set(0, 20, 25)\n    scene.add(light1)\n\n    //LIGHT TWO\n    let light2 = new THREE.AmbientLight(0xaaaaaa, 1);\n    light2.position.set(0, 0, 25)\n    scene.add(light2)\n\n\n    // const ambientLight = new THREE.HemisphereLight(\n    //   0xddeeff,\n    //   0x202020,\n    //   .5,\n    // );\n    // scene.add(ambientLight)\n\n  }\n\n  function createMeshes() {\n    // 07\n    //ELEMENT ONE (**LOOK UP MATERIAL OPTIONS**)\n    let playerGeometry = new THREE.BoxBufferGeometry(5, 8, 5, 0); //PRIMITIVE SHAPE AND SIZE (set 3rd val to 111 for cat paw)\n    let playerMaterial = new THREE.MeshLambertMaterial({\n      color: 0x22CAC2,\n      opacity: 0.0,\n      visible: false,\n    }); //COLOR OF MESH\n    //ELEMENT ONE (**LOOK UP MATERIAL OPTIONS**)\n\n    // let player = new THREE.Mesh(playerGeometry, playerMaterial); //MESH POINTS MAT TO GEOMETRY\n    player = new Physijs.BoxMesh(playerGeometry, playerMaterial); //MESH POINTS MAT TO GEOMETRY\n    player.position.set(0, 1, 0);\n    player.name = 'player';\n    player.hp = 20;\n    player.add(camera)\n    player.points2 = 0;\n\n    let player2Geometry = new THREE.CubeGeometry(5, 8, 5, 0);\n    let player2Material = new THREE.MeshLambertMaterial({\n      color: 0x22CAC2,\n      opacity: 0.0,\n    })\n\n    player2 = new Physijs.BoxMesh(playerGeometry, playerMaterial);\n\n    player2.hp = 20;\n  }\n\n  function createRenderer() {\n    // 03\n    //INSTANCE OF RENDERER\n    renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    // renderer.gammaFactorw\n\n    renderer.physicallyCorrectLights = true;\n    // renderer.setClearColor(\"#e5e5e5\"); //BACKGROUND COLOR\n\n    //HUD\n    hud = document.getElementById('hud');\n    hud.style.cssText = `\n    display: flex;\n  `;\n\n\n\n    //SCORE\n    pointTally = document.createElement('h1');\n    pointTally.id = 'points'\n    pointTally.style.cssText = `\n    position: absolute;\n    bottom: 0;\n    text-transform: uppercase;\n    font-size: 20px;\n    // margin-left: 20px;\n    margin: 0 auto;\n  `;\n    document.body.appendChild(pointTally);\n    pointTally.innerHTML = 'Score: 0'\n\n    //INSTRUCTIONS\n    pointTally = document.createElement('h1');\n    pointTally.id = 'instructions'\n    pointTally.style.cssText = `\n    position: absolute;\n    bottom: 0px;\n    font-family: monospace;\n    right: 0px;\n    text-transform: uppercase;\n    font-size: 18px;\n    /* margin: 0px auto; */\n    margin: 10px;\n  `;\n    document.body.appendChild(pointTally);\n    pointTally.innerHTML = 'W/A/S/D: Move <br /> Q/E: Rotate <br /> J: Fire <br /> SPACE: Fly <br /> K: Descend'\n\n    //P2 HP\n    opponentHP = document.createElement('h1');\n    opponentHP.id = 'opponent'\n    opponentHP.style.position = 'absolute';\n    opponentHP.style.marginTop = '70';\n    opponentHP.style.cssText = `\n    margin: 75px 20px 20px;\n    position: absolute;\n    transform: skewY(-9deg);\n  `\n    // document.body.appendChild(opponentHP);\n    // hud.appendChild(opponentHP);\n    opponentHP.innerHTML = `Opponent HP: ${player2.hp}`;\n\n    //P1 HP\n    playerHP = document.createElement('h1');\n    playerHP.id = 'player'\n    playerHP.style.position = 'absolute';\n    playerHP.style.marginTop = '45';\n    playerHP.style.cssText = `\n    margin: 20px;\n    position: absolute;\n    transform: skewY(-9deg);\n  `\n    // hud.appendChild(playerHP);\n    if (player.hp) {\n      playerHP.innerHTML = `HP: ${player.hp}`;\n    } else {\n      playerHP.innerHTML = `HP: 20`;\n    }\n\n    // //P1 HP BAR\n    // p1hpBar = document.createElement('div');\n    // p1hpBar.id = 'p1hpbar';\n    // p1hpBar.style.cssText = `\n    //   margin: 55px 20px 45px;\n    //   opacity: 0.75;\n    //   height: 9px;\n    //   border: 2px solid black;\n    //   width: ${player.hp * 10}px;\n    //   position: absolute;\n    //   background-color: green;\n    //   transform: skewY(-9deg);\n    // `;\n\n    // hud.appendChild(p1hpBar);\n\n\n    //p2 HP BAR\n    // p2hpBar = document.createElement('div');\n    // p2hpBar.id = 'p2hpbar';\n    // p2hpBar.style.cssText = `\n    //   margin: 121px 20px 45px;\n    //   opacity: 0.75;\n    //   height: 9px;\n    //   border: 2px solid black;\n    //   width: ${player2.hp * 10}px;\n    //   position: absolute;\n    //   background-color: red;\n    //   transform: skewY(-9deg);\n    // `;\n    // hud.appendChild(p2hpBar);\n\n    // //Time...?\n    // timeTally = document.createElement('h1');\n    // timeTally.id = 'time'\n    // timeTally.style.position = 'absolute';\n    // timeTally.style.marginTop = '100';\n    // document.body.appendChild(timeTally);\n    // timeTally.innerHTML = 'Time: 0'\n\n    //Winner text...\n    winnerUI = document.createElement('h1');\n    winnerUI.id = 'winner'\n    winnerUI.style.position = 'absolute';\n    winnerUI.style.marginTop = '130';\n    // document.body.appendChild(winnerUI);\n    winnerUI.style.cssText = `\n    transform: skewY(-9deg);\n    margin: 161px 20px;\n    position: absolute;\n  `\n    winnerUI.innerHTML = 'FIGHT!'\n\n\n    document.body.appendChild(renderer.domElement);\n  }\n\n\n\n\n  let animate = function (timeStamp) {\n    // let p1bar = document.getElementById('p1hpbar')\n    // p1bar.style.width = `${player.hp * 10}px`\n    // let p2bar = document.getElementById('p2hpbar')\n    // p2bar.style.width = `${player2.hp * 10}px`\n    stats.begin();\n\n\n    player.setAngularFactor(_vector);\n    player.setAngularVelocity(_vector);\n    // player.setLinearVelocity(new THREE.Vector3(0, 0, 0));\n\n    let delta = clock.getDelta(); // seconds\n    // console.log(clock.getElapsedTime())\n    let moveDistance = 200 * delta; // 200 pixels per second\n    rotateAngle = Math.PI / 2 * delta; // pi/2 radians (90 deg) per sec\n\n    let time = document.getElementById('time')\n    // time.innerHTML = `Time: ${Math.floor(clock.elapsedTime * 100)}`\n    // let socketData = 'nope';\n    // time.innerHTML = `Time: ${socketData}`\n\n    let start = requestAnimationFrame(animate);\n\n    //!Comment in for time challenge!!!\n    // if (Math.floor(clock.elapsedTime * 100) >= RELOAD) {\n    //   let pointEle = document.getElementById('points')\n    //   // pointEle.className= 'finalpoint';\n    //   pointEle.style = 'color: red; position: absolute; top: 20%; left: 40%; padding: 10px; border: 5px solid black;';\n    //   pointEle.innerHTML = `Final Score: ${player.points}`\n    //   // pointEle.style = `align: center;`\n    //   cancelAnimationFrame(start);\n    //   reset(animate);\n    // }\n\n    let timeDelta = (timeStamp - lastTimeStamp) / 1000;\n    lastTimeStamp = timeStamp;\n\n    let movementSpeed = 12 * timeDelta;\n\n\n    //BOOST\n    let boost = 1;\n    if (input.isShiftPressed) {\n      boost = 10 * movementSpeed;\n      // boost = 1\n    }\n\n    let playerSpeed = movementSpeed * boost * 2;\n\n    //LEFT\n    if (input.isLeftPressed) {\n      player.__dirtyPosition = true;\n      player.__dirtyRotation = true;\n      player.setLinearVelocity(_vector);\n      player.translateOnAxis(new THREE.Vector3(playerSpeed * 100, 0, 0), -rotateAngle)\n\n      // player.position.x -= Math.sin(player.rotation.y + Math.PI / 2) * playerSpeed;\n      // player.position.z -= Math.cos(player.rotation.y + Math.PI / 2) * playerSpeed;\n    }\n    //RIGHT\n    if (input.isRightPressed) {\n      player.__dirtyPosition = true;\n      player.__dirtyRotation = true;\n      player.setLinearVelocity(_vector);\n      player.translateOnAxis(new THREE.Vector3(-playerSpeed * 100, 0, 0), -rotateAngle)\n\n      // player.position.x += Math.sin(player.rotation.y + Math.PI / 2) * playerSpeed;\n      // player.position.z += Math.cos(player.rotation.y + Math.PI / 2) * playerSpeed;\n    }\n    //JUMP  \n    if (input.isSpacePressed) {\n      player.__dirtyPosition = true;\n      player.__dirtyRotation = true;\n      player.setLinearVelocity(_vector);\n      player.setAngularFactor(_vector);\n      player.setAngularVelocity(_vector);\n      player.translateOnAxis(new THREE.Vector3(0, -movementSpeed * 100, 0), -rotateAngle)\n      // player.position.y += playerSpeed*2;\n    }\n\n    if (input.isXPressed) {\n      player.__dirtyPosition = true;\n      player.__dirtyRotation = true;\n      if (player.position.y > 4.5) {\n        player.translateOnAxis(new THREE.Vector3(0, movementSpeed * 100, 0), -rotateAngle)\n        player.setAngularFactor(_vector);\n        player.setAngularVelocity(_vector);\n      }\n    }\n\n    //FWD \n\n\n    if (input.isFwdPressed) {\n      player.__dirtyPosition = true;\n      player.__dirtyRotation = true;\n      player.setAngularFactor(_vector);\n      player.setAngularVelocity(_vector);\n      player.setAngularFactor(_vector);\n      player.setLinearVelocity(_vector);\n\n      player.translateOnAxis(new THREE.Vector3(0, 0, playerSpeed * 100), -rotateAngle)\n      // console.log(player.getWorldQuaternion())\n\n\n\n      // delete3DOBJ('bullet');\n\n      // player.position.x -= Math.sin(player.rotation.y) * playerSpeed;\n      // player.position.z -= Math.cos(player.rotation.y) * playerSpeed;\n    }\n    //BACK \n    if (input.isBwdPressed) {\n      player.__dirtyPosition = true;\n      player.__dirtyRotation = true;\n      player.setLinearVelocity(_vector);\n      player.translateOnAxis(new THREE.Vector3(0, 0, -playerSpeed * 100), -rotateAngle)\n\n      // player.position.x += Math.sin(player.rotation.y) * playerSpeed;\n      // player.position.z += Math.cos(player.rotation.y) * playerSpeed;\n    }\n    //RotLeft\n    if (input.isRLPressed) {\n      // player.rotation.y += playerSpeed/4;\n      player.rotateOnAxis(new THREE.Vector3(0, 1, 0), +0.05);\n      player.setLinearVelocity(_vector);\n      // console.log(player.rotateOnAxis)\n      player.__dirtyPosition = true;\n      player.__dirtyRotation = true;\n    }\n    //RotRight\n    if (input.isRRPressed) {\n\n      player.rotateOnAxis(new THREE.Vector3(0, 1, 0), -0.05);\n      player.setLinearVelocity(_vector);\n      player.__dirtyPosition = true;\n      player.__dirtyRotation = true;\n    }\n\n\n    //Player BULLETS\n    if (input.isFirePressed) {\n\n      if (j % 2 === 0) {\n        // console.log(j)\n        bullets.fire()\n      }\n      j += 1;\n      let xCompensator = ((player.rotation.y / Math.PI) * -2) * 100\n      let zCompensator = 100 / (xCompensator + 1)\n\n      let wpVector2 = new THREE.Vector3();\n      if (bulletsLBlock.name = 'bullet') {\n        bulletsLBlock.setLinearVelocity(new THREE.Vector3(-player.getWorldDirection(wpVector2).x * 500, 0, player.getWorldDirection(wpVector2).z * -500))\n      }\n\n      //LIMITED BULLET COUNT\n      for (let i = 0; i < scene.children.length; i++) {\n        if (scene.children[i].name === 'bullet') {\n          // debugger\n          bulletCount += 1\n          if (bulletCount > 200) {\n            // debugger\n            for (let i = 0; i < scene.children.length; i++) {\n              if (scene.children[i].name === 'bullet') {\n                scene.remove(scene.children[i])\n              }\n            }\n            bulletCount = 0;\n          }\n        }\n      }\n      player.setAngularFactor(_vector);\n      player.setAngularVelocity(_vector);\n    }\n\n    //Player2 BULLETS\n    if (player2.firing) {\n      // if (j % 10 === 0) {\n      bullets.p2fire()\n      // }\n\n      let wpVector2 = new THREE.Vector3();\n      if (p2BulletsBlock.name === 'bullet') {\n        p2BulletsBlock.setLinearVelocity(new THREE.Vector3(-player2.getWorldDirection(wpVector2).x * 400, 0, player2.getWorldDirection(wpVector2).z * -400))\n      }\n\n      //LIMITED BULLET COUNT\n      for (let i = 0; i < scene.children.length; i++) {\n        if (scene.children[i].name === 'bullet') {\n          // debugger\n          bulletCount += 1\n          if (bulletCount > 100) {\n            // debugger\n            for (let i = 0; i < scene.children.length; i++) {\n              if (scene.children[i].name === 'bullet') {\n                scene.remove(scene.children[i])\n              }\n            }\n            bulletCount = 0;\n          }\n        }\n      }\n      player2.setAngularFactor(_vector);\n      player2.setAngularVelocity(_vector);\n    }\n\n\n    // //GRAVITY...fix this please\n    // if (player.position.y <= 1) {\n    //   player.translateOnAxis(new THREE.Vector3(0, 0, 0), -rotateAngle)\n    // } else {\n    //   player.translateOnAxis(new THREE.Vector3(0, playerSpeed * 50, 0), -rotateAngle)\n    // }\n    // camera.lookAt(player.position)\n\n\n    function delete3DOBJ(objName) {\n      let selectedObject = scene.getObjectByName(objName);\n      if (selectedObject) {\n        scene.remove(selectedObject);\n      }\n\n      // animate();\n    }\n\n    // socket.emit('spawn', {\n    //   id: socket.id,\n    //   x: player.position.x,\n    //   y: player.position.y,\n    //   z: player.position.z,\n    //   h: player.rotation.y,\n    //   pb: player.rotation.x\n    // });\n\n    let wpVector2 = new THREE.Vector3();\n    player.getWorldDirection(wpVector2).y\n\n    if (player.hp <= 0 || player2.hp <= 0) {\n      reset();\n      // player.hp = 200;\n      // player2.hp = 200;\n      // debugger\n    }\n\n    // if (player2.hp <= 0) {\n    //   // player.hp = 200;\n    //   // player2.hp = 200;\n    //   // debugger\n    //   reset();\n    // }\n\n    //PLAYER 2 UPDATE\n    var tquaternion = new THREE.Quaternion()\n    if (player2Data.h) {\n      player2Data.h = player2Data.h\n    } else {\n      player2Data.h = tquaternion\n    }\n    player2.position.x = player2Data.x;\n    player2.position.y = player2Data.y;\n    player2.position.z = player2Data.z;\n    player2.rotation.setFromQuaternion(player2Data.h);\n    player2.firing = player2Data.firing;\n    player.hp = player2Data.hp || 20;\n    // debugger\n    scene.add(player2)\n\n    let adjustRot = THREE.Math.degToRad(20)\n    //PLAYER EMIT\n    socket.emit('updatedPos', {\n      id: socket.id,\n      x: player.position.x,\n      y: player.position.y,\n      z: player.position.z,\n      h: player.getWorldQuaternion(tquaternion),\n      firing: input.isFirePressed,\n      hp: player2.hp,\n      pb: player.position.y,\n    });\n\n\n    socket.on('otherSpawn', (serverPack) => {\n      serverPackage = serverPack\n    })\n    // debugger\n    for (let i = 0; i < serverPackage.length; i++) {\n      if (serverPackage[i].id !== socket.id) {\n        player2Data = serverPackage[i];\n      }\n    }\n\n\n    // opponent = document.getElementById('player')\n    // opponent.innerHTML = `HP: ${player.hp}`;\n\n    let ResizeWidthRatio = 8 / 626;\n    //RADAR_P1\n    let radarX = player.position.x / 300 + 7;\n    let radarY = player.position.y / 300 + 8;\n    let radarZ = player.position.z / 300;\n    // radar.position.x = ResizeWidthRatio * window.innerWidth - 3;\n\n\n    if (radarX > 5 && radarX < 8 && radarY > 6 && radarY < 9 && radarZ > -2 && radarZ < 2) {\n      p1radar.position.x = radarX;\n      p1radar.position.y = radarY;\n      p1radar.position.z = radarZ;\n    }\n    p1radar.rotation.setFromQuaternion(player.getWorldQuaternion(tquaternion));\n\n    let radarX2 = player2.position.x / 300 + 7;\n    let radarY2 = player2.position.y / 300 + 8;\n    let radarZ2 = player2.position.z / 300;\n\n    //RADAR_P1\n    if (radarX2 > 5 && radarX2 < 8 && radarY2 > 6 && radarY2 < 9 && radarZ2 > -2 && radarZ2 < 2) {\n      p2radar.position.x = radarX2;\n      p2radar.position.y = radarY2;\n      p2radar.position.z = radarZ2;\n    }\n    p2radar.rotation.setFromQuaternion(player2.getWorldQuaternion(tquaternion));\n\n    //HPBAR\n    hpBar.scale.x = (.25 * player.hp) / 5\n    // hpBar.position.x = - ResizeWidthRatio * window.innerWidth + 4;\n    // hpBar.position.x = 4;\n\n    // //HPTEXT\n    // hpTxt.position.x = - ResizeWidthRatio * window.innerWidth + 4;\n    // hpTxt.position.x = 4;\n\n    //HP2BAR\n    hp2Bar.scale.x = (.25 * player2.hp) / 5\n    // hp2Bar.position.x = - ResizeWidthRatio * window.innerWidth + 4;\n\n    // //HP2TEXT\n    // hp2Txt.position.x = - ResizeWidthRatio * window.innerWidth + 4;\n\n\n    scene.simulate();\n    // renderer.render(sceneHUD, cameraHUD)\n    renderer.render(scene, camera);\n    stats.end();\n\n\n  };\n\n  init();\n\n  // 11 \n  //...10 is mouse event listener, 12 is adding listener to window)...\n  // CALL RENDER LOOP\n  animate();\n}"],"sourceRoot":""}